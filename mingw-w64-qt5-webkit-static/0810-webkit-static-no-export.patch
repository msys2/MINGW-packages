--- a/Source/ThirdParty/ANGLE/include/export.h
+++ b/Source/ThirdParty/ANGLE/include/export.h
@@ -9,7 +9,7 @@
 #ifndef LIBGLESV2_EXPORT_H_
 #define LIBGLESV2_EXPORT_H_
 
-#if defined(_WIN32)
+#if defined(_MSC_VER)
 #   if defined(LIBGLESV2_IMPLEMENTATION) || defined(LIBANGLE_IMPLEMENTATION)
 #       define ANGLE_EXPORT __declspec(dllexport)
 #   else
--- a/Source/WTF/wtf/ExportMacros.h
+++ b/Source/WTF/wtf/ExportMacros.h
@@ -50,8 +50,13 @@
 
 #if OS(WINDOWS)
 
+#if defined(SHARED_CORE)
 #define WTF_EXPORT_DECLARATION __declspec(dllexport)
 #define WTF_IMPORT_DECLARATION __declspec(dllimport)
+#else
+#define WTF_EXPORT_DECLARATION
+#define WTF_IMPORT_DECLARATION
+#endif
 #define WTF_HIDDEN_DECLARATION
 
 #elif defined(__GNUC__) && !defined(__CC_ARM) && !defined(__ARMCC__)
