diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/client/BUILD.gn b/src/3rdparty/chromium/third_party/crashpad/crashpad/client/BUILD.gn
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/client/BUILD.gn	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/client/BUILD.gn	2023-12-14 21:23:16.451117000 +0800
@@ -85,8 +85,10 @@
   ]
 
   if (crashpad_is_win) {
-    libs = [ "rpcrt4.lib" ]
-    cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
+    libs = [ "rpcrt4" ]
+    if (is_msvc) {
+      cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
+    }
   }
 
   if (crashpad_is_ios) {
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.cc b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.cc
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.cc	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.cc	2023-12-14 21:23:16.497957900 +0800
@@ -16,6 +16,7 @@
 
 #include <string.h>
 
+#if defined(COMPILER_MSVC)
 extern "C" {
 
 int strcasecmp(const char* s1, const char* s2) {
@@ -23,3 +24,4 @@
 }
 
 }  // extern "C"
+#endif
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/strings.h	2023-12-14 21:23:16.497957900 +0800
@@ -15,6 +15,7 @@
 #ifndef CRASHPAD_COMPAT_WIN_STRINGS_H_
 #define CRASHPAD_COMPAT_WIN_STRINGS_H_
 
+#if defined(COMPILER_MSVC)
 #ifdef __cplusplus
 extern "C" {
 #endif
@@ -25,4 +26,8 @@
 }  // extern "C"
 #endif
 
+#else
+#include_next <strings.h>
+#endif
+
 #endif  // CRASHPAD_COMPAT_WIN_STRINGS_H_
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/time.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/time.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/time.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/time.h	2023-12-14 21:23:16.529282300 +0800
@@ -15,6 +15,10 @@
 #ifndef CRASHPAD_COMPAT_WIN_SYS_TIME_H_
 #define CRASHPAD_COMPAT_WIN_SYS_TIME_H_
 
+#if defined(COMPILER_MSVC)
 #include <winsock2.h>
+#else
+#include_next <sys/time.h>
+#endif
 
 #endif  // CRASHPAD_COMPAT_WIN_SYS_TIME_H_
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/types.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/types.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/types.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/sys/types.h	2023-12-14 21:23:16.529282300 +0800
@@ -16,7 +16,11 @@
 #define CRASHPAD_COMPAT_WIN_SYS_TYPES_H_
 
 // This is intended to be roughly equivalent to #include_next.
+#if defined(COMPILER_MSVC)
 #include <../ucrt/sys/types.h>
+#else
+#include_next <sys/types.h>
+#endif
 
 #include <stdint.h>
 
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.cc b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.cc
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.cc	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.cc	2023-12-14 21:23:16.544825100 +0800
@@ -33,8 +33,38 @@
   return nullptr;
 }
 
+#if defined(COMPILER_MSVC)
 time_t timegm(struct tm* tm) {
   return _mkgmtime(tm);
 }
+#else
+// https://stackoverflow.com/questions/16647819/timegm-cross-platform
+// Algorithm: http://howardhinnant.github.io/date_algorithms.html
+int days_from_epoch(int y, int m, int d) {
+    y -= m <= 2;
+    int era = y / 400;
+    int yoe = y - era * 400;                                   // [0, 399]
+    int doy = (153 * (m + (m > 2 ? -3 : 9)) + 2) / 5 + d - 1;  // [0, 365]
+    int doe = yoe * 365 + yoe / 4 - yoe / 100 + doy;           // [0, 146096]
+    return era * 146097 + doe - 719468;
+}
+
+// It  does not modify broken-down time
+time_t timegm(struct tm* tm) {
+    int year = tm->tm_year + 1900;
+    int month = tm->tm_mon;          // 0-11
+    if (month > 11) {
+        year += month / 12;
+        month %= 12;
+    } else if (month < 0) {
+        int years_diff = (11 - month) / 12;
+        year -= years_diff;
+        month += 12 * years_diff;
+    }
+    int days_since_epoch = days_from_epoch(year, month + 1, tm->tm_mday);
+
+    return 60 * (60 * (24L * days_since_epoch + tm->tm_hour) + tm->tm_min) + tm->tm_sec;
+}
+#endif
 
 }  // extern "C"
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/time.h	2023-12-14 21:23:16.560449200 +0800
@@ -15,8 +15,12 @@
 #ifndef CRASHPAD_COMPAT_WIN_TIME_H_
 #define CRASHPAD_COMPAT_WIN_TIME_H_
 
+#if defined(COMPILER_MSVC)
 // This is intended to be roughly equivalent to #include_next.
 #include <../ucrt/time.h>
+#else
+#include_next <time.h>
+#endif
 
 #ifdef __cplusplus
 extern "C" {
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winbase.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winbase.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winbase.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winbase.h	2023-12-14 21:23:16.560449200 +0800
@@ -16,7 +16,11 @@
 #define CRASHPAD_COMPAT_WIN_WINBASE_H_
 
 // include_next <winbase.h>
+#if defined(COMPILER_MSVC)
 #include <../um/winbase.h>
+#else
+#include_next <winbase.h>
+#endif
 
 // 10.0.15063.0 SDK
 
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winnt.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winnt.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winnt.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winnt.h	2023-12-14 21:23:16.576073500 +0800
@@ -16,7 +16,11 @@
 #define CRASHPAD_COMPAT_WIN_WINNT_H_
 
 // include_next <winnt.h>
+#if defined(COMPILER_MSVC)
 #include <../um/winnt.h>
+#else
+#include_next <winnt.h>
+#endif
 
 // https://msdn.microsoft.com/library/aa373184.aspx: "Note that this structure
 // definition was accidentally omitted from WinNT.h."
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winternl.h b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winternl.h
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winternl.h	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/compat/win/winternl.h	2023-12-14 21:23:16.576073500 +0800
@@ -16,7 +16,11 @@
 #define CRASHPAD_COMPAT_WIN_WINTERNL_H_
 
 // include_next <winternl.h>
+#if defined(COMPILER_MSVC)
 #include <../um/winternl.h>
+#else
+#include_next <winternl.h>
+#endif
 
 // 10.0.16299.0 SDK
 
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/handler/BUILD.gn b/src/3rdparty/chromium/third_party/crashpad/crashpad/handler/BUILD.gn
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/handler/BUILD.gn	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/handler/BUILD.gn	2023-12-14 21:23:16.591717000 +0800
@@ -298,7 +298,9 @@
 
     sources = [ "win/crashy_signal.cc" ]
 
-    cflags = [ "/wd4702" ]  # Unreachable code.
+    if (is_msvc) {
+      cflags = [ "/wd4702" ]  # Unreachable code.
+    }
 
     deps = [
       "../client",
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/minidump/BUILD.gn b/src/3rdparty/chromium/third_party/crashpad/crashpad/minidump/BUILD.gn
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/minidump/BUILD.gn	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/minidump/BUILD.gn	2023-12-14 21:23:16.638570600 +0800
@@ -81,7 +81,7 @@
     "../util",
   ]
 
-  if (crashpad_is_win) {
+  if (crashpad_is_win && is_msvc) {
     cflags = [
       "/wd4201",  # nonstandard extension used : nameless struct/union
       "/wd4324",  # 'struct' : structure was padded due to __declspec(align())
@@ -142,7 +142,7 @@
     "../util",
   ]
 
-  if (crashpad_is_win) {
+  if (crashpad_is_win && is_msvc) {
     cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
   }
 }
@@ -186,7 +186,7 @@
     "../util",
   ]
 
-  if (crashpad_is_win) {
+  if (crashpad_is_win && is_msvc) {
     cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
   }
 }
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/snapshot/BUILD.gn b/src/3rdparty/chromium/third_party/crashpad/crashpad/snapshot/BUILD.gn
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/snapshot/BUILD.gn	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/snapshot/BUILD.gn	2023-12-14 21:23:16.669910300 +0800
@@ -254,8 +254,10 @@
   ]
 
   if (crashpad_is_win) {
-    cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
-    libs = [ "powrprof.lib" ]
+    if (is_msvc) {
+      cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
+    }
+    libs = [ "powrprof" ]
   }
 }
 
@@ -274,7 +276,7 @@
     "../util",
   ]
 
-  if (crashpad_is_win) {
+  if (crashpad_is_win && is_msvc) {
     cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
   }
 }
@@ -324,7 +326,7 @@
     "../util",
   ]
 
-  if (crashpad_is_win) {
+  if (crashpad_is_win && is_msvc) {
     cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
   }
 }
@@ -473,7 +475,9 @@
   }
 
   if (crashpad_is_win) {
-    cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
+    if (is_msvc) {
+      cflags = [ "/wd4201" ]  # nonstandard extension used : nameless struct/union
+    }
 
     data_deps += [
       ":crashpad_snapshot_test_annotations",
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/BUILD.gn b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/BUILD.gn
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/BUILD.gn	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/BUILD.gn	2023-12-14 21:23:16.716767700 +0800
@@ -534,12 +534,12 @@
       "win/xp_compat.h",
     ]
 
-    if (current_cpu != "arm64") {
+    if (is_msvc && current_cpu != "arm64") {
       sources += [
         "misc/capture_context_win.asm",
         "win/safe_terminate_process.asm",
       ]
-    } else {
+    } else if (!is_mingw) {
       # Most Crashpad builds use Microsoft's armasm64.exe macro assembler for
       # .asm source files. When building in Chromium, clang-cl is used as the
       # assembler instead. Since the two assemblers recognize different
@@ -611,19 +611,21 @@
 
   if (crashpad_is_win) {
     libs = [
-      "user32.lib",
+      "user32",
 
       # TODO(jperaza): version.lib is needed for Windows 7 compatibility.
       # mincore.lib may be linked against instead when targeting Windows 8+.
-      "version.lib",
+      "version",
 
-      "winhttp.lib",
+      "winhttp",
     ]
 
-    cflags = [ "/wd4201" ]  # nonstandard extension used: nameless struct/union.
+    if (is_msvc) {
+      cflags = [ "/wd4201" ]  # nonstandard extension used: nameless struct/union.
 
-    if (current_cpu == "x86") {
-      asmflags = [ "/safeseh" ]
+      if (current_cpu == "x86") {
+        asmflags = [ "/safeseh" ]
+      }
     }
   }
 
@@ -711,7 +713,7 @@
     }
 
     if (crashpad_is_win) {
-      libs = [ "ws2_32.lib" ]
+      libs = [ "ws2_32" ]
     }
 
     if (crashpad_use_boringssl_for_http_transport_socket) {
@@ -945,8 +947,8 @@
 
   if (crashpad_is_win) {
     libs = [
-      "rpcrt4.lib",
-      "dbghelp.lib",
+      "rpcrt4",
+      "dbghelp",
     ]
     data_deps += [
       ":crashpad_util_test_loader_lock_test",
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/stdlib/aligned_allocator.cc b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/stdlib/aligned_allocator.cc
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/stdlib/aligned_allocator.cc	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/stdlib/aligned_allocator.cc	2023-12-14 21:23:16.779243500 +0800
@@ -22,7 +22,9 @@
 #include <stdlib.h>
 #elif BUILDFLAG(IS_WIN)
 #include <malloc.h>
+#if defined(COMPILER_MSVC)
 #include <xutility>
+#endif
 #endif  // BUILDFLAG(IS_POSIX)
 
 namespace {
@@ -34,8 +36,10 @@
 #if BUILDFLAG(IS_POSIX) || defined(_LIBCPP_STD_VER)
   // This works with both libc++ and libstdc++.
   std::__throw_bad_alloc();
-#elif BUILDFLAG(IS_WIN)
+#elif defined(COMPILER_MSVC)
   std::_Xbad_alloc();
+#elif defined(COMPILER_GCC)
+  std::bad_alloc();
 #endif  // BUILDFLAG(IS_POSIX)
 }
 
diff -ur a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/win/process_info.cc b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/win/process_info.cc
--- a/src/3rdparty/chromium/third_party/crashpad/crashpad/util/win/process_info.cc	2023-10-04 03:49:54.000000000 +0800
+++ b/src/3rdparty/chromium/third_party/crashpad/crashpad/util/win/process_info.cc	2023-12-14 21:23:16.794849200 +0800
@@ -115,11 +115,19 @@
                          &bytes_read)) {
     // We don't have a name for the type we're reading, so include the signature
     // to get the type of T.
+#if defined(COMPILER_MSVC)
     PLOG(ERROR) << "ReadProcessMemory " << __FUNCSIG__;
+#else
+    PLOG(ERROR) << "ReadProcessMemory " << __PRETTY_FUNCTION__;
+#endif
     return false;
   }
   if (bytes_read != sizeof(T)) {
+#if defined(COMPILER_MSVC)
     LOG(ERROR) << "ReadProcessMemory " << __FUNCSIG__ << " incorrect size";
+#else
+    LOG(ERROR) << "ReadProcessMemory " << __PRETTY_FUNCTION__ << " incorrect size";
+#endif
     return false;
   }
   return true;
