diff -urN kconfig-5.25.0.orig/src/core/kconfig.cpp kconfig-5.25.0/src/core/kconfig.cpp
--- kconfig-5.25.0.orig/src/core/kconfig.cpp	2016-08-18 19:43:25.182282500 +0200
+++ kconfig-5.25.0/src/core/kconfig.cpp	2016-08-21 14:50:45.225850900 +0200
@@ -53,6 +53,7 @@
 #include <QtCore/QSet>
 #include <QtCore/QBasicMutex>
 #include <QtCore/QMutexLocker>
+#include <QtCore/QLibraryInfo>
 
 bool KConfigPrivate::mappingsRegistered = false;
 
@@ -79,12 +80,7 @@
     }
     if (use_etc_kderc.load()) {
 
-        etc_kderc =
-#ifdef Q_OS_WIN
-            QFile::decodeName(qgetenv("WINDIR") + "/kde5rc");
-#else
-            QStringLiteral("/etc/kde5rc");
-#endif
+        etc_kderc = QLibraryInfo::location(QLibraryInfo::PrefixPath) + QStringLiteral("/etc/kde5rc");
         if (!QFileInfo(etc_kderc).isReadable()) {
             etc_kderc.clear();
         }
@@ -217,11 +213,6 @@
             }
             QString env;
             if (!aVarName.isEmpty()) {
-#ifdef Q_OS_WIN
-                if (aVarName == QLatin1String("HOME")) {
-                    env = QDir::homePath();
-                } else
-#endif
                 {
                     QByteArray pEnv = qgetenv(aVarName.toLatin1().constData());
                     if (!pEnv.isEmpty()) {
