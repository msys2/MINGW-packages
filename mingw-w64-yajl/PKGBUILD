_realname=yajl
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=2.1.0
pkgrel=1
pkgdesc='Yet Another JSON Library.'
arch=('any')
url='http://lloyd.github.com/yajl/'
license=('ISC')
source=(
    "$_realname-$pkgver.tar.gz::https://github.com/lloyd/$_realname/archive/$pkgver.tar.gz"
    '01-fix-compiler.patch'
)
md5sums=(
    '6887e0ed7479d2549761a4d284d3ecb0'
    '250b39d3592eb7042a48c421d1d0eefb'
)
makedepends=(
  "${MINGW_PACKAGE_PREFIX}-cmake"
)
build() {
  cd "$_realname-$pkgver"  
  
  patch -p1 -i ../01-fix-compiler.patch
  cmake -G "MSYS Makefiles" -DCMAKE_INSTALL_PREFIX= .
  make
}
package() {
  cd "$_realname-$pkgver"
  
  make DESTDIR="$pkgdir${MINGW_PREFIX}" install
  install -Dm644 "COPYING" \
    "${pkgdir}${MINGW_PREFIX}/share/licenses/${_realname}/LICENSE"
}
