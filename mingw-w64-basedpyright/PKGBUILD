# Maintainer: Maksim Bondarenkov <maksapple2306@gmail.com>

_realname=basedpyright
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=1.38.2
pkgrel=1
pkgdesc='Pyright fork with various improvements and Pylance features (mingw-w64)'
arch=('any')
mingw_arch=('ucrt64' 'clang64' 'clangarm64')
url='https://github.com/DetachHead/basedpyright'
msys2_repository_url='https://github.com/DetachHead/basedpyright'
msys2_documentation_url='https://docs.basedpyright.com'
msys2_references=(
  'archlinux: basedpyright'
  'purl: pkg:npm/basedpyright'
)
license=('spdx:MIT')
provides=("${MINGW_PACKAGE_PREFIX}-pyright")
conflicts=("${MINGW_PACKAGE_PREFIX}-pyright")
depends=("${MINGW_PACKAGE_PREFIX}-nodejs")
source=("https://registry.npmjs.org/${_realname}/-/${_realname}-${pkgver}.tgz")
sha256sums=('ba0f0cd33f2be7c62785201acc11f29e8e7adc2bcded669de8f7d123e7780827')
noextract=("${_realname}-${pkgver}.tgz")

package() {
  npm install -g \
    --cache npm-cache \
    --prefix "${pkgdir}${MINGW_PREFIX}" \
    "${_realname}-${pkgver}.tgz"
}
