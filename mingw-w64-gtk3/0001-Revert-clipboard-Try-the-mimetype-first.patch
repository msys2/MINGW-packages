From 01e4134cb464128b7c8169b8cf71c9d6df529fbb Mon Sep 17 00:00:00 2001
From: Christoph Reiter <creiter@src.gnome.org>
Date: Wed, 10 May 2017 17:56:33 +0200
Subject: [PATCH] Revert "clipboard: Try the mimetype first"

This reverts commit 7d9450fb60b03dcead85a462f30f24e60119c520.
---
 gtk/gtkclipboard.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

diff --git a/gtk/gtkclipboard.c b/gtk/gtkclipboard.c
index 7de4f60099..06a8a39f93 100644
--- a/gtk/gtkclipboard.c
+++ b/gtk/gtkclipboard.c
@@ -1042,14 +1042,7 @@ request_text_received_func (GtkClipboard     *clipboard,
        */
       GdkAtom target = gtk_selection_data_get_target (selection_data);
 
-      if (target == gdk_atom_intern_static_string ("text/plain;charset=utf-8"))
-        {
-          gtk_clipboard_request_contents (clipboard,
-                                          gdk_atom_intern_static_string ("UTF8_TEXT"),
-                                          request_text_received_func, info);
-          return;
-        }
-      else if (target == gdk_atom_intern_static_string ("UTF8_STRING"))
+      if (target == gdk_atom_intern_static_string ("UTF8_STRING"))
 	{
 	  gtk_clipboard_request_contents (clipboard,
 					  gdk_atom_intern_static_string ("COMPOUND_TEXT"), 
@@ -1100,7 +1093,7 @@ gtk_clipboard_request_text (GtkClipboard                *clipboard,
   info->callback = callback;
   info->user_data = user_data;
 
-  gtk_clipboard_request_contents (clipboard, gdk_atom_intern_static_string ("text/plain;charset=utf-8"),
+  gtk_clipboard_request_contents (clipboard, gdk_atom_intern_static_string ("UTF8_STRING"),
 				  request_text_received_func,
 				  info);
 }
-- 
2.11.0

