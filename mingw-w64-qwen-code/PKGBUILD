_realname=qwen-code
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=0.10.5
pkgrel=1
pkgdesc="A powerful command-line AI workflow tool adapted from Gemini CLI, specifically optimized for Qwen3-Coder models. (mingw-w64)"
arch=('any')
mingw_arch=('mingw64' 'ucrt64' 'clang64' 'clangarm64')
url="https://github.com/QwenLM/qwen-code"
msys2_repository_url='https://github.com/QwenLM/qwen-code'
license=('Apache-2.0')
depends=(${MINGW_PACKAGE_PREFIX}-nodejs)
source=("https://registry.npmjs.org/@qwen-code/${_realname}/-/${_realname}-${pkgver}.tgz")
sha256sums=('e3c5e7a93472e797c625a5f7c95e99d77b7f700e32c543d68edd2ff10a46b95b')
noextract=("${_realname}-${pkgver}.tgz")
msys2_references=(
  "aur: qwen-code"
  "purl: pkg:npm/@qwen-code/${_realname}"
)

package() {
  npm install -g \
    --cache npm-cache \
    --prefix "${pkgdir}${MINGW_PREFIX}" \
    "${_realname}-${pkgver}.tgz"
}
