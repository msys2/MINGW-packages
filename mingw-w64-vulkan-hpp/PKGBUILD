# Contributor: Mehdi Chinoune <mehdi.chinoune@hotmail.com>

_realname=vulkan-hpp
_pkgname=vulkan-hpp
pkgbase=mingw-w64-${_pkgname}
pkgname=("${MINGW_PACKAGE_PREFIX}-${_pkgname}")
pkgver=1.3.241
_tinyxml2_ver=9.0.0
pkgrel=1
pkgdesc="Open-Source Vulkan C++ API (mingw-w64)"
arch=('any')
mingw_arch=('mingw64' 'ucrt64' 'clang64' 'clangarm64')
url='https://www.khronos.org/vulkan/'
license=('spdx:Apache-2.0')
# makedepends=("${MINGW_PACKAGE_PREFIX}-cc"
#              "${MINGW_PACKAGE_PREFIX}-cmake"
#              "${MINGW_PACKAGE_PREFIX}-ninja"
#              "${MINGW_PACKAGE_PREFIX}-vulkan-headers")
source=("${_realname}-${pkgver}.tar.gz"::"https://github.com/KhronosGroup/Vulkan-Hpp/archive/v${pkgver}.tar.gz")
        # "tinyxml2-${_tinyxml2_ver}.tar.gz"::"https://github.com/leethomason/tinyxml2/archive/${_tinyxml2_ver}.tar.gz")
sha256sums=('5afa59d8bca07fba712d1a7dbf07526c5b1894026afc33c8ff451c221aaea793')
            # 'cc2f1417c308b1f6acc54f88eb70771a0bf65f76282ce5c40e54cfe52952702c')

# prepare() {
#   rm -rf "${srcdir}"/${_realname}-${pkgver}/tinyxml2
#   cp -r "${srcdir}"/tinyxml2-${_tinyxml2_ver} "${srcdir}"/${_realname}-${pkgver}/tinyxml2
# }

# build() {
#   mkdir -p "${srcdir}/build-${MSYSTEM}" && cd "${srcdir}/build-${MSYSTEM}"

#   declare -a _extra_config
#   if check_option "debug" "n"; then
#     _extra_config+=("-DCMAKE_BUILD_TYPE=Release")
#   else
#     _extra_config+=("-DCMAKE_BUILD_TYPE=Debug")
#   fi

#   MSYS2_ARG_CONV_EXCL="-DCMAKE_INSTALL_PREFIX=" \
#     "${MINGW_PREFIX}"/bin/cmake.exe \
#       -GNinja \
#       -DCMAKE_INSTALL_PREFIX="${MINGW_PREFIX}" \
#       "${_extra_config[@]}" \
#       -DVulkanRegistry_DIR=${MINGW_PREFIX}/share/vulkan/registry \
#       -DVULKAN_HPP_INSTALL=ON \
#       -DVULKAN_HPP_RUN_GENERATOR=ON \
#       ../${_realname}-${pkgver}

#   "${MINGW_PREFIX}"/bin/cmake.exe --build .
# }

package() {
  # cd "${srcdir}/build-${MSYSTEM}"

  # DESTDIR="${pkgdir}" "${MINGW_PREFIX}"/bin/cmake.exe --install .
  mkdir -p "${pkgdir}${MINGW_PREFIX}/include"
  cp -r "${srcdir}/${_realname}-${pkgver}/vulkan" "${pkgdir}${MINGW_PREFIX}/include/"

  install -Dm644 "${srcdir}/${_realname}-${pkgver}/LICENSE.txt" "${pkgdir}${MINGW_PREFIX}/share/licenses/${_realname}/LICENSE"
}
