From 4d248a955b4fb699f265372be551f39a2d2bee3a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Markus=20M=C3=BCtzel?= <markus.muetzel@gmx.de>
Date: Tue, 24 Feb 2026 13:25:04 +0100
Subject: [PATCH] Set locale "C" before formatting strings in MATC

---
 matc/src/matc.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/matc/src/matc.c b/matc/src/matc.c
index 8561729eb..b556afc1f 100644
--- a/matc/src/matc.c
+++ b/matc/src/matc.c
@@ -94,6 +94,8 @@ $  usage of the function and type of the parameters
  *
  */
 
+#include <locale.h>
+
 #define MODULE_MATC
 #include "elmer/matc.h"
 #include "str.h"
@@ -245,6 +247,8 @@ void mtc_init( FILE *input_file, FILE *output_file, FILE *error_file )
 
 char * mtc_domath( char *str )
 {
+  setlocale(LC_ALL, "C");
+
   VARIABLE *headsave;            /* this should not be here */
 
   jmp_buf jmp, *savejmp;         /* save program context */
-- 
2.51.0.windows.2

