--- a/cmake/GenerateBuiltins.cmake
+++ b/cmake/GenerateBuiltins.cmake
@@ -194,7 +194,11 @@
     set(fpic "")
     set(debian_triple)
     if (${os_name} STREQUAL "windows")
-        set(triple ${target_arch}-pc-win32)
+        if(MINGW)
+            set(triple ${target_arch}-pc-windows-gnu)
+        else()
+            set(triple ${target_arch}-pc-win32)
+        endif()
     elseif (${os_name} STREQUAL "linux")
         if (${target_arch} STREQUAL "i686" OR ${target_arch} STREQUAL "x86_64" OR ${target_arch} STREQUAL "aarch64")
             set(triple ${target_arch}-unknown-linux-gnu)
--- a/src/ispc.cpp
+++ b/src/ispc.cpp
@@ -1567,7 +1567,11 @@
         //"x86_64-pc-windows-msvc"
         triple.setVendor(llvm::Triple::VendorType::PC);
         triple.setOS(llvm::Triple::OSType::Win32);
+#ifdef __MINGW32__
+        triple.setEnvironment(llvm::Triple::EnvironmentType::GNU);
+#else
         triple.setEnvironment(llvm::Triple::EnvironmentType::MSVC);
+#endif
         break;
     case TargetOS::custom_linux:
     case TargetOS::linux:
