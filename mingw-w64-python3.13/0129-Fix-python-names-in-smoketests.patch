From acea4c0e25663911f3d8fa16c879cd56b8a98fe6 Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Fri, 29 Aug 2025 12:12:11 +0300
Subject: [PATCH 129/N] Fix python names in smoketests

---
 mingw_smoketests.py | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/mingw_smoketests.py b/mingw_smoketests.py
index 61508df..112a931 100644
--- a/mingw_smoketests.py
+++ b/mingw_smoketests.py
@@ -189,19 +189,21 @@ class Tests(unittest.TestCase):
         import venv
         import subprocess
         import shutil
+        import sysconfig
         with tempfile.TemporaryDirectory() as tmp:
             builder = venv.EnvBuilder()
             builder.create(tmp)
+            abiflags = sysconfig.get_config_var('ABIFLAGS')
             assert os.path.exists(os.path.join(tmp, "bin", "activate"))
-            assert os.path.exists(os.path.join(tmp, "bin", "python.exe"))
-            assert os.path.exists(os.path.join(tmp, "bin", "python3.exe"))
+            assert os.path.exists(os.path.join(tmp, "bin", "python" + abiflags + ".exe"))
+            assert os.path.exists(os.path.join(tmp, "bin", "pythonw" + abiflags + ".exe"))
             subprocess.check_call([shutil.which("bash.exe"), os.path.join(tmp, "bin", "activate")])
 
             # This will not work in in-tree build
             if not sysconfig.is_python_build():
                 op = subprocess.check_output(
                     [
-                        os.path.join(tmp, "bin", "python.exe"),
+                        os.path.join(tmp, "bin", "python" + abiflags + ".exe"),
                         "-c",
                         "print('Hello World')"
                     ],
