From 53123f6ed5b60d6904a6c1f4ea9d486ad9bf3673 Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Thu, 28 Aug 2025 14:25:41 +0300
Subject: [PATCH 123/N] Try fix venv setup

---
 Lib/venv/__init__.py | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

diff --git a/Lib/venv/__init__.py b/Lib/venv/__init__.py
index 0c28ea0..86a3486 100644
--- a/Lib/venv/__init__.py
+++ b/Lib/venv/__init__.py
@@ -382,7 +382,7 @@ class EnvBuilder:
                 # the executables.
                 link_sources.update({
                     f: os.path.join(dirname, f) for f in os.listdir(dirname)
-                    if os.path.normcase(f).startswith(('python', 'vcruntime'))
+                    if os.path.normcase(f).startswith(('python', 'libpython', 'vcruntime'))
                     and os.path.normcase(os.path.splitext(f)[1]) == '.dll'
                 })
 
@@ -412,13 +412,6 @@ class EnvBuilder:
                     except OSError:
                         logger.warning('Unable to copy %r to %r', src, dest)
 
-            if os.name == 'posix' or (os.name == "nt" and 'mingw' in sys.version.lower()):
-                # copy from python/pythonw so the venvlauncher magic in symlink_or_copy triggers
-                copier = self.symlink_or_copy
-                copier(os.path.join(dirname, 'python.exe'), os.path.join(binpath, 'python3.exe'))
-                copier(os.path.join(dirname, 'python.exe'), os.path.join(binpath, 'python%d.%d.exe' % sys.version_info[:2]))
-                copier(os.path.join(dirname, 'pythonw.exe'), os.path.join(binpath, 'python3w.exe'))
-
             if sysconfig.is_python_build():
                 # copy init.tcl
                 for root, dirs, files in os.walk(context.python_dir):
