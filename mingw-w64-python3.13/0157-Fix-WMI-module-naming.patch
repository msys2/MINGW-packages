From d430ccc857a6b2d19329d40bddd7e63df8972398 Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Wed, 3 Sep 2025 16:11:27 +0300
Subject: [PATCH 157/N] Fix WMI module naming

---
 Makefile.pre.in         | 2 +-
 Modules/Setup.stdlib.in | 2 +-
 configure.ac            | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/Makefile.pre.in b/Makefile.pre.in
index 084d9fd..a45e883 100644
--- a/Makefile.pre.in
+++ b/Makefile.pre.in
@@ -104,7 +104,7 @@ CONFIGURE_LDFLAGS=	@LDFLAGS@
 # values.
 PY_CFLAGS=	$(BASECFLAGS) $(OPT) $(CONFIGURE_CFLAGS) $(CFLAGS) $(EXTRA_CFLAGS)
 PY_CFLAGS_NODIST=$(CONFIGURE_CFLAGS_NODIST) $(CFLAGS_NODIST) -I$(srcdir)/Include/internal -I$(srcdir)/Include/internal/mimalloc
-PY_CXXFLAGS_NODIST=$(filter-out -std=c11,$(PY_CFLAGS_NODIST)) -std=c++17
+PY_CXXFLAGS_NODIST=$(filter-out -std=c11,$(PY_CFLAGS_NODIST)) -std=c++20
 # Both CPPFLAGS and LDFLAGS need to contain the shell's value for setup.py to
 # be able to build extension modules using the directories specified in the
 # environment variables
diff --git a/Modules/Setup.stdlib.in b/Modules/Setup.stdlib.in
index 8a6dcad..9c84aa0 100644
--- a/Modules/Setup.stdlib.in
+++ b/Modules/Setup.stdlib.in
@@ -159,7 +159,7 @@
 # Windows specific modules
 
 @MODULE__OVERLAPPED_TRUE@_overlapped overlapped.c
-@MODULE__WMIMODULE_TRUE@_wmimodule ../PC/_wmimodule.cpp
+@MODULE__WMI_TRUE@_wmi ../PC/_wmimodule.cpp
 @MODULE_WINSOUND_TRUE@winsound ../PC/winsound.c
 
 
diff --git a/configure.ac b/configure.ac
index 580548c..9e20605 100644
--- a/configure.ac
+++ b/configure.ac
@@ -8392,7 +8392,7 @@ dnl windows specific modules
 PY_STDLIB_MOD([winreg], [test "$MACHDEP" = "win32"])
 PY_STDLIB_MOD([msvcrt], [test "$MACHDEP" = "win32"])
 PY_STDLIB_MOD([_winapi], [test "$MACHDEP" = "win32"])
-PY_STDLIB_MOD([_wmimodule], [test "$MACHDEP" = "win32"], [], [],
+PY_STDLIB_MOD([_wmi], [test "$MACHDEP" = "win32"], [], [],
   [-lwbemuuid -lpropsys -lole32 -loleaut32 -luuid])
 PY_STDLIB_MOD([winsound], [test "$MACHDEP" = "win32"], [], [],
   [-lwinmm])
