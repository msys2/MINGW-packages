# Maintainer: taozuhong <taozuhong@gmail.com>

_realname=toml-c
_commit=6064600530622733bb588053a9393e86e23277da
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=1.0.0
pkgrel=1
pkgdesc="TOML C library (mingw-w64)"
arch=('any')
mingw_arch=('mingw64' 'ucrt64' 'clang64' 'clangarm64')
url="https://github.com/arp242/toml-c"
license=('spdx:MIT')
makedepends=("${MINGW_PACKAGE_PREFIX}-cc"
             "${MINGW_PACKAGE_PREFIX}-autotools"
             "${MINGW_PACKAGE_PREFIX}-pkgconf")
source=("git+https://github.com/arp242/toml-c.git#commit=$_commit")
sha256sums=(SKIP)

prepare() {
  cd "${srcdir}"/${_realname}
}

build() {
  cd "${srcdir}"/${_realname}
  SANITIZER= make -e
}

package() {
  cd "${srcdir}"/${_realname}
  DESTDIR="${pkgdir}" PREFIX=${MINGW_PREFIX}  make -e install

  install -Dm644 "${srcdir}/${_realname}/LICENSE" "${pkgdir}${MINGW_PREFIX}/share/licenses/${_realname}/COPYING"
}
