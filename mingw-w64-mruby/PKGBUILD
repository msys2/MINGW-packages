# Maintainer: Dominic Sisners <dsisnero@gmail.com>

_realname=mruby
pkgbase=mingw-w64-${_realname}
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=1.4.0
pkgrel=1
pkgdesc="mruby is the lightweight implementation of the Ruby language"
arch=('any')
url="https://github.com/mruby"
license=('MIT')
makedepends=("${MINGW_PACKAGE_PREFIX}-ruby"
             "bison"
	    )

source=(${_realname}-${pkgver}.zip::"https://github.com/${_realname}/${_realname}/archive/${pkgver}.zip")
sha256sums=('449bf911a0cd3b92f39a0548341310f06626aa5f7c02f832853e86a06117bf39')


build() {


  [[ -d build-${MINGW_CHOST} ]] && rm -rf build-${MINGW_CHOST}
  cp -rf "${_realname}-${pkgver}" build-${MINGW_CHOST}
  cd build-${MINGW_CHOST}

  ./minirake

}

package() {
  PREFIX="${pkgdir}$MING_PREFIX}" 
  cd "${srcdir}/build-${MINGW_CHOST}"
  install -d "${pkgdir}${MINGW_PREFIX}"/bin
  cp build/host-debug/bin/* "${pkgdir}${MINGW_PREFIX}"/bin/ || return 1
  cp build/host/bin/* "${pkgdir}${MINGW_PREFIX}"/bin/ || return 1

  install -d "${pkgdir}${MINGW_PREFIX}"/lib
  cp build/host/lib/*.a "${pkgdir}${MINGW_PREFIX}"/lib/

  install -d "${pkgdir}${MINGW_PREFIX}"/include
  cp -r include/* "${pkgdir}${MINGW_PREFIX}"/include/


  }
  

