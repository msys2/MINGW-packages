From 387cb468e98b7ba5f46ab0d113838f46a4b5f26c Mon Sep 17 00:00:00 2001
From: Yonggang Luo <luoyonggang@gmail.com>
Date: Sun, 12 Apr 2015 09:52:23 +0800
Subject: [PATCH] WINDOWS_NATIVE always use 'UTF-8' charset.

---
 gettext-runtime/gnulib-lib/localcharset.c | 2 +-
 gettext-runtime/intl/localcharset.c       | 2 +-
 gettext-tools/gnulib-lib/localcharset.c   | 2 +-
 gettext-tools/libgettextpo/localcharset.c | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/gettext-runtime/gnulib-lib/localcharset.c b/gettext-runtime/gnulib-lib/localcharset.c
index ccfa993..d669246 100644
--- a/gettext-runtime/gnulib-lib/localcharset.c
+++ b/gettext-runtime/gnulib-lib/localcharset.c
@@ -490,7 +490,7 @@ locale_charset (void)
         encoding is the best bet.  */
       sprintf (buf, "CP%u", GetACP ());
     }
-  codeset = buf;
+  codeset = "UTF-8";
 
 #elif defined OS2
 
diff --git a/gettext-runtime/intl/localcharset.c b/gettext-runtime/intl/localcharset.c
index 71be7c1..0b49abb 100644
--- a/gettext-runtime/intl/localcharset.c
+++ b/gettext-runtime/intl/localcharset.c
@@ -490,7 +490,7 @@ locale_charset (void)
         encoding is the best bet.  */
       sprintf (buf, "CP%u", GetACP ());
     }
-  codeset = buf;
+  codeset = "UTF-8";
 
 #elif defined OS2
 
diff --git a/gettext-tools/gnulib-lib/localcharset.c b/gettext-tools/gnulib-lib/localcharset.c
index ccfa993..d669246 100644
--- a/gettext-tools/gnulib-lib/localcharset.c
+++ b/gettext-tools/gnulib-lib/localcharset.c
@@ -490,7 +490,7 @@ locale_charset (void)
         encoding is the best bet.  */
       sprintf (buf, "CP%u", GetACP ());
     }
-  codeset = buf;
+  codeset = "UTF-8";
 
 #elif defined OS2
 
diff --git a/gettext-tools/libgettextpo/localcharset.c b/gettext-tools/libgettextpo/localcharset.c
index ccfa993..d669246 100644
--- a/gettext-tools/libgettextpo/localcharset.c
+++ b/gettext-tools/libgettextpo/localcharset.c
@@ -490,7 +490,7 @@ locale_charset (void)
         encoding is the best bet.  */
       sprintf (buf, "CP%u", GetACP ());
     }
-  codeset = buf;
+  codeset = "UTF-8";
 
 #elif defined OS2
 
-- 
2.3.5.windows.8

