From b7cc9f262a6fc6865c43e77136d715de7d13ea6a Mon Sep 17 00:00:00 2001
From: Patrick von Reth <vonreth@kde.org>
Date: Mon, 21 Sep 2015 13:13:01 +0200
Subject: [PATCH] Define _POSIX_C_SOURCE in ming/include/time.h if we build
 with KDEWIN_NO_LOCALTIME_R or KDEWIN_NO_GMTIME_R.

---
 include/mingw/time.h | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/include/mingw/time.h b/include/mingw/time.h
index c9926aa..c9d1f66 100644
--- a/include/mingw/time.h
+++ b/include/mingw/time.h
@@ -22,6 +22,9 @@
 #include "kdewin_config.h"
 
 #include <sys/types.h>
+#if !defined(_POSIX_C_SOURCE) && defined(KDEWIN_NO_LOCALTIME_R) || defined(KDEWIN_NO_GMTIME_R)
+#define _POSIX_C_SOURCE 200809L
+#endif
 #include <../include/time.h>
 
 #ifdef __cplusplus
