From 5014b98f81f89829b478f05fc42a663f4f09e402 Mon Sep 17 00:00:00 2001
From: Cyril Arnould <cyril.arnould@outlook.com>
Date: Tue, 13 Jun 2023 23:47:42 +0200
Subject: [PATCH 08/17] Fix PATH variable parsing

Windows uses a different syntax
---
 find/parser.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/find/parser.c b/find/parser.c
index f865783f..5d59a885 100644
--- a/find/parser.c
+++ b/find/parser.c
@@ -2836,7 +2836,11 @@ static void
 check_path_safety (const char *action)
 {
   const char *path = getenv ("PATH");
-  const char *path_separators = ":";
+#if defined(__MINGW32__) || defined(_MSC_VER)
+  const char *path_separators = ";";
+#else
+  const char *path_separators = ":";  
+#endif
   size_t pos, len;
 
   if (NULL == path)
@@ -2864,7 +2868,11 @@ check_path_safety (const char *action)
 		 "or leading or trailing colons)"),
 	       action);
 	}
+#if defined(__MINGW32__) || defined(_MSC_VER)     
+      else if (path[pos+1] != ':')
+#else
       else if (path[pos] != '/')
+#endif
 	{
 	  char *relpath = strndup (&path[pos], len);
 	  die (EXIT_FAILURE, 0,
-- 
2.41.0

