From 079dec43eed227b3b87b0aec2a4cfe4d782499c7 Mon Sep 17 00:00:00 2001
From: taozuhong <taozuhong@hotmail.com>
Date: Tue, 7 Jan 2025 15:00:57 +0800
Subject: [PATCH 2/2] Fixed build issue on MSYS2(2)

---
 cmake/ssl.cmake        | 2 +-
 include/CMakeLists.txt | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/cmake/ssl.cmake b/cmake/ssl.cmake
index 932659d030f..28ab950c693 100644
--- a/cmake/ssl.cmake
+++ b/cmake/ssl.cmake
@@ -433,7 +433,7 @@ FUNCTION(FIND_CUSTOM_OPENSSL)
     HINTS ${OPENSSL_ROOT_DIR}/include
     )
 
-  IF (WIN32)
+  IF (WIN32 AND NOT MINGW)
     FIND_FILE(OPENSSL_APPLINK_C
       NAMES openssl/applink.c
       NO_DEFAULT_PATH
diff --git a/include/CMakeLists.txt b/include/CMakeLists.txt
index 642d7403d69..78c235ebfa7 100644
--- a/include/CMakeLists.txt
+++ b/include/CMakeLists.txt
@@ -58,7 +58,7 @@ INSTALL(FILES ${HEADERS_MYSQL_DIR}
   )
 
 # openssl/applink.c must be built into applications linking with libmysql.dll
-IF (WIN32 AND OPENSSL_APPLINK_C)
+IF (WIN32 AND OPENSSL_APPLINK_C AND NOT MINGW)
   INSTALL(FILES ${OPENSSL_APPLINK_C}
     DESTINATION ${INSTALL_INCLUDEDIR}/openssl
     COMPONENT Development
-- 
2.47.1

