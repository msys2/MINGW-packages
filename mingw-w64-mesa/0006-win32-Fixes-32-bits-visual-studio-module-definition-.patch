From 50b3a7c326268678fbd8185ac6162b2bb37ad7c9 Mon Sep 17 00:00:00 2001
From: Yonggang Luo <luoyonggang@gmail.com>
Date: Fri, 3 Dec 2021 20:51:58 +0800
Subject: [PATCH] win32: Fixes 32 bits visual studio module definition files by
 add script gen_vs_module_defs.py

Getting opengl32*.def consistence with Windows SDK.
Getting osmesa.mingw.def's gl* functions consistence with Windows SDK.
stw_* functions are cdecl, not stdcall, so there is no need mangling the symbol.
Fixes egl.def for x86
Fixes vulkan_lvp.def for x86
Fixes #5552

Signed-off-by: Yonggang Luo <luoyonggang@gmail.com>
---
 bin/gen_vs_module_defs.py                     |  86 ++
 src/egl/main/egl.def                          |  95 +--
 src/egl/main/egl.def.in                       |  49 ++
 src/egl/main/egl.mingw.def                    |  50 ++
 src/egl/meson.build                           |   8 +-
 src/gallium/targets/lavapipe/vulkan_lvp.def   |   7 +-
 .../targets/lavapipe/vulkan_lvp.def.in        |   4 +
 .../targets/lavapipe/vulkan_lvp.mingw.def     |   7 +-
 src/gallium/targets/libgl-gdi/meson.build     |   3 -
 src/gallium/targets/libgl-gdi/opengl32.def    | 738 ++++++++---------
 src/gallium/targets/libgl-gdi/opengl32.def.in | 389 +++++++++
 .../targets/libgl-gdi/opengl32.mingw.def      | 745 +++++++++---------
 src/gallium/targets/osmesa/osmesa.def         |   8 +-
 src/gallium/targets/osmesa/osmesa.def.in      | 353 +++++++++
 src/gallium/targets/osmesa/osmesa.mingw.def   | 703 +++++++++--------
 src/gallium/targets/wgl/gallium_wgl.def       |   2 +
 src/gallium/targets/wgl/gallium_wgl.def.in    |  39 +
 src/gallium/targets/wgl/gallium_wgl.mingw.def |  62 +-
 src/gallium/targets/wgl/meson.build           |   3 -
 19 files changed, 2190 insertions(+), 1161 deletions(-)
 create mode 100644 bin/gen_vs_module_defs.py
 create mode 100644 src/egl/main/egl.def.in
 create mode 100644 src/egl/main/egl.mingw.def
 create mode 100644 src/gallium/targets/lavapipe/vulkan_lvp.def.in
 create mode 100644 src/gallium/targets/libgl-gdi/opengl32.def.in
 create mode 100644 src/gallium/targets/osmesa/osmesa.def.in
 create mode 100644 src/gallium/targets/wgl/gallium_wgl.def.in

diff --git a/bin/gen_vs_module_defs.py b/bin/gen_vs_module_defs.py
new file mode 100644
index 00000000000..a32ae363a3d
--- /dev/null
+++ b/bin/gen_vs_module_defs.py
@@ -0,0 +1,86 @@
+#!/usr/bin/env python3
+# Copyright Â© 2021-2021 Yonggang Luo
+
+# Permission is hereby granted, free of charge, to any person obtaining a copy
+# of this software and associated documentation files (the "Software"), to deal
+# in the Software without restriction, including without limitation the rights
+# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+# copies of the Software, and to permit persons to whom the Software is
+# furnished to do so, subject to the following conditions:
+
+# The above copyright notice and this permission notice shall be included in
+# all copies or substantial portions of the Software.
+
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
+# SOFTWARE.
+
+gen_help = """Generates visual studio module definition file."""
+
+import argparse
+
+def gen_vs_module_def(in_file: str, out_file: str, compiler_id: str, cpu_family: str):
+    out_file_lines = ['EXPORTS']
+    with open(in_file, 'r', encoding='utf-8') as f:
+        lines = f.readlines()
+        for line in lines:
+            line = line.strip()
+            tokens = line.split(';')
+            if len(tokens) == 0:
+                continue
+            def_infos = [x for x in tokens[0].split(' ') if len(x) > 0]
+            if len(def_infos) == 0:
+                if len(line) == 0:
+                    out_file_lines.append('')
+                else:
+                    out_file_lines.append('\t' + line)
+                continue
+            name_infos = def_infos[0].split('@')
+            if len(name_infos) == 0:
+                out_file_lines.append('\t;' + line)
+                continue
+            order_info = '' if len(def_infos) <= 1 else def_infos[1]
+            if def_infos[0] != name_infos[0] and \
+                (compiler_id == 'gcc') and cpu_family != 'x86_64' and cpu_family != 'aarch64':
+                if len(order_info) > 0:
+                    out_file_lines.append('\t' + def_infos[0] + ' ' + order_info + ' == ' + name_infos[0])
+                else:
+                    out_file_lines.append('\t' + def_infos[0] + ' == ' + name_infos[0])
+            else:
+                if len(order_info) > 0:
+                    out_file_lines.append('\t' + name_infos[0] + ' ' + order_info)
+                else:
+                    out_file_lines.append('\t' + name_infos[0])
+    with open(out_file, 'wb') as f:
+        out_file_content = '\n'.join(out_file_lines) + '\n'
+        f.write(out_file_content.encode('utf-8'))
+'''
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/libgl-gdi/opengl32.def.in --out_file src/gallium/targets/libgl-gdi/opengl32.def --compiler_id gcc --cpu_family x86_64
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/libgl-gdi/opengl32.def.in --out_file src/gallium/targets/libgl-gdi/opengl32.mingw.def --compiler_id gcc --cpu_family x86
+
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/osmesa/osmesa.def.in --out_file src/gallium/targets/osmesa/osmesa.def --compiler_id gcc --cpu_family x86_64
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/osmesa/osmesa.def.in --out_file src/gallium/targets/osmesa/osmesa.mingw.def --compiler_id gcc --cpu_family x86
+
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/wgl/gallium_wgl.def.in --out_file src/gallium/targets/wgl/gallium_wgl.def --compiler_id gcc --cpu_family x86_64
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/wgl/gallium_wgl.def.in --out_file src/gallium/targets/wgl/gallium_wgl.mingw.def --compiler_id gcc --cpu_family x86
+
+python ./bin/gen_vs_module_defs.py --in_file src/egl/main/egl.def.in --out_file src/egl/main/egl.def --compiler_id gcc --cpu_family x86_64
+python ./bin/gen_vs_module_defs.py --in_file src/egl/main/egl.def.in --out_file src/egl/main/egl.mingw.def --compiler_id gcc --cpu_family x86
+
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/lavapipe/vulkan_lvp.def.in --out_file src/gallium/targets/lavapipe/vulkan_lvp.def --compiler_id gcc --cpu_family x86_64
+python ./bin/gen_vs_module_defs.py --in_file src/gallium/targets/lavapipe/vulkan_lvp.def.in --out_file src/gallium/targets/lavapipe/vulkan_lvp.mingw.def --compiler_id gcc --cpu_family x86
+
+'''
+if __name__ == "__main__":
+    parser = argparse.ArgumentParser(description=gen_help)
+    parser.add_argument('--in_file', help='input template moudle definition file')
+    parser.add_argument('--out_file', help='output moudle definition file')
+    parser.add_argument('--compiler_id', help='compiler id')
+    parser.add_argument('--cpu_family', help='cpu family')
+    args = parser.parse_args()
+    print(args)
+    gen_vs_module_def(args.in_file, args.out_file, args.compiler_id, args.cpu_family)
diff --git a/src/egl/main/egl.def b/src/egl/main/egl.def
index 54ae76b3309..ed45f5ebc3b 100644
--- a/src/egl/main/egl.def
+++ b/src/egl/main/egl.def
@@ -1,47 +1,50 @@
 EXPORTS
-   eglBindAPI
-   eglBindTexImage
-   eglChooseConfig
-   eglClientWaitSync
-   eglCopyBuffers
-   eglCreateContext
-   eglCreateImage
-   eglCreatePbufferFromClientBuffer
-   eglCreatePbufferSurface
-   eglCreatePixmapSurface
-   eglCreatePlatformPixmapSurface
-   eglCreatePlatformWindowSurface
-   eglCreateSync
-   eglCreateWindowSurface
-   eglDestroyContext
-   eglDestroyImage
-   eglDestroySurface
-   eglDestroySync
-   eglGetConfigAttrib
-   eglGetConfigs
-   eglGetCurrentContext
-   eglGetCurrentDisplay
-   eglGetCurrentSurface
-   eglGetDisplay
-   eglGetError
-   eglGetPlatformDisplay
-   eglGetProcAddress
-   eglGetSyncAttrib
-   eglInitialize
-   eglMakeCurrent
-   eglQueryAPI
-   eglQueryContext
-   eglQueryString
-   eglQuerySurface
-   eglReleaseTexImage
-   eglReleaseThread
-   eglSurfaceAttrib
-   eglSwapBuffers
-   eglSwapInterval
-   eglTerminate
-   eglWaitClient
-   eglWaitGL
-   eglWaitNative
-   eglWaitSync
-   MesaGLInteropEGLQueryDeviceInfo
-   MesaGLInteropEGLExportObject
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	eglBindAPI
+	eglBindTexImage
+	eglChooseConfig
+	eglClientWaitSync
+	eglCopyBuffers
+	eglCreateContext
+	eglCreateImage
+	eglCreatePbufferFromClientBuffer
+	eglCreatePbufferSurface
+	eglCreatePixmapSurface
+	eglCreatePlatformPixmapSurface
+	eglCreatePlatformWindowSurface
+	eglCreateSync
+	eglCreateWindowSurface
+	eglDestroyContext
+	eglDestroyImage
+	eglDestroySurface
+	eglDestroySync
+	eglGetConfigAttrib
+	eglGetConfigs
+	eglGetCurrentContext
+	eglGetCurrentDisplay
+	eglGetCurrentSurface
+	eglGetDisplay
+	eglGetError
+	eglGetPlatformDisplay
+	eglGetProcAddress
+	eglGetSyncAttrib
+	eglInitialize
+	eglMakeCurrent
+	eglQueryAPI
+	eglQueryContext
+	eglQueryString
+	eglQuerySurface
+	eglReleaseTexImage
+	eglReleaseThread
+	eglSurfaceAttrib
+	eglSwapBuffers
+	eglSwapInterval
+	eglTerminate
+	eglWaitClient
+	eglWaitGL
+	eglWaitNative
+	eglWaitSync
+
+	; __cdecl calling convention have no @number suffix
+	MesaGLInteropEGLQueryDeviceInfo
+	MesaGLInteropEGLExportObject
diff --git a/src/egl/main/egl.def.in b/src/egl/main/egl.def.in
new file mode 100644
index 00000000000..b2439d9a2ca
--- /dev/null
+++ b/src/egl/main/egl.def.in
@@ -0,0 +1,49 @@
+; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+eglBindAPI@4
+eglBindTexImage@12
+eglChooseConfig@20
+eglClientWaitSync@20
+eglCopyBuffers@12
+eglCreateContext@16
+eglCreateImage@20
+eglCreatePbufferFromClientBuffer@20
+eglCreatePbufferSurface@12
+eglCreatePixmapSurface@16
+eglCreatePlatformPixmapSurface@16
+eglCreatePlatformWindowSurface@16
+eglCreateSync@12
+eglCreateWindowSurface@16
+eglDestroyContext@8
+eglDestroyImage@8
+eglDestroySurface@8
+eglDestroySync@8
+eglGetConfigAttrib@16
+eglGetConfigs@16
+eglGetCurrentContext@0
+eglGetCurrentDisplay@0
+eglGetCurrentSurface@4
+eglGetDisplay@4
+eglGetError@0
+eglGetPlatformDisplay@12
+eglGetProcAddress@4
+eglGetSyncAttrib@16
+eglInitialize@12
+eglMakeCurrent@16
+eglQueryAPI@0
+eglQueryContext@16
+eglQueryString@8
+eglQuerySurface@16
+eglReleaseTexImage@12
+eglReleaseThread@0
+eglSurfaceAttrib@16
+eglSwapBuffers@8
+eglSwapInterval@8
+eglTerminate@4
+eglWaitClient@0
+eglWaitGL@0
+eglWaitNative@4
+eglWaitSync@12
+
+; __cdecl calling convention have no @number suffix
+MesaGLInteropEGLQueryDeviceInfo
+MesaGLInteropEGLExportObject
diff --git a/src/egl/main/egl.mingw.def b/src/egl/main/egl.mingw.def
new file mode 100644
index 00000000000..414fd712e17
--- /dev/null
+++ b/src/egl/main/egl.mingw.def
@@ -0,0 +1,50 @@
+EXPORTS
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	eglBindAPI@4 == eglBindAPI
+	eglBindTexImage@12 == eglBindTexImage
+	eglChooseConfig@20 == eglChooseConfig
+	eglClientWaitSync@20 == eglClientWaitSync
+	eglCopyBuffers@12 == eglCopyBuffers
+	eglCreateContext@16 == eglCreateContext
+	eglCreateImage@20 == eglCreateImage
+	eglCreatePbufferFromClientBuffer@20 == eglCreatePbufferFromClientBuffer
+	eglCreatePbufferSurface@12 == eglCreatePbufferSurface
+	eglCreatePixmapSurface@16 == eglCreatePixmapSurface
+	eglCreatePlatformPixmapSurface@16 == eglCreatePlatformPixmapSurface
+	eglCreatePlatformWindowSurface@16 == eglCreatePlatformWindowSurface
+	eglCreateSync@12 == eglCreateSync
+	eglCreateWindowSurface@16 == eglCreateWindowSurface
+	eglDestroyContext@8 == eglDestroyContext
+	eglDestroyImage@8 == eglDestroyImage
+	eglDestroySurface@8 == eglDestroySurface
+	eglDestroySync@8 == eglDestroySync
+	eglGetConfigAttrib@16 == eglGetConfigAttrib
+	eglGetConfigs@16 == eglGetConfigs
+	eglGetCurrentContext@0 == eglGetCurrentContext
+	eglGetCurrentDisplay@0 == eglGetCurrentDisplay
+	eglGetCurrentSurface@4 == eglGetCurrentSurface
+	eglGetDisplay@4 == eglGetDisplay
+	eglGetError@0 == eglGetError
+	eglGetPlatformDisplay@12 == eglGetPlatformDisplay
+	eglGetProcAddress@4 == eglGetProcAddress
+	eglGetSyncAttrib@16 == eglGetSyncAttrib
+	eglInitialize@12 == eglInitialize
+	eglMakeCurrent@16 == eglMakeCurrent
+	eglQueryAPI@0 == eglQueryAPI
+	eglQueryContext@16 == eglQueryContext
+	eglQueryString@8 == eglQueryString
+	eglQuerySurface@16 == eglQuerySurface
+	eglReleaseTexImage@12 == eglReleaseTexImage
+	eglReleaseThread@0 == eglReleaseThread
+	eglSurfaceAttrib@16 == eglSurfaceAttrib
+	eglSwapBuffers@8 == eglSwapBuffers
+	eglSwapInterval@8 == eglSwapInterval
+	eglTerminate@4 == eglTerminate
+	eglWaitClient@0 == eglWaitClient
+	eglWaitGL@0 == eglWaitGL
+	eglWaitNative@4 == eglWaitNative
+	eglWaitSync@12 == eglWaitSync
+
+	; __cdecl calling convention have no @number suffix
+	MesaGLInteropEGLQueryDeviceInfo
+	MesaGLInteropEGLExportObject
diff --git a/src/egl/meson.build b/src/egl/meson.build
index 65faf607705..af47152246a 100644
--- a/src/egl/meson.build
+++ b/src/egl/meson.build
@@ -175,6 +175,12 @@ else
   )
 endif
 
+if cc.get_id() == 'gcc' and host_machine.cpu_family() != 'x86_64'
+  egl_def = 'main/egl.mingw.def'
+else
+  egl_def = 'main/egl.def'
+endif
+
 libegl = shared_library(
   egl_lib_name,
   files_egl,
@@ -192,7 +198,7 @@ libegl = shared_library(
   version : egl_lib_version,
   soversion : egl_lib_soversion,
   name_prefix : 'lib', # even on windows
-  vs_module_defs : 'main/egl.def'
+  vs_module_defs : egl_def
 )
 
 if not with_glvnd
diff --git a/src/gallium/targets/lavapipe/vulkan_lvp.def b/src/gallium/targets/lavapipe/vulkan_lvp.def
index 64a9caae593..a1b05b1280f 100644
--- a/src/gallium/targets/lavapipe/vulkan_lvp.def
+++ b/src/gallium/targets/lavapipe/vulkan_lvp.def
@@ -1,4 +1,5 @@
 EXPORTS
-vk_icdNegotiateLoaderICDInterfaceVersion
-vk_icdGetInstanceProcAddr
-vk_icdGetPhysicalDeviceProcAddr
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	vk_icdNegotiateLoaderICDInterfaceVersion
+	vk_icdGetInstanceProcAddr
+	vk_icdGetPhysicalDeviceProcAddr
diff --git a/src/gallium/targets/lavapipe/vulkan_lvp.def.in b/src/gallium/targets/lavapipe/vulkan_lvp.def.in
new file mode 100644
index 00000000000..678e4d99278
--- /dev/null
+++ b/src/gallium/targets/lavapipe/vulkan_lvp.def.in
@@ -0,0 +1,4 @@
+; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+vk_icdNegotiateLoaderICDInterfaceVersion@4
+vk_icdGetInstanceProcAddr@8
+vk_icdGetPhysicalDeviceProcAddr@8
diff --git a/src/gallium/targets/lavapipe/vulkan_lvp.mingw.def b/src/gallium/targets/lavapipe/vulkan_lvp.mingw.def
index c9638323ab0..1e825fa4db9 100644
--- a/src/gallium/targets/lavapipe/vulkan_lvp.mingw.def
+++ b/src/gallium/targets/lavapipe/vulkan_lvp.mingw.def
@@ -1,4 +1,5 @@
 EXPORTS
-vk_icdNegotiateLoaderICDInterfaceVersion@4
-vk_icdGetInstanceProcAddr = vk_icdGetInstanceProcAddr@8
-vk_icdGetPhysicalDeviceProcAddr = vk_icdGetPhysicalDeviceProcAddr@8
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	vk_icdNegotiateLoaderICDInterfaceVersion@4 == vk_icdNegotiateLoaderICDInterfaceVersion
+	vk_icdGetInstanceProcAddr@8 == vk_icdGetInstanceProcAddr
+	vk_icdGetPhysicalDeviceProcAddr@8 == vk_icdGetPhysicalDeviceProcAddr
diff --git a/src/gallium/targets/libgl-gdi/meson.build b/src/gallium/targets/libgl-gdi/meson.build
index da7430ca241..afe08914cfc 100644
--- a/src/gallium/targets/libgl-gdi/meson.build
+++ b/src/gallium/targets/libgl-gdi/meson.build
@@ -20,9 +20,6 @@
 
 
 opengl32_link_args = []
-if cc.get_id() == 'gcc' and host_machine.cpu_family() != 'x86_64'
-  opengl32_link_args += ['-Wl,--enable-stdcall-fixup']
-endif
 
 if cc.get_id() == 'gcc' and host_machine.cpu_family() != 'x86_64'
   ogl_def = 'opengl32.mingw.def'
diff --git a/src/gallium/targets/libgl-gdi/opengl32.def b/src/gallium/targets/libgl-gdi/opengl32.def
index d89f0bdb52a..4f412206bf7 100644
--- a/src/gallium/targets/libgl-gdi/opengl32.def
+++ b/src/gallium/targets/libgl-gdi/opengl32.def
@@ -1,372 +1,374 @@
 EXPORTS
-;	GlmfBeginGlsBlock                @1
-;	GlmfCloseMetaFile                @2
-;	GlmfEndGlsBlock                  @3
-;	GlmfEndPlayback                  @4
-;	GlmfInitPlayback                 @5
-;	GlmfPlayGlsRecord                @6
-	glAccum                          @7
-	glAlphaFunc                      @8
-	glAreTexturesResident            @9
-	glArrayElement                   @10
-	glBegin                          @11
-	glBindTexture                    @12
-	glBitmap                         @13
-	glBlendFunc                      @14
-	glCallList                       @15
-	glCallLists                      @16
-	glClear                          @17
-	glClearAccum                     @18
-	glClearColor                     @19
-	glClearDepth                     @20
-	glClearIndex                     @21
-	glClearStencil                   @22
-	glClipPlane                      @23
-	glColor3b                        @24
-	glColor3bv                       @25
-	glColor3d                        @26
-	glColor3dv                       @27
-	glColor3f                        @28
-	glColor3fv                       @29
-	glColor3i                        @30
-	glColor3iv                       @31
-	glColor3s                        @32
-	glColor3sv                       @33
-	glColor3ub                       @34
-	glColor3ubv                      @35
-	glColor3ui                       @36
-	glColor3uiv                      @37
-	glColor3us                       @38
-	glColor3usv                      @39
-	glColor4b                        @40
-	glColor4bv                       @41
-	glColor4d                        @42
-	glColor4dv                       @43
-	glColor4f                        @44
-	glColor4fv                       @45
-	glColor4i                        @46
-	glColor4iv                       @47
-	glColor4s                        @48
-	glColor4sv                       @49
-	glColor4ub                       @50
-	glColor4ubv                      @51
-	glColor4ui                       @52
-	glColor4uiv                      @53
-	glColor4us                       @54
-	glColor4usv                      @55
-	glColorMask                      @56
-	glColorMaterial                  @57
-	glColorPointer                   @58
-	glCopyPixels                     @59
-	glCopyTexImage1D                 @60
-	glCopyTexImage2D                 @61
-	glCopyTexSubImage1D              @62
-	glCopyTexSubImage2D              @63
-	glCullFace                       @64
-;	glDebugEntry                     @65
-	glDeleteLists                    @66
-	glDeleteTextures                 @67
-	glDepthFunc                      @68
-	glDepthMask                      @69
-	glDepthRange                     @70
-	glDisable                        @71
-	glDisableClientState             @72
-	glDrawArrays                     @73
-	glDrawBuffer                     @74
-	glDrawElements                   @75
-	glDrawPixels                     @76
-	glEdgeFlag                       @77
-	glEdgeFlagPointer                @78
-	glEdgeFlagv                      @79
-	glEnable                         @80
-	glEnableClientState              @81
-	glEnd                            @82
-	glEndList                        @83
-	glEvalCoord1d                    @84
-	glEvalCoord1dv                   @85
-	glEvalCoord1f                    @86
-	glEvalCoord1fv                   @87
-	glEvalCoord2d                    @88
-	glEvalCoord2dv                   @89
-	glEvalCoord2f                    @90
-	glEvalCoord2fv                   @91
-	glEvalMesh1                      @92
-	glEvalMesh2                      @93
-	glEvalPoint1                     @94
-	glEvalPoint2                     @95
-	glFeedbackBuffer                 @96
-	glFinish                         @97
-	glFlush                          @98
-	glFogf                           @99
-	glFogfv                          @100
-	glFogi                           @101
-	glFogiv                          @102
-	glFrontFace                      @103
-	glFrustum                        @104
-	glGenLists                       @105
-	glGenTextures                    @106
-	glGetBooleanv                    @107
-	glGetClipPlane                   @108
-	glGetDoublev                     @109
-	glGetError                       @110
-	glGetFloatv                      @111
-	glGetIntegerv                    @112
-	glGetLightfv                     @113
-	glGetLightiv                     @114
-	glGetMapdv                       @115
-	glGetMapfv                       @116
-	glGetMapiv                       @117
-	glGetMaterialfv                  @118
-	glGetMaterialiv                  @119
-	glGetPixelMapfv                  @120
-	glGetPixelMapuiv                 @121
-	glGetPixelMapusv                 @122
-	glGetPointerv                    @123
-	glGetPolygonStipple              @124
-	glGetString                      @125
-	glGetTexEnvfv                    @126
-	glGetTexEnviv                    @127
-	glGetTexGendv                    @128
-	glGetTexGenfv                    @129
-	glGetTexGeniv                    @130
-	glGetTexImage                    @131
-	glGetTexLevelParameterfv         @132
-	glGetTexLevelParameteriv         @133
-	glGetTexParameterfv              @134
-	glGetTexParameteriv              @135
-	glHint                           @136
-	glIndexMask                      @137
-	glIndexPointer                   @138
-	glIndexd                         @139
-	glIndexdv                        @140
-	glIndexf                         @141
-	glIndexfv                        @142
-	glIndexi                         @143
-	glIndexiv                        @144
-	glIndexs                         @145
-	glIndexsv                        @146
-	glIndexub                        @147
-	glIndexubv                       @148
-	glInitNames                      @149
-	glInterleavedArrays              @150
-	glIsEnabled                      @151
-	glIsList                         @152
-	glIsTexture                      @153
-	glLightModelf                    @154
-	glLightModelfv                   @155
-	glLightModeli                    @156
-	glLightModeliv                   @157
-	glLightf                         @158
-	glLightfv                        @159
-	glLighti                         @160
-	glLightiv                        @161
-	glLineStipple                    @162
-	glLineWidth                      @163
-	glListBase                       @164
-	glLoadIdentity                   @165
-	glLoadMatrixd                    @166
-	glLoadMatrixf                    @167
-	glLoadName                       @168
-	glLogicOp                        @169
-	glMap1d                          @170
-	glMap1f                          @171
-	glMap2d                          @172
-	glMap2f                          @173
-	glMapGrid1d                      @174
-	glMapGrid1f                      @175
-	glMapGrid2d                      @176
-	glMapGrid2f                      @177
-	glMaterialf                      @178
-	glMaterialfv                     @179
-	glMateriali                      @180
-	glMaterialiv                     @181
-	glMatrixMode                     @182
-	glMultMatrixd                    @183
-	glMultMatrixf                    @184
-	glNewList                        @185
-	glNormal3b                       @186
-	glNormal3bv                      @187
-	glNormal3d                       @188
-	glNormal3dv                      @189
-	glNormal3f                       @190
-	glNormal3fv                      @191
-	glNormal3i                       @192
-	glNormal3iv                      @193
-	glNormal3s                       @194
-	glNormal3sv                      @195
-	glNormalPointer                  @196
-	glOrtho                          @197
-	glPassThrough                    @198
-	glPixelMapfv                     @199
-	glPixelMapuiv                    @200
-	glPixelMapusv                    @201
-	glPixelStoref                    @202
-	glPixelStorei                    @203
-	glPixelTransferf                 @204
-	glPixelTransferi                 @205
-	glPixelZoom                      @206
-	glPointSize                      @207
-	glPolygonMode                    @208
-	glPolygonOffset                  @209
-	glPolygonStipple                 @210
-	glPopAttrib                      @211
-	glPopClientAttrib                @212
-	glPopMatrix                      @213
-	glPopName                        @214
-	glPrioritizeTextures             @215
-	glPushAttrib                     @216
-	glPushClientAttrib               @217
-	glPushMatrix                     @218
-	glPushName                       @219
-	glRasterPos2d                    @220
-	glRasterPos2dv                   @221
-	glRasterPos2f                    @222
-	glRasterPos2fv                   @223
-	glRasterPos2i                    @224
-	glRasterPos2iv                   @225
-	glRasterPos2s                    @226
-	glRasterPos2sv                   @227
-	glRasterPos3d                    @228
-	glRasterPos3dv                   @229
-	glRasterPos3f                    @230
-	glRasterPos3fv                   @231
-	glRasterPos3i                    @232
-	glRasterPos3iv                   @233
-	glRasterPos3s                    @234
-	glRasterPos3sv                   @235
-	glRasterPos4d                    @236
-	glRasterPos4dv                   @237
-	glRasterPos4f                    @238
-	glRasterPos4fv                   @239
-	glRasterPos4i                    @240
-	glRasterPos4iv                   @241
-	glRasterPos4s                    @242
-	glRasterPos4sv                   @243
-	glReadBuffer                     @244
-	glReadPixels                     @245
-	glRectd                          @246
-	glRectdv                         @247
-	glRectf                          @248
-	glRectfv                         @249
-	glRecti                          @250
-	glRectiv                         @251
-	glRects                          @252
-	glRectsv                         @253
-	glRenderMode                     @254
-	glRotated                        @255
-	glRotatef                        @256
-	glScaled                         @257
-	glScalef                         @258
-	glScissor                        @259
-	glSelectBuffer                   @260
-	glShadeModel                     @261
-	glStencilFunc                    @262
-	glStencilMask                    @263
-	glStencilOp                      @264
-	glTexCoord1d                     @265
-	glTexCoord1dv                    @266
-	glTexCoord1f                     @267
-	glTexCoord1fv                    @268
-	glTexCoord1i                     @269
-	glTexCoord1iv                    @270
-	glTexCoord1s                     @271
-	glTexCoord1sv                    @272
-	glTexCoord2d                     @273
-	glTexCoord2dv                    @274
-	glTexCoord2f                     @275
-	glTexCoord2fv                    @276
-	glTexCoord2i                     @277
-	glTexCoord2iv                    @278
-	glTexCoord2s                     @279
-	glTexCoord2sv                    @280
-	glTexCoord3d                     @281
-	glTexCoord3dv                    @282
-	glTexCoord3f                     @283
-	glTexCoord3fv                    @284
-	glTexCoord3i                     @285
-	glTexCoord3iv                    @286
-	glTexCoord3s                     @287
-	glTexCoord3sv                    @288
-	glTexCoord4d                     @289
-	glTexCoord4dv                    @290
-	glTexCoord4f                     @291
-	glTexCoord4fv                    @292
-	glTexCoord4i                     @293
-	glTexCoord4iv                    @294
-	glTexCoord4s                     @295
-	glTexCoord4sv                    @296
-	glTexCoordPointer                @297
-	glTexEnvf                        @298
-	glTexEnvfv                       @299
-	glTexEnvi                        @300
-	glTexEnviv                       @301
-	glTexGend                        @302
-	glTexGendv                       @303
-	glTexGenf                        @304
-	glTexGenfv                       @305
-	glTexGeni                        @306
-	glTexGeniv                       @307
-	glTexImage1D                     @308
-	glTexImage2D                     @309
-	glTexParameterf                  @310
-	glTexParameterfv                 @311
-	glTexParameteri                  @312
-	glTexParameteriv                 @313
-	glTexSubImage1D                  @314
-	glTexSubImage2D                  @315
-	glTranslated                     @316
-	glTranslatef                     @317
-	glVertex2d                       @318
-	glVertex2dv                      @319
-	glVertex2f                       @320
-	glVertex2fv                      @321
-	glVertex2i                       @322
-	glVertex2iv                      @323
-	glVertex2s                       @324
-	glVertex2sv                      @325
-	glVertex3d                       @326
-	glVertex3dv                      @327
-	glVertex3f                       @328
-	glVertex3fv                      @329
-	glVertex3i                       @330
-	glVertex3iv                      @331
-	glVertex3s                       @332
-	glVertex3sv                      @333
-	glVertex4d                       @334
-	glVertex4dv                      @335
-	glVertex4f                       @336
-	glVertex4fv                      @337
-	glVertex4i                       @338
-	glVertex4iv                      @339
-	glVertex4s                       @340
-	glVertex4sv                      @341
-	glVertexPointer                  @342
-	glViewport                       @343
-	wglChoosePixelFormat             @344
-	wglCopyContext                   @345
-	wglCreateContext                 @346
-	wglCreateLayerContext            @347
-	wglDeleteContext                 @348
-	wglDescribeLayerPlane            @349
-	wglDescribePixelFormat           @350
-	wglGetCurrentContext             @351
-	wglGetCurrentDC                  @352
-;	wglGetDefaultProcAddress         @353
-	wglGetLayerPaletteEntries        @354
-	wglGetPixelFormat                @355
-	wglGetProcAddress                @356
-	wglMakeCurrent                   @357
-	wglRealizeLayerPalette           @358
-	wglSetLayerPaletteEntries        @359
-	wglSetPixelFormat                @360
-	wglShareLists                    @361
-	wglSwapBuffers                   @362
-	wglSwapLayerBuffers              @363
-	wglSwapMultipleBuffers           @364
-	wglUseFontBitmapsA               @365
-	wglUseFontBitmapsW               @366
-	wglUseFontOutlinesA              @367
-	wglUseFontOutlinesW              @368
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	;GlmfBeginGlsBlock@4                 @1
+	;GlmfCloseMetaFile@4                 @2
+	;GlmfEndGlsBlock@4                   @3
+	;GlmfEndPlayback@4                   @4
+	;GlmfInitPlayback@12                 @5
+	;GlmfPlayGlsRecord@16                @6
+	glAccum @7
+	glAlphaFunc @8
+	glAreTexturesResident @9
+	glArrayElement @10
+	glBegin @11
+	glBindTexture @12
+	glBitmap @13
+	glBlendFunc @14
+	glCallList @15
+	glCallLists @16
+	glClear @17
+	glClearAccum @18
+	glClearColor @19
+	glClearDepth @20
+	glClearIndex @21
+	glClearStencil @22
+	glClipPlane @23
+	glColor3b @24
+	glColor3bv @25
+	glColor3d @26
+	glColor3dv @27
+	glColor3f @28
+	glColor3fv @29
+	glColor3i @30
+	glColor3iv @31
+	glColor3s @32
+	glColor3sv @33
+	glColor3ub @34
+	glColor3ubv @35
+	glColor3ui @36
+	glColor3uiv @37
+	glColor3us @38
+	glColor3usv @39
+	glColor4b @40
+	glColor4bv @41
+	glColor4d @42
+	glColor4dv @43
+	glColor4f @44
+	glColor4fv @45
+	glColor4i @46
+	glColor4iv @47
+	glColor4s @48
+	glColor4sv @49
+	glColor4ub @50
+	glColor4ubv @51
+	glColor4ui @52
+	glColor4uiv @53
+	glColor4us @54
+	glColor4usv @55
+	glColorMask @56
+	glColorMaterial @57
+	glColorPointer @58
+	glCopyPixels @59
+	glCopyTexImage1D @60
+	glCopyTexImage2D @61
+	glCopyTexSubImage1D @62
+	glCopyTexSubImage2D @63
+	glCullFace @64
+	;glDebugEntry@8                       @65
+	glDeleteLists @66
+	glDeleteTextures @67
+	glDepthFunc @68
+	glDepthMask @69
+	glDepthRange @70
+	glDisable @71
+	glDisableClientState @72
+	glDrawArrays @73
+	glDrawBuffer @74
+	glDrawElements @75
+	glDrawPixels @76
+	glEdgeFlag @77
+	glEdgeFlagPointer @78
+	glEdgeFlagv @79
+	glEnable @80
+	glEnableClientState @81
+	glEnd @82
+	glEndList @83
+	glEvalCoord1d @84
+	glEvalCoord1dv @85
+	glEvalCoord1f @86
+	glEvalCoord1fv @87
+	glEvalCoord2d @88
+	glEvalCoord2dv @89
+	glEvalCoord2f @90
+	glEvalCoord2fv @91
+	glEvalMesh1 @92
+	glEvalMesh2 @93
+	glEvalPoint1 @94
+	glEvalPoint2 @95
+	glFeedbackBuffer @96
+	glFinish @97
+	glFlush @98
+	glFogf @99
+	glFogfv @100
+	glFogi @101
+	glFogiv @102
+	glFrontFace @103
+	glFrustum @104
+	glGenLists @105
+	glGenTextures @106
+	glGetBooleanv @107
+	glGetClipPlane @108
+	glGetDoublev @109
+	glGetError @110
+	glGetFloatv @111
+	glGetIntegerv @112
+	glGetLightfv @113
+	glGetLightiv @114
+	glGetMapdv @115
+	glGetMapfv @116
+	glGetMapiv @117
+	glGetMaterialfv @118
+	glGetMaterialiv @119
+	glGetPixelMapfv @120
+	glGetPixelMapuiv @121
+	glGetPixelMapusv @122
+	glGetPointerv @123
+	glGetPolygonStipple @124
+	glGetString @125
+	glGetTexEnvfv @126
+	glGetTexEnviv @127
+	glGetTexGendv @128
+	glGetTexGenfv @129
+	glGetTexGeniv @130
+	glGetTexImage @131
+	glGetTexLevelParameterfv @132
+	glGetTexLevelParameteriv @133
+	glGetTexParameterfv @134
+	glGetTexParameteriv @135
+	glHint @136
+	glIndexMask @137
+	glIndexPointer @138
+	glIndexd @139
+	glIndexdv @140
+	glIndexf @141
+	glIndexfv @142
+	glIndexi @143
+	glIndexiv @144
+	glIndexs @145
+	glIndexsv @146
+	glIndexub @147
+	glIndexubv @148
+	glInitNames @149
+	glInterleavedArrays @150
+	glIsEnabled @151
+	glIsList @152
+	glIsTexture @153
+	glLightModelf @154
+	glLightModelfv @155
+	glLightModeli @156
+	glLightModeliv @157
+	glLightf @158
+	glLightfv @159
+	glLighti @160
+	glLightiv @161
+	glLineStipple @162
+	glLineWidth @163
+	glListBase @164
+	glLoadIdentity @165
+	glLoadMatrixd @166
+	glLoadMatrixf @167
+	glLoadName @168
+	glLogicOp @169
+	glMap1d @170
+	glMap1f @171
+	glMap2d @172
+	glMap2f @173
+	glMapGrid1d @174
+	glMapGrid1f @175
+	glMapGrid2d @176
+	glMapGrid2f @177
+	glMaterialf @178
+	glMaterialfv @179
+	glMateriali @180
+	glMaterialiv @181
+	glMatrixMode @182
+	glMultMatrixd @183
+	glMultMatrixf @184
+	glNewList @185
+	glNormal3b @186
+	glNormal3bv @187
+	glNormal3d @188
+	glNormal3dv @189
+	glNormal3f @190
+	glNormal3fv @191
+	glNormal3i @192
+	glNormal3iv @193
+	glNormal3s @194
+	glNormal3sv @195
+	glNormalPointer @196
+	glOrtho @197
+	glPassThrough @198
+	glPixelMapfv @199
+	glPixelMapuiv @200
+	glPixelMapusv @201
+	glPixelStoref @202
+	glPixelStorei @203
+	glPixelTransferf @204
+	glPixelTransferi @205
+	glPixelZoom @206
+	glPointSize @207
+	glPolygonMode @208
+	glPolygonOffset @209
+	glPolygonStipple @210
+	glPopAttrib @211
+	glPopClientAttrib @212
+	glPopMatrix @213
+	glPopName @214
+	glPrioritizeTextures @215
+	glPushAttrib @216
+	glPushClientAttrib @217
+	glPushMatrix @218
+	glPushName @219
+	glRasterPos2d @220
+	glRasterPos2dv @221
+	glRasterPos2f @222
+	glRasterPos2fv @223
+	glRasterPos2i @224
+	glRasterPos2iv @225
+	glRasterPos2s @226
+	glRasterPos2sv @227
+	glRasterPos3d @228
+	glRasterPos3dv @229
+	glRasterPos3f @230
+	glRasterPos3fv @231
+	glRasterPos3i @232
+	glRasterPos3iv @233
+	glRasterPos3s @234
+	glRasterPos3sv @235
+	glRasterPos4d @236
+	glRasterPos4dv @237
+	glRasterPos4f @238
+	glRasterPos4fv @239
+	glRasterPos4i @240
+	glRasterPos4iv @241
+	glRasterPos4s @242
+	glRasterPos4sv @243
+	glReadBuffer @244
+	glReadPixels @245
+	glRectd @246
+	glRectdv @247
+	glRectf @248
+	glRectfv @249
+	glRecti @250
+	glRectiv @251
+	glRects @252
+	glRectsv @253
+	glRenderMode @254
+	glRotated @255
+	glRotatef @256
+	glScaled @257
+	glScalef @258
+	glScissor @259
+	glSelectBuffer @260
+	glShadeModel @261
+	glStencilFunc @262
+	glStencilMask @263
+	glStencilOp @264
+	glTexCoord1d @265
+	glTexCoord1dv @266
+	glTexCoord1f @267
+	glTexCoord1fv @268
+	glTexCoord1i @269
+	glTexCoord1iv @270
+	glTexCoord1s @271
+	glTexCoord1sv @272
+	glTexCoord2d @273
+	glTexCoord2dv @274
+	glTexCoord2f @275
+	glTexCoord2fv @276
+	glTexCoord2i @277
+	glTexCoord2iv @278
+	glTexCoord2s @279
+	glTexCoord2sv @280
+	glTexCoord3d @281
+	glTexCoord3dv @282
+	glTexCoord3f @283
+	glTexCoord3fv @284
+	glTexCoord3i @285
+	glTexCoord3iv @286
+	glTexCoord3s @287
+	glTexCoord3sv @288
+	glTexCoord4d @289
+	glTexCoord4dv @290
+	glTexCoord4f @291
+	glTexCoord4fv @292
+	glTexCoord4i @293
+	glTexCoord4iv @294
+	glTexCoord4s @295
+	glTexCoord4sv @296
+	glTexCoordPointer @297
+	glTexEnvf @298
+	glTexEnvfv @299
+	glTexEnvi @300
+	glTexEnviv @301
+	glTexGend @302
+	glTexGendv @303
+	glTexGenf @304
+	glTexGenfv @305
+	glTexGeni @306
+	glTexGeniv @307
+	glTexImage1D @308
+	glTexImage2D @309
+	glTexParameterf @310
+	glTexParameterfv @311
+	glTexParameteri @312
+	glTexParameteriv @313
+	glTexSubImage1D @314
+	glTexSubImage2D @315
+	glTranslated @316
+	glTranslatef @317
+	glVertex2d @318
+	glVertex2dv @319
+	glVertex2f @320
+	glVertex2fv @321
+	glVertex2i @322
+	glVertex2iv @323
+	glVertex2s @324
+	glVertex2sv @325
+	glVertex3d @326
+	glVertex3dv @327
+	glVertex3f @328
+	glVertex3fv @329
+	glVertex3i @330
+	glVertex3iv @331
+	glVertex3s @332
+	glVertex3sv @333
+	glVertex4d @334
+	glVertex4dv @335
+	glVertex4f @336
+	glVertex4fv @337
+	glVertex4i @338
+	glVertex4iv @339
+	glVertex4s @340
+	glVertex4sv @341
+	glVertexPointer @342
+	glViewport @343
+	wglChoosePixelFormat @344
+	wglCopyContext @345
+	wglCreateContext @346
+	wglCreateLayerContext @347
+	wglDeleteContext @348
+	wglDescribeLayerPlane @349
+	wglDescribePixelFormat @350
+	wglGetCurrentContext @351
+	wglGetCurrentDC @352
+	;wglGetDefaultProcAddress@4          @353
+	wglGetLayerPaletteEntries @354
+	wglGetPixelFormat @355
+	wglGetProcAddress @356
+	wglMakeCurrent @357
+	wglRealizeLayerPalette @358
+	wglSetLayerPaletteEntries @359
+	wglSetPixelFormat @360
+	wglShareLists @361
+	wglSwapBuffers @362
+	wglSwapLayerBuffers @363
+	wglSwapMultipleBuffers @364
+	wglUseFontBitmapsA @365
+	wglUseFontBitmapsW @366
+	wglUseFontOutlinesA @367
+	wglUseFontOutlinesW @368
+
 	DrvCopyContext
 	DrvCreateContext
 	DrvCreateLayerContext
diff --git a/src/gallium/targets/libgl-gdi/opengl32.def.in b/src/gallium/targets/libgl-gdi/opengl32.def.in
new file mode 100644
index 00000000000..ceffdf09936
--- /dev/null
+++ b/src/gallium/targets/libgl-gdi/opengl32.def.in
@@ -0,0 +1,389 @@
+; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+;GlmfBeginGlsBlock@4                 @1
+;GlmfCloseMetaFile@4                 @2
+;GlmfEndGlsBlock@4                   @3
+;GlmfEndPlayback@4                   @4
+;GlmfInitPlayback@12                 @5
+;GlmfPlayGlsRecord@16                @6
+glAccum@8                            @7
+glAlphaFunc@8                        @8
+glAreTexturesResident@12             @9
+glArrayElement@4                     @10
+glBegin@4                            @11
+glBindTexture@8                      @12
+glBitmap@28                          @13
+glBlendFunc@8                        @14
+glCallList@4                         @15
+glCallLists@12                       @16
+glClear@4                            @17
+glClearAccum@16                      @18
+glClearColor@16                      @19
+glClearDepth@8                       @20
+glClearIndex@4                       @21
+glClearStencil@4                     @22
+glClipPlane@8                        @23
+glColor3b@12                         @24
+glColor3bv@4                         @25
+glColor3d@24                         @26
+glColor3dv@4                         @27
+glColor3f@12                         @28
+glColor3fv@4                         @29
+glColor3i@12                         @30
+glColor3iv@4                         @31
+glColor3s@12                         @32
+glColor3sv@4                         @33
+glColor3ub@12                        @34
+glColor3ubv@4                        @35
+glColor3ui@12                        @36
+glColor3uiv@4                        @37
+glColor3us@12                        @38
+glColor3usv@4                        @39
+glColor4b@16                         @40
+glColor4bv@4                         @41
+glColor4d@32                         @42
+glColor4dv@4                         @43
+glColor4f@16                         @44
+glColor4fv@4                         @45
+glColor4i@16                         @46
+glColor4iv@4                         @47
+glColor4s@16                         @48
+glColor4sv@4                         @49
+glColor4ub@16                        @50
+glColor4ubv@4                        @51
+glColor4ui@16                        @52
+glColor4uiv@4                        @53
+glColor4us@16                        @54
+glColor4usv@4                        @55
+glColorMask@16                       @56
+glColorMaterial@8                    @57
+glColorPointer@16                    @58
+glCopyPixels@20                      @59
+glCopyTexImage1D@28                  @60
+glCopyTexImage2D@32                  @61
+glCopyTexSubImage1D@24               @62
+glCopyTexSubImage2D@32               @63
+glCullFace@4                         @64
+;glDebugEntry@8                       @65
+glDeleteLists@8                      @66
+glDeleteTextures@8                   @67
+glDepthFunc@4                        @68
+glDepthMask@4                        @69
+glDepthRange@16                      @70
+glDisable@4                          @71
+glDisableClientState@4               @72
+glDrawArrays@12                      @73
+glDrawBuffer@4                       @74
+glDrawElements@16                    @75
+glDrawPixels@20                      @76
+glEdgeFlag@4                         @77
+glEdgeFlagPointer@8                  @78
+glEdgeFlagv@4                        @79
+glEnable@4                           @80
+glEnableClientState@4                @81
+glEnd@0                              @82
+glEndList@0                          @83
+glEvalCoord1d@8                      @84
+glEvalCoord1dv@4                     @85
+glEvalCoord1f@4                      @86
+glEvalCoord1fv@4                     @87
+glEvalCoord2d@16                     @88
+glEvalCoord2dv@4                     @89
+glEvalCoord2f@8                      @90
+glEvalCoord2fv@4                     @91
+glEvalMesh1@12                       @92
+glEvalMesh2@20                       @93
+glEvalPoint1@4                       @94
+glEvalPoint2@8                       @95
+glFeedbackBuffer@12                  @96
+glFinish@0                           @97
+glFlush@0                            @98
+glFogf@8                             @99
+glFogfv@8                            @100
+glFogi@8                             @101
+glFogiv@8                            @102
+glFrontFace@4                        @103
+glFrustum@48                         @104
+glGenLists@4                         @105
+glGenTextures@8                      @106
+glGetBooleanv@8                      @107
+glGetClipPlane@8                     @108
+glGetDoublev@8                       @109
+glGetError@0                         @110
+glGetFloatv@8                        @111
+glGetIntegerv@8                      @112
+glGetLightfv@12                      @113
+glGetLightiv@12                      @114
+glGetMapdv@12                        @115
+glGetMapfv@12                        @116
+glGetMapiv@12                        @117
+glGetMaterialfv@12                   @118
+glGetMaterialiv@12                   @119
+glGetPixelMapfv@8                    @120
+glGetPixelMapuiv@8                   @121
+glGetPixelMapusv@8                   @122
+glGetPointerv@8                      @123
+glGetPolygonStipple@4                @124
+glGetString@4                        @125
+glGetTexEnvfv@12                     @126
+glGetTexEnviv@12                     @127
+glGetTexGendv@12                     @128
+glGetTexGenfv@12                     @129
+glGetTexGeniv@12                     @130
+glGetTexImage@20                     @131
+glGetTexLevelParameterfv@16          @132
+glGetTexLevelParameteriv@16          @133
+glGetTexParameterfv@12               @134
+glGetTexParameteriv@12               @135
+glHint@8                             @136
+glIndexMask@4                        @137
+glIndexPointer@12                    @138
+glIndexd@8                           @139
+glIndexdv@4                          @140
+glIndexf@4                           @141
+glIndexfv@4                          @142
+glIndexi@4                           @143
+glIndexiv@4                          @144
+glIndexs@4                           @145
+glIndexsv@4                          @146
+glIndexub@4                          @147
+glIndexubv@4                         @148
+glInitNames@0                        @149
+glInterleavedArrays@12               @150
+glIsEnabled@4                        @151
+glIsList@4                           @152
+glIsTexture@4                        @153
+glLightModelf@8                      @154
+glLightModelfv@8                     @155
+glLightModeli@8                      @156
+glLightModeliv@8                     @157
+glLightf@12                          @158
+glLightfv@12                         @159
+glLighti@12                          @160
+glLightiv@12                         @161
+glLineStipple@8                      @162
+glLineWidth@4                        @163
+glListBase@4                         @164
+glLoadIdentity@0                     @165
+glLoadMatrixd@4                      @166
+glLoadMatrixf@4                      @167
+glLoadName@4                         @168
+glLogicOp@4                          @169
+glMap1d@32                           @170
+glMap1f@24                           @171
+glMap2d@56                           @172
+glMap2f@40                           @173
+glMapGrid1d@20                       @174
+glMapGrid1f@12                       @175
+glMapGrid2d@40                       @176
+glMapGrid2f@24                       @177
+glMaterialf@12                       @178
+glMaterialfv@12                      @179
+glMateriali@12                       @180
+glMaterialiv@12                      @181
+glMatrixMode@4                       @182
+glMultMatrixd@4                      @183
+glMultMatrixf@4                      @184
+glNewList@8                          @185
+glNormal3b@12                        @186
+glNormal3bv@4                        @187
+glNormal3d@24                        @188
+glNormal3dv@4                        @189
+glNormal3f@12                        @190
+glNormal3fv@4                        @191
+glNormal3i@12                        @192
+glNormal3iv@4                        @193
+glNormal3s@12                        @194
+glNormal3sv@4                        @195
+glNormalPointer@12                   @196
+glOrtho@48                           @197
+glPassThrough@4                      @198
+glPixelMapfv@12                      @199
+glPixelMapuiv@12                     @200
+glPixelMapusv@12                     @201
+glPixelStoref@8                      @202
+glPixelStorei@8                      @203
+glPixelTransferf@8                   @204
+glPixelTransferi@8                   @205
+glPixelZoom@8                        @206
+glPointSize@4                        @207
+glPolygonMode@8                      @208
+glPolygonOffset@8                    @209
+glPolygonStipple@4                   @210
+glPopAttrib@0                        @211
+glPopClientAttrib@0                  @212
+glPopMatrix@0                        @213
+glPopName@0                          @214
+glPrioritizeTextures@12              @215
+glPushAttrib@4                       @216
+glPushClientAttrib@4                 @217
+glPushMatrix@0                       @218
+glPushName@4                         @219
+glRasterPos2d@16                     @220
+glRasterPos2dv@4                     @221
+glRasterPos2f@8                      @222
+glRasterPos2fv@4                     @223
+glRasterPos2i@8                      @224
+glRasterPos2iv@4                     @225
+glRasterPos2s@8                      @226
+glRasterPos2sv@4                     @227
+glRasterPos3d@24                     @228
+glRasterPos3dv@4                     @229
+glRasterPos3f@12                     @230
+glRasterPos3fv@4                     @231
+glRasterPos3i@12                     @232
+glRasterPos3iv@4                     @233
+glRasterPos3s@12                     @234
+glRasterPos3sv@4                     @235
+glRasterPos4d@32                     @236
+glRasterPos4dv@4                     @237
+glRasterPos4f@16                     @238
+glRasterPos4fv@4                     @239
+glRasterPos4i@16                     @240
+glRasterPos4iv@4                     @241
+glRasterPos4s@16                     @242
+glRasterPos4sv@4                     @243
+glReadBuffer@4                       @244
+glReadPixels@28                      @245
+glRectd@32                           @246
+glRectdv@8                           @247
+glRectf@16                           @248
+glRectfv@8                           @249
+glRecti@16                           @250
+glRectiv@8                           @251
+glRects@16                           @252
+glRectsv@8                           @253
+glRenderMode@4                       @254
+glRotated@32                         @255
+glRotatef@16                         @256
+glScaled@24                          @257
+glScalef@12                          @258
+glScissor@16                         @259
+glSelectBuffer@8                     @260
+glShadeModel@4                       @261
+glStencilFunc@12                     @262
+glStencilMask@4                      @263
+glStencilOp@12                       @264
+glTexCoord1d@8                       @265
+glTexCoord1dv@4                      @266
+glTexCoord1f@4                       @267
+glTexCoord1fv@4                      @268
+glTexCoord1i@4                       @269
+glTexCoord1iv@4                      @270
+glTexCoord1s@4                       @271
+glTexCoord1sv@4                      @272
+glTexCoord2d@16                      @273
+glTexCoord2dv@4                      @274
+glTexCoord2f@8                       @275
+glTexCoord2fv@4                      @276
+glTexCoord2i@8                       @277
+glTexCoord2iv@4                      @278
+glTexCoord2s@8                       @279
+glTexCoord2sv@4                      @280
+glTexCoord3d@24                      @281
+glTexCoord3dv@4                      @282
+glTexCoord3f@12                      @283
+glTexCoord3fv@4                      @284
+glTexCoord3i@12                      @285
+glTexCoord3iv@4                      @286
+glTexCoord3s@12                      @287
+glTexCoord3sv@4                      @288
+glTexCoord4d@32                      @289
+glTexCoord4dv@4                      @290
+glTexCoord4f@16                      @291
+glTexCoord4fv@4                      @292
+glTexCoord4i@16                      @293
+glTexCoord4iv@4                      @294
+glTexCoord4s@16                      @295
+glTexCoord4sv@4                      @296
+glTexCoordPointer@16                 @297
+glTexEnvf@12                         @298
+glTexEnvfv@12                        @299
+glTexEnvi@12                         @300
+glTexEnviv@12                        @301
+glTexGend@16                         @302
+glTexGendv@12                        @303
+glTexGenf@12                         @304
+glTexGenfv@12                        @305
+glTexGeni@12                         @306
+glTexGeniv@12                        @307
+glTexImage1D@32                      @308
+glTexImage2D@36                      @309
+glTexParameterf@12                   @310
+glTexParameterfv@12                  @311
+glTexParameteri@12                   @312
+glTexParameteriv@12                  @313
+glTexSubImage1D@28                   @314
+glTexSubImage2D@36                   @315
+glTranslated@24                      @316
+glTranslatef@12                      @317
+glVertex2d@16                        @318
+glVertex2dv@4                        @319
+glVertex2f@8                         @320
+glVertex2fv@4                        @321
+glVertex2i@8                         @322
+glVertex2iv@4                        @323
+glVertex2s@8                         @324
+glVertex2sv@4                        @325
+glVertex3d@24                        @326
+glVertex3dv@4                        @327
+glVertex3f@12                        @328
+glVertex3fv@4                        @329
+glVertex3i@12                        @330
+glVertex3iv@4                        @331
+glVertex3s@12                        @332
+glVertex3sv@4                        @333
+glVertex4d@32                        @334
+glVertex4dv@4                        @335
+glVertex4f@16                        @336
+glVertex4fv@4                        @337
+glVertex4i@16                        @338
+glVertex4iv@4                        @339
+glVertex4s@16                        @340
+glVertex4sv@4                        @341
+glVertexPointer@16                   @342
+glViewport@16                        @343
+wglChoosePixelFormat@8               @344
+wglCopyContext@12                    @345
+wglCreateContext@4                   @346
+wglCreateLayerContext@8              @347
+wglDeleteContext@4                   @348
+wglDescribeLayerPlane@20             @349
+wglDescribePixelFormat@16            @350
+wglGetCurrentContext@0               @351
+wglGetCurrentDC@0                    @352
+;wglGetDefaultProcAddress@4          @353
+wglGetLayerPaletteEntries@20         @354
+wglGetPixelFormat@4                  @355
+wglGetProcAddress@4                  @356
+wglMakeCurrent@8                     @357
+wglRealizeLayerPalette@12            @358
+wglSetLayerPaletteEntries@20         @359
+wglSetPixelFormat@12                 @360
+wglShareLists@8                      @361
+wglSwapBuffers@4                     @362
+wglSwapLayerBuffers@8                @363
+wglSwapMultipleBuffers@8             @364
+wglUseFontBitmapsA@16                @365
+wglUseFontBitmapsW@16                @366
+wglUseFontOutlinesA@32               @367
+wglUseFontOutlinesW@32               @368
+
+DrvCopyContext@12
+DrvCreateContext@4
+DrvCreateLayerContext@8
+DrvDeleteContext@4
+DrvDescribeLayerPlane@20
+DrvDescribePixelFormat@16
+DrvGetLayerPaletteEntries@20
+DrvGetProcAddress@4
+DrvPresentBuffers@8
+DrvRealizeLayerPalette@12
+DrvReleaseContext@4
+DrvSetCallbackProcs@8
+DrvSetContext@12
+DrvSetLayerPaletteEntries@20
+DrvSetPixelFormat@8
+DrvShareLists@8
+DrvSwapBuffers@4
+DrvSwapLayerBuffers@8
+DrvValidateVersion@4
diff --git a/src/gallium/targets/libgl-gdi/opengl32.mingw.def b/src/gallium/targets/libgl-gdi/opengl32.mingw.def
index 485c9d44a87..70d300d2f31 100644
--- a/src/gallium/targets/libgl-gdi/opengl32.mingw.def
+++ b/src/gallium/targets/libgl-gdi/opengl32.mingw.def
@@ -1,357 +1,390 @@
 EXPORTS
-	glAccum = glAccum@8
-	glAlphaFunc = glAlphaFunc@8
-	glAreTexturesResident = glAreTexturesResident@12
-	glArrayElement = glArrayElement@4
-	glBegin = glBegin@4
-	glBindTexture = glBindTexture@8
-	glBitmap = glBitmap@28
-	glBlendFunc = glBlendFunc@8
-	glCallList = glCallList@4
-	glCallLists = glCallLists@12
-	glClear = glClear@4
-	glClearAccum = glClearAccum@16
-	glClearColor = glClearColor@16
-	glClearDepth = glClearDepth@8
-	glClearIndex = glClearIndex@4
-	glClearStencil = glClearStencil@4
-	glClipPlane = glClipPlane@8
-	glColor3b = glColor3b@12
-	glColor3bv = glColor3bv@4
-	glColor3d = glColor3d@24
-	glColor3dv = glColor3dv@4
-	glColor3f = glColor3f@12
-	glColor3fv = glColor3fv@4
-	glColor3i = glColor3i@12
-	glColor3iv = glColor3iv@4
-	glColor3s = glColor3s@12
-	glColor3sv = glColor3sv@4
-	glColor3ub = glColor3ub@12
-	glColor3ubv = glColor3ubv@4
-	glColor3ui = glColor3ui@12
-	glColor3uiv = glColor3uiv@4
-	glColor3us = glColor3us@12
-	glColor3usv = glColor3usv@4
-	glColor4b = glColor4b@16
-	glColor4bv = glColor4bv@4
-	glColor4d = glColor4d@32
-	glColor4dv = glColor4dv@4
-	glColor4f = glColor4f@16
-	glColor4fv = glColor4fv@4
-	glColor4i = glColor4i@16
-	glColor4iv = glColor4iv@4
-	glColor4s = glColor4s@16
-	glColor4sv = glColor4sv@4
-	glColor4ub = glColor4ub@16
-	glColor4ubv = glColor4ubv@4
-	glColor4ui = glColor4ui@16
-	glColor4uiv = glColor4uiv@4
-	glColor4us = glColor4us@16
-	glColor4usv = glColor4usv@4
-	glColorMask = glColorMask@16
-	glColorMaterial = glColorMaterial@8
-	glColorPointer = glColorPointer@16
-	glCopyPixels = glCopyPixels@20
-	glCopyTexImage1D = glCopyTexImage1D@28
-	glCopyTexImage2D = glCopyTexImage2D@32
-	glCopyTexSubImage1D = glCopyTexSubImage1D@24
-	glCopyTexSubImage2D = glCopyTexSubImage2D@32
-	glCullFace = glCullFace@4
-;	glDebugEntry = glDebugEntry@8
-	glDeleteLists = glDeleteLists@8
-	glDeleteTextures = glDeleteTextures@8
-	glDepthFunc = glDepthFunc@4
-	glDepthMask = glDepthMask@4
-	glDepthRange = glDepthRange@16
-	glDisable = glDisable@4
-	glDisableClientState = glDisableClientState@4
-	glDrawArrays = glDrawArrays@12
-	glDrawBuffer = glDrawBuffer@4
-	glDrawElements = glDrawElements@16
-	glDrawPixels = glDrawPixels@20
-	glEdgeFlag = glEdgeFlag@4
-	glEdgeFlagPointer = glEdgeFlagPointer@8
-	glEdgeFlagv = glEdgeFlagv@4
-	glEnable = glEnable@4
-	glEnableClientState = glEnableClientState@4
-	glEnd = glEnd@0
-	glEndList = glEndList@0
-	glEvalCoord1d = glEvalCoord1d@8
-	glEvalCoord1dv = glEvalCoord1dv@4
-	glEvalCoord1f = glEvalCoord1f@4
-	glEvalCoord1fv = glEvalCoord1fv@4
-	glEvalCoord2d = glEvalCoord2d@16
-	glEvalCoord2dv = glEvalCoord2dv@4
-	glEvalCoord2f = glEvalCoord2f@8
-	glEvalCoord2fv = glEvalCoord2fv@4
-	glEvalMesh1 = glEvalMesh1@12
-	glEvalMesh2 = glEvalMesh2@20
-	glEvalPoint1 = glEvalPoint1@4
-	glEvalPoint2 = glEvalPoint2@8
-	glFeedbackBuffer = glFeedbackBuffer@12
-	glFinish = glFinish@0
-	glFlush = glFlush@0
-	glFogf = glFogf@8
-	glFogfv = glFogfv@8
-	glFogi = glFogi@8
-	glFogiv = glFogiv@8
-	glFrontFace = glFrontFace@4
-	glFrustum = glFrustum@48
-	glGenLists = glGenLists@4
-	glGenTextures = glGenTextures@8
-	glGetBooleanv = glGetBooleanv@8
-	glGetClipPlane = glGetClipPlane@8
-	glGetDoublev = glGetDoublev@8
-	glGetError = glGetError@0
-	glGetFloatv = glGetFloatv@8
-	glGetIntegerv = glGetIntegerv@8
-	glGetLightfv = glGetLightfv@12
-	glGetLightiv = glGetLightiv@12
-	glGetMapdv = glGetMapdv@12
-	glGetMapfv = glGetMapfv@12
-	glGetMapiv = glGetMapiv@12
-	glGetMaterialfv = glGetMaterialfv@12
-	glGetMaterialiv = glGetMaterialiv@12
-	glGetPixelMapfv = glGetPixelMapfv@8
-	glGetPixelMapuiv = glGetPixelMapuiv@8
-	glGetPixelMapusv = glGetPixelMapusv@8
-	glGetPointerv = glGetPointerv@8
-	glGetPolygonStipple = glGetPolygonStipple@4
-	glGetString = glGetString@4
-	glGetTexEnvfv = glGetTexEnvfv@12
-	glGetTexEnviv = glGetTexEnviv@12
-	glGetTexGendv = glGetTexGendv@12
-	glGetTexGenfv = glGetTexGenfv@12
-	glGetTexGeniv = glGetTexGeniv@12
-	glGetTexImage = glGetTexImage@20
-	glGetTexLevelParameterfv = glGetTexLevelParameterfv@16
-	glGetTexLevelParameteriv = glGetTexLevelParameteriv@16
-	glGetTexParameterfv = glGetTexParameterfv@12
-	glGetTexParameteriv = glGetTexParameteriv@12
-	glHint = glHint@8
-	glIndexMask = glIndexMask@4
-	glIndexPointer = glIndexPointer@12
-	glIndexd = glIndexd@8
-	glIndexdv = glIndexdv@4
-	glIndexf = glIndexf@4
-	glIndexfv = glIndexfv@4
-	glIndexi = glIndexi@4
-	glIndexiv = glIndexiv@4
-	glIndexs = glIndexs@4
-	glIndexsv = glIndexsv@4
-	glIndexub = glIndexub@4
-	glIndexubv = glIndexubv@4
-	glInitNames = glInitNames@0
-	glInterleavedArrays = glInterleavedArrays@12
-	glIsEnabled = glIsEnabled@4
-	glIsList = glIsList@4
-	glIsTexture = glIsTexture@4
-	glLightModelf = glLightModelf@8
-	glLightModelfv = glLightModelfv@8
-	glLightModeli = glLightModeli@8
-	glLightModeliv = glLightModeliv@8
-	glLightf = glLightf@12
-	glLightfv = glLightfv@12
-	glLighti = glLighti@12
-	glLightiv = glLightiv@12
-	glLineStipple = glLineStipple@8
-	glLineWidth = glLineWidth@4
-	glListBase = glListBase@4
-	glLoadIdentity = glLoadIdentity@0
-	glLoadMatrixd = glLoadMatrixd@4
-	glLoadMatrixf = glLoadMatrixf@4
-	glLoadName = glLoadName@4
-	glLogicOp = glLogicOp@4
-	glMap1d = glMap1d@32
-	glMap1f = glMap1f@24
-	glMap2d = glMap2d@56
-	glMap2f = glMap2f@40
-	glMapGrid1d = glMapGrid1d@20
-	glMapGrid1f = glMapGrid1f@12
-	glMapGrid2d = glMapGrid2d@40
-	glMapGrid2f = glMapGrid2f@24
-	glMaterialf = glMaterialf@12
-	glMaterialfv = glMaterialfv@12
-	glMateriali = glMateriali@12
-	glMaterialiv = glMaterialiv@12
-	glMatrixMode = glMatrixMode@4
-	glMultMatrixd = glMultMatrixd@4
-	glMultMatrixf = glMultMatrixf@4
-	glNewList = glNewList@8
-	glNormal3b = glNormal3b@12
-	glNormal3bv = glNormal3bv@4
-	glNormal3d = glNormal3d@24
-	glNormal3dv = glNormal3dv@4
-	glNormal3f = glNormal3f@12
-	glNormal3fv = glNormal3fv@4
-	glNormal3i = glNormal3i@12
-	glNormal3iv = glNormal3iv@4
-	glNormal3s = glNormal3s@12
-	glNormal3sv = glNormal3sv@4
-	glNormalPointer = glNormalPointer@12
-	glOrtho = glOrtho@48
-	glPassThrough = glPassThrough@4
-	glPixelMapfv = glPixelMapfv@12
-	glPixelMapuiv = glPixelMapuiv@12
-	glPixelMapusv = glPixelMapusv@12
-	glPixelStoref = glPixelStoref@8
-	glPixelStorei = glPixelStorei@8
-	glPixelTransferf = glPixelTransferf@8
-	glPixelTransferi = glPixelTransferi@8
-	glPixelZoom = glPixelZoom@8
-	glPointSize = glPointSize@4
-	glPolygonMode = glPolygonMode@8
-	glPolygonOffset = glPolygonOffset@8
-	glPolygonStipple = glPolygonStipple@4
-	glPopAttrib = glPopAttrib@0
-	glPopClientAttrib = glPopClientAttrib@0
-	glPopMatrix = glPopMatrix@0
-	glPopName = glPopName@0
-	glPrioritizeTextures = glPrioritizeTextures@12
-	glPushAttrib = glPushAttrib@4
-	glPushClientAttrib = glPushClientAttrib@4
-	glPushMatrix = glPushMatrix@0
-	glPushName = glPushName@4
-	glRasterPos2d = glRasterPos2d@16
-	glRasterPos2dv = glRasterPos2dv@4
-	glRasterPos2f = glRasterPos2f@8
-	glRasterPos2fv = glRasterPos2fv@4
-	glRasterPos2i = glRasterPos2i@8
-	glRasterPos2iv = glRasterPos2iv@4
-	glRasterPos2s = glRasterPos2s@8
-	glRasterPos2sv = glRasterPos2sv@4
-	glRasterPos3d = glRasterPos3d@24
-	glRasterPos3dv = glRasterPos3dv@4
-	glRasterPos3f = glRasterPos3f@12
-	glRasterPos3fv = glRasterPos3fv@4
-	glRasterPos3i = glRasterPos3i@12
-	glRasterPos3iv = glRasterPos3iv@4
-	glRasterPos3s = glRasterPos3s@12
-	glRasterPos3sv = glRasterPos3sv@4
-	glRasterPos4d = glRasterPos4d@32
-	glRasterPos4dv = glRasterPos4dv@4
-	glRasterPos4f = glRasterPos4f@16
-	glRasterPos4fv = glRasterPos4fv@4
-	glRasterPos4i = glRasterPos4i@16
-	glRasterPos4iv = glRasterPos4iv@4
-	glRasterPos4s = glRasterPos4s@16
-	glRasterPos4sv = glRasterPos4sv@4
-	glReadBuffer = glReadBuffer@4
-	glReadPixels = glReadPixels@28
-	glRectd = glRectd@32
-	glRectdv = glRectdv@8
-	glRectf = glRectf@16
-	glRectfv = glRectfv@8
-	glRecti = glRecti@16
-	glRectiv = glRectiv@8
-	glRects = glRects@16
-	glRectsv = glRectsv@8
-	glRenderMode = glRenderMode@4
-	glRotated = glRotated@32
-	glRotatef = glRotatef@16
-	glScaled = glScaled@24
-	glScalef = glScalef@12
-	glScissor = glScissor@16
-	glSelectBuffer = glSelectBuffer@8
-	glShadeModel = glShadeModel@4
-	glStencilFunc = glStencilFunc@12
-	glStencilMask = glStencilMask@4
-	glStencilOp = glStencilOp@12
-	glTexCoord1d = glTexCoord1d@8
-	glTexCoord1dv = glTexCoord1dv@4
-	glTexCoord1f = glTexCoord1f@4
-	glTexCoord1fv = glTexCoord1fv@4
-	glTexCoord1i = glTexCoord1i@4
-	glTexCoord1iv = glTexCoord1iv@4
-	glTexCoord1s = glTexCoord1s@4
-	glTexCoord1sv = glTexCoord1sv@4
-	glTexCoord2d = glTexCoord2d@16
-	glTexCoord2dv = glTexCoord2dv@4
-	glTexCoord2f = glTexCoord2f@8
-	glTexCoord2fv = glTexCoord2fv@4
-	glTexCoord2i = glTexCoord2i@8
-	glTexCoord2iv = glTexCoord2iv@4
-	glTexCoord2s = glTexCoord2s@8
-	glTexCoord2sv = glTexCoord2sv@4
-	glTexCoord3d = glTexCoord3d@24
-	glTexCoord3dv = glTexCoord3dv@4
-	glTexCoord3f = glTexCoord3f@12
-	glTexCoord3fv = glTexCoord3fv@4
-	glTexCoord3i = glTexCoord3i@12
-	glTexCoord3iv = glTexCoord3iv@4
-	glTexCoord3s = glTexCoord3s@12
-	glTexCoord3sv = glTexCoord3sv@4
-	glTexCoord4d = glTexCoord4d@32
-	glTexCoord4dv = glTexCoord4dv@4
-	glTexCoord4f = glTexCoord4f@16
-	glTexCoord4fv = glTexCoord4fv@4
-	glTexCoord4i = glTexCoord4i@16
-	glTexCoord4iv = glTexCoord4iv@4
-	glTexCoord4s = glTexCoord4s@16
-	glTexCoord4sv = glTexCoord4sv@4
-	glTexCoordPointer = glTexCoordPointer@16
-	glTexEnvf = glTexEnvf@12
-	glTexEnvfv = glTexEnvfv@12
-	glTexEnvi = glTexEnvi@12
-	glTexEnviv = glTexEnviv@12
-	glTexGend = glTexGend@16
-	glTexGendv = glTexGendv@12
-	glTexGenf = glTexGenf@12
-	glTexGenfv = glTexGenfv@12
-	glTexGeni = glTexGeni@12
-	glTexGeniv = glTexGeniv@12
-	glTexImage1D = glTexImage1D@32
-	glTexImage2D = glTexImage2D@36
-	glTexParameterf = glTexParameterf@12
-	glTexParameterfv = glTexParameterfv@12
-	glTexParameteri = glTexParameteri@12
-	glTexParameteriv = glTexParameteriv@12
-	glTexSubImage1D = glTexSubImage1D@28
-	glTexSubImage2D = glTexSubImage2D@36
-	glTranslated = glTranslated@24
-	glTranslatef = glTranslatef@12
-	glVertex2d = glVertex2d@16
-	glVertex2dv = glVertex2dv@4
-	glVertex2f = glVertex2f@8
-	glVertex2fv = glVertex2fv@4
-	glVertex2i = glVertex2i@8
-	glVertex2iv = glVertex2iv@4
-	glVertex2s = glVertex2s@8
-	glVertex2sv = glVertex2sv@4
-	glVertex3d = glVertex3d@24
-	glVertex3dv = glVertex3dv@4
-	glVertex3f = glVertex3f@12
-	glVertex3fv = glVertex3fv@4
-	glVertex3i = glVertex3i@12
-	glVertex3iv = glVertex3iv@4
-	glVertex3s = glVertex3s@12
-	glVertex3sv = glVertex3sv@4
-	glVertex4d = glVertex4d@32
-	glVertex4dv = glVertex4dv@4
-	glVertex4f = glVertex4f@16
-	glVertex4fv = glVertex4fv@4
-	glVertex4i = glVertex4i@16
-	glVertex4iv = glVertex4iv@4
-	glVertex4s = glVertex4s@16
-	glVertex4sv = glVertex4sv@4
-	glVertexPointer = glVertexPointer@16
-	glViewport = glViewport@16
-	DrvCopyContext
-	DrvCreateContext
-	DrvCreateLayerContext
-	DrvDeleteContext
-	DrvDescribeLayerPlane
-	DrvDescribePixelFormat
-	DrvGetLayerPaletteEntries
-	DrvGetProcAddress
-	DrvPresentBuffers
-	DrvRealizeLayerPalette
-	DrvReleaseContext
-	DrvSetCallbackProcs
-	DrvSetContext
-	DrvSetLayerPaletteEntries
-	DrvSetPixelFormat
-	DrvShareLists
-	DrvSwapBuffers
-	DrvSwapLayerBuffers
-	DrvValidateVersion
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	;GlmfBeginGlsBlock@4                 @1
+	;GlmfCloseMetaFile@4                 @2
+	;GlmfEndGlsBlock@4                   @3
+	;GlmfEndPlayback@4                   @4
+	;GlmfInitPlayback@12                 @5
+	;GlmfPlayGlsRecord@16                @6
+	glAccum@8 @7 == glAccum
+	glAlphaFunc@8 @8 == glAlphaFunc
+	glAreTexturesResident@12 @9 == glAreTexturesResident
+	glArrayElement@4 @10 == glArrayElement
+	glBegin@4 @11 == glBegin
+	glBindTexture@8 @12 == glBindTexture
+	glBitmap@28 @13 == glBitmap
+	glBlendFunc@8 @14 == glBlendFunc
+	glCallList@4 @15 == glCallList
+	glCallLists@12 @16 == glCallLists
+	glClear@4 @17 == glClear
+	glClearAccum@16 @18 == glClearAccum
+	glClearColor@16 @19 == glClearColor
+	glClearDepth@8 @20 == glClearDepth
+	glClearIndex@4 @21 == glClearIndex
+	glClearStencil@4 @22 == glClearStencil
+	glClipPlane@8 @23 == glClipPlane
+	glColor3b@12 @24 == glColor3b
+	glColor3bv@4 @25 == glColor3bv
+	glColor3d@24 @26 == glColor3d
+	glColor3dv@4 @27 == glColor3dv
+	glColor3f@12 @28 == glColor3f
+	glColor3fv@4 @29 == glColor3fv
+	glColor3i@12 @30 == glColor3i
+	glColor3iv@4 @31 == glColor3iv
+	glColor3s@12 @32 == glColor3s
+	glColor3sv@4 @33 == glColor3sv
+	glColor3ub@12 @34 == glColor3ub
+	glColor3ubv@4 @35 == glColor3ubv
+	glColor3ui@12 @36 == glColor3ui
+	glColor3uiv@4 @37 == glColor3uiv
+	glColor3us@12 @38 == glColor3us
+	glColor3usv@4 @39 == glColor3usv
+	glColor4b@16 @40 == glColor4b
+	glColor4bv@4 @41 == glColor4bv
+	glColor4d@32 @42 == glColor4d
+	glColor4dv@4 @43 == glColor4dv
+	glColor4f@16 @44 == glColor4f
+	glColor4fv@4 @45 == glColor4fv
+	glColor4i@16 @46 == glColor4i
+	glColor4iv@4 @47 == glColor4iv
+	glColor4s@16 @48 == glColor4s
+	glColor4sv@4 @49 == glColor4sv
+	glColor4ub@16 @50 == glColor4ub
+	glColor4ubv@4 @51 == glColor4ubv
+	glColor4ui@16 @52 == glColor4ui
+	glColor4uiv@4 @53 == glColor4uiv
+	glColor4us@16 @54 == glColor4us
+	glColor4usv@4 @55 == glColor4usv
+	glColorMask@16 @56 == glColorMask
+	glColorMaterial@8 @57 == glColorMaterial
+	glColorPointer@16 @58 == glColorPointer
+	glCopyPixels@20 @59 == glCopyPixels
+	glCopyTexImage1D@28 @60 == glCopyTexImage1D
+	glCopyTexImage2D@32 @61 == glCopyTexImage2D
+	glCopyTexSubImage1D@24 @62 == glCopyTexSubImage1D
+	glCopyTexSubImage2D@32 @63 == glCopyTexSubImage2D
+	glCullFace@4 @64 == glCullFace
+	;glDebugEntry@8                       @65
+	glDeleteLists@8 @66 == glDeleteLists
+	glDeleteTextures@8 @67 == glDeleteTextures
+	glDepthFunc@4 @68 == glDepthFunc
+	glDepthMask@4 @69 == glDepthMask
+	glDepthRange@16 @70 == glDepthRange
+	glDisable@4 @71 == glDisable
+	glDisableClientState@4 @72 == glDisableClientState
+	glDrawArrays@12 @73 == glDrawArrays
+	glDrawBuffer@4 @74 == glDrawBuffer
+	glDrawElements@16 @75 == glDrawElements
+	glDrawPixels@20 @76 == glDrawPixels
+	glEdgeFlag@4 @77 == glEdgeFlag
+	glEdgeFlagPointer@8 @78 == glEdgeFlagPointer
+	glEdgeFlagv@4 @79 == glEdgeFlagv
+	glEnable@4 @80 == glEnable
+	glEnableClientState@4 @81 == glEnableClientState
+	glEnd@0 @82 == glEnd
+	glEndList@0 @83 == glEndList
+	glEvalCoord1d@8 @84 == glEvalCoord1d
+	glEvalCoord1dv@4 @85 == glEvalCoord1dv
+	glEvalCoord1f@4 @86 == glEvalCoord1f
+	glEvalCoord1fv@4 @87 == glEvalCoord1fv
+	glEvalCoord2d@16 @88 == glEvalCoord2d
+	glEvalCoord2dv@4 @89 == glEvalCoord2dv
+	glEvalCoord2f@8 @90 == glEvalCoord2f
+	glEvalCoord2fv@4 @91 == glEvalCoord2fv
+	glEvalMesh1@12 @92 == glEvalMesh1
+	glEvalMesh2@20 @93 == glEvalMesh2
+	glEvalPoint1@4 @94 == glEvalPoint1
+	glEvalPoint2@8 @95 == glEvalPoint2
+	glFeedbackBuffer@12 @96 == glFeedbackBuffer
+	glFinish@0 @97 == glFinish
+	glFlush@0 @98 == glFlush
+	glFogf@8 @99 == glFogf
+	glFogfv@8 @100 == glFogfv
+	glFogi@8 @101 == glFogi
+	glFogiv@8 @102 == glFogiv
+	glFrontFace@4 @103 == glFrontFace
+	glFrustum@48 @104 == glFrustum
+	glGenLists@4 @105 == glGenLists
+	glGenTextures@8 @106 == glGenTextures
+	glGetBooleanv@8 @107 == glGetBooleanv
+	glGetClipPlane@8 @108 == glGetClipPlane
+	glGetDoublev@8 @109 == glGetDoublev
+	glGetError@0 @110 == glGetError
+	glGetFloatv@8 @111 == glGetFloatv
+	glGetIntegerv@8 @112 == glGetIntegerv
+	glGetLightfv@12 @113 == glGetLightfv
+	glGetLightiv@12 @114 == glGetLightiv
+	glGetMapdv@12 @115 == glGetMapdv
+	glGetMapfv@12 @116 == glGetMapfv
+	glGetMapiv@12 @117 == glGetMapiv
+	glGetMaterialfv@12 @118 == glGetMaterialfv
+	glGetMaterialiv@12 @119 == glGetMaterialiv
+	glGetPixelMapfv@8 @120 == glGetPixelMapfv
+	glGetPixelMapuiv@8 @121 == glGetPixelMapuiv
+	glGetPixelMapusv@8 @122 == glGetPixelMapusv
+	glGetPointerv@8 @123 == glGetPointerv
+	glGetPolygonStipple@4 @124 == glGetPolygonStipple
+	glGetString@4 @125 == glGetString
+	glGetTexEnvfv@12 @126 == glGetTexEnvfv
+	glGetTexEnviv@12 @127 == glGetTexEnviv
+	glGetTexGendv@12 @128 == glGetTexGendv
+	glGetTexGenfv@12 @129 == glGetTexGenfv
+	glGetTexGeniv@12 @130 == glGetTexGeniv
+	glGetTexImage@20 @131 == glGetTexImage
+	glGetTexLevelParameterfv@16 @132 == glGetTexLevelParameterfv
+	glGetTexLevelParameteriv@16 @133 == glGetTexLevelParameteriv
+	glGetTexParameterfv@12 @134 == glGetTexParameterfv
+	glGetTexParameteriv@12 @135 == glGetTexParameteriv
+	glHint@8 @136 == glHint
+	glIndexMask@4 @137 == glIndexMask
+	glIndexPointer@12 @138 == glIndexPointer
+	glIndexd@8 @139 == glIndexd
+	glIndexdv@4 @140 == glIndexdv
+	glIndexf@4 @141 == glIndexf
+	glIndexfv@4 @142 == glIndexfv
+	glIndexi@4 @143 == glIndexi
+	glIndexiv@4 @144 == glIndexiv
+	glIndexs@4 @145 == glIndexs
+	glIndexsv@4 @146 == glIndexsv
+	glIndexub@4 @147 == glIndexub
+	glIndexubv@4 @148 == glIndexubv
+	glInitNames@0 @149 == glInitNames
+	glInterleavedArrays@12 @150 == glInterleavedArrays
+	glIsEnabled@4 @151 == glIsEnabled
+	glIsList@4 @152 == glIsList
+	glIsTexture@4 @153 == glIsTexture
+	glLightModelf@8 @154 == glLightModelf
+	glLightModelfv@8 @155 == glLightModelfv
+	glLightModeli@8 @156 == glLightModeli
+	glLightModeliv@8 @157 == glLightModeliv
+	glLightf@12 @158 == glLightf
+	glLightfv@12 @159 == glLightfv
+	glLighti@12 @160 == glLighti
+	glLightiv@12 @161 == glLightiv
+	glLineStipple@8 @162 == glLineStipple
+	glLineWidth@4 @163 == glLineWidth
+	glListBase@4 @164 == glListBase
+	glLoadIdentity@0 @165 == glLoadIdentity
+	glLoadMatrixd@4 @166 == glLoadMatrixd
+	glLoadMatrixf@4 @167 == glLoadMatrixf
+	glLoadName@4 @168 == glLoadName
+	glLogicOp@4 @169 == glLogicOp
+	glMap1d@32 @170 == glMap1d
+	glMap1f@24 @171 == glMap1f
+	glMap2d@56 @172 == glMap2d
+	glMap2f@40 @173 == glMap2f
+	glMapGrid1d@20 @174 == glMapGrid1d
+	glMapGrid1f@12 @175 == glMapGrid1f
+	glMapGrid2d@40 @176 == glMapGrid2d
+	glMapGrid2f@24 @177 == glMapGrid2f
+	glMaterialf@12 @178 == glMaterialf
+	glMaterialfv@12 @179 == glMaterialfv
+	glMateriali@12 @180 == glMateriali
+	glMaterialiv@12 @181 == glMaterialiv
+	glMatrixMode@4 @182 == glMatrixMode
+	glMultMatrixd@4 @183 == glMultMatrixd
+	glMultMatrixf@4 @184 == glMultMatrixf
+	glNewList@8 @185 == glNewList
+	glNormal3b@12 @186 == glNormal3b
+	glNormal3bv@4 @187 == glNormal3bv
+	glNormal3d@24 @188 == glNormal3d
+	glNormal3dv@4 @189 == glNormal3dv
+	glNormal3f@12 @190 == glNormal3f
+	glNormal3fv@4 @191 == glNormal3fv
+	glNormal3i@12 @192 == glNormal3i
+	glNormal3iv@4 @193 == glNormal3iv
+	glNormal3s@12 @194 == glNormal3s
+	glNormal3sv@4 @195 == glNormal3sv
+	glNormalPointer@12 @196 == glNormalPointer
+	glOrtho@48 @197 == glOrtho
+	glPassThrough@4 @198 == glPassThrough
+	glPixelMapfv@12 @199 == glPixelMapfv
+	glPixelMapuiv@12 @200 == glPixelMapuiv
+	glPixelMapusv@12 @201 == glPixelMapusv
+	glPixelStoref@8 @202 == glPixelStoref
+	glPixelStorei@8 @203 == glPixelStorei
+	glPixelTransferf@8 @204 == glPixelTransferf
+	glPixelTransferi@8 @205 == glPixelTransferi
+	glPixelZoom@8 @206 == glPixelZoom
+	glPointSize@4 @207 == glPointSize
+	glPolygonMode@8 @208 == glPolygonMode
+	glPolygonOffset@8 @209 == glPolygonOffset
+	glPolygonStipple@4 @210 == glPolygonStipple
+	glPopAttrib@0 @211 == glPopAttrib
+	glPopClientAttrib@0 @212 == glPopClientAttrib
+	glPopMatrix@0 @213 == glPopMatrix
+	glPopName@0 @214 == glPopName
+	glPrioritizeTextures@12 @215 == glPrioritizeTextures
+	glPushAttrib@4 @216 == glPushAttrib
+	glPushClientAttrib@4 @217 == glPushClientAttrib
+	glPushMatrix@0 @218 == glPushMatrix
+	glPushName@4 @219 == glPushName
+	glRasterPos2d@16 @220 == glRasterPos2d
+	glRasterPos2dv@4 @221 == glRasterPos2dv
+	glRasterPos2f@8 @222 == glRasterPos2f
+	glRasterPos2fv@4 @223 == glRasterPos2fv
+	glRasterPos2i@8 @224 == glRasterPos2i
+	glRasterPos2iv@4 @225 == glRasterPos2iv
+	glRasterPos2s@8 @226 == glRasterPos2s
+	glRasterPos2sv@4 @227 == glRasterPos2sv
+	glRasterPos3d@24 @228 == glRasterPos3d
+	glRasterPos3dv@4 @229 == glRasterPos3dv
+	glRasterPos3f@12 @230 == glRasterPos3f
+	glRasterPos3fv@4 @231 == glRasterPos3fv
+	glRasterPos3i@12 @232 == glRasterPos3i
+	glRasterPos3iv@4 @233 == glRasterPos3iv
+	glRasterPos3s@12 @234 == glRasterPos3s
+	glRasterPos3sv@4 @235 == glRasterPos3sv
+	glRasterPos4d@32 @236 == glRasterPos4d
+	glRasterPos4dv@4 @237 == glRasterPos4dv
+	glRasterPos4f@16 @238 == glRasterPos4f
+	glRasterPos4fv@4 @239 == glRasterPos4fv
+	glRasterPos4i@16 @240 == glRasterPos4i
+	glRasterPos4iv@4 @241 == glRasterPos4iv
+	glRasterPos4s@16 @242 == glRasterPos4s
+	glRasterPos4sv@4 @243 == glRasterPos4sv
+	glReadBuffer@4 @244 == glReadBuffer
+	glReadPixels@28 @245 == glReadPixels
+	glRectd@32 @246 == glRectd
+	glRectdv@8 @247 == glRectdv
+	glRectf@16 @248 == glRectf
+	glRectfv@8 @249 == glRectfv
+	glRecti@16 @250 == glRecti
+	glRectiv@8 @251 == glRectiv
+	glRects@16 @252 == glRects
+	glRectsv@8 @253 == glRectsv
+	glRenderMode@4 @254 == glRenderMode
+	glRotated@32 @255 == glRotated
+	glRotatef@16 @256 == glRotatef
+	glScaled@24 @257 == glScaled
+	glScalef@12 @258 == glScalef
+	glScissor@16 @259 == glScissor
+	glSelectBuffer@8 @260 == glSelectBuffer
+	glShadeModel@4 @261 == glShadeModel
+	glStencilFunc@12 @262 == glStencilFunc
+	glStencilMask@4 @263 == glStencilMask
+	glStencilOp@12 @264 == glStencilOp
+	glTexCoord1d@8 @265 == glTexCoord1d
+	glTexCoord1dv@4 @266 == glTexCoord1dv
+	glTexCoord1f@4 @267 == glTexCoord1f
+	glTexCoord1fv@4 @268 == glTexCoord1fv
+	glTexCoord1i@4 @269 == glTexCoord1i
+	glTexCoord1iv@4 @270 == glTexCoord1iv
+	glTexCoord1s@4 @271 == glTexCoord1s
+	glTexCoord1sv@4 @272 == glTexCoord1sv
+	glTexCoord2d@16 @273 == glTexCoord2d
+	glTexCoord2dv@4 @274 == glTexCoord2dv
+	glTexCoord2f@8 @275 == glTexCoord2f
+	glTexCoord2fv@4 @276 == glTexCoord2fv
+	glTexCoord2i@8 @277 == glTexCoord2i
+	glTexCoord2iv@4 @278 == glTexCoord2iv
+	glTexCoord2s@8 @279 == glTexCoord2s
+	glTexCoord2sv@4 @280 == glTexCoord2sv
+	glTexCoord3d@24 @281 == glTexCoord3d
+	glTexCoord3dv@4 @282 == glTexCoord3dv
+	glTexCoord3f@12 @283 == glTexCoord3f
+	glTexCoord3fv@4 @284 == glTexCoord3fv
+	glTexCoord3i@12 @285 == glTexCoord3i
+	glTexCoord3iv@4 @286 == glTexCoord3iv
+	glTexCoord3s@12 @287 == glTexCoord3s
+	glTexCoord3sv@4 @288 == glTexCoord3sv
+	glTexCoord4d@32 @289 == glTexCoord4d
+	glTexCoord4dv@4 @290 == glTexCoord4dv
+	glTexCoord4f@16 @291 == glTexCoord4f
+	glTexCoord4fv@4 @292 == glTexCoord4fv
+	glTexCoord4i@16 @293 == glTexCoord4i
+	glTexCoord4iv@4 @294 == glTexCoord4iv
+	glTexCoord4s@16 @295 == glTexCoord4s
+	glTexCoord4sv@4 @296 == glTexCoord4sv
+	glTexCoordPointer@16 @297 == glTexCoordPointer
+	glTexEnvf@12 @298 == glTexEnvf
+	glTexEnvfv@12 @299 == glTexEnvfv
+	glTexEnvi@12 @300 == glTexEnvi
+	glTexEnviv@12 @301 == glTexEnviv
+	glTexGend@16 @302 == glTexGend
+	glTexGendv@12 @303 == glTexGendv
+	glTexGenf@12 @304 == glTexGenf
+	glTexGenfv@12 @305 == glTexGenfv
+	glTexGeni@12 @306 == glTexGeni
+	glTexGeniv@12 @307 == glTexGeniv
+	glTexImage1D@32 @308 == glTexImage1D
+	glTexImage2D@36 @309 == glTexImage2D
+	glTexParameterf@12 @310 == glTexParameterf
+	glTexParameterfv@12 @311 == glTexParameterfv
+	glTexParameteri@12 @312 == glTexParameteri
+	glTexParameteriv@12 @313 == glTexParameteriv
+	glTexSubImage1D@28 @314 == glTexSubImage1D
+	glTexSubImage2D@36 @315 == glTexSubImage2D
+	glTranslated@24 @316 == glTranslated
+	glTranslatef@12 @317 == glTranslatef
+	glVertex2d@16 @318 == glVertex2d
+	glVertex2dv@4 @319 == glVertex2dv
+	glVertex2f@8 @320 == glVertex2f
+	glVertex2fv@4 @321 == glVertex2fv
+	glVertex2i@8 @322 == glVertex2i
+	glVertex2iv@4 @323 == glVertex2iv
+	glVertex2s@8 @324 == glVertex2s
+	glVertex2sv@4 @325 == glVertex2sv
+	glVertex3d@24 @326 == glVertex3d
+	glVertex3dv@4 @327 == glVertex3dv
+	glVertex3f@12 @328 == glVertex3f
+	glVertex3fv@4 @329 == glVertex3fv
+	glVertex3i@12 @330 == glVertex3i
+	glVertex3iv@4 @331 == glVertex3iv
+	glVertex3s@12 @332 == glVertex3s
+	glVertex3sv@4 @333 == glVertex3sv
+	glVertex4d@32 @334 == glVertex4d
+	glVertex4dv@4 @335 == glVertex4dv
+	glVertex4f@16 @336 == glVertex4f
+	glVertex4fv@4 @337 == glVertex4fv
+	glVertex4i@16 @338 == glVertex4i
+	glVertex4iv@4 @339 == glVertex4iv
+	glVertex4s@16 @340 == glVertex4s
+	glVertex4sv@4 @341 == glVertex4sv
+	glVertexPointer@16 @342 == glVertexPointer
+	glViewport@16 @343 == glViewport
+	wglChoosePixelFormat@8 @344 == wglChoosePixelFormat
+	wglCopyContext@12 @345 == wglCopyContext
+	wglCreateContext@4 @346 == wglCreateContext
+	wglCreateLayerContext@8 @347 == wglCreateLayerContext
+	wglDeleteContext@4 @348 == wglDeleteContext
+	wglDescribeLayerPlane@20 @349 == wglDescribeLayerPlane
+	wglDescribePixelFormat@16 @350 == wglDescribePixelFormat
+	wglGetCurrentContext@0 @351 == wglGetCurrentContext
+	wglGetCurrentDC@0 @352 == wglGetCurrentDC
+	;wglGetDefaultProcAddress@4          @353
+	wglGetLayerPaletteEntries@20 @354 == wglGetLayerPaletteEntries
+	wglGetPixelFormat@4 @355 == wglGetPixelFormat
+	wglGetProcAddress@4 @356 == wglGetProcAddress
+	wglMakeCurrent@8 @357 == wglMakeCurrent
+	wglRealizeLayerPalette@12 @358 == wglRealizeLayerPalette
+	wglSetLayerPaletteEntries@20 @359 == wglSetLayerPaletteEntries
+	wglSetPixelFormat@12 @360 == wglSetPixelFormat
+	wglShareLists@8 @361 == wglShareLists
+	wglSwapBuffers@4 @362 == wglSwapBuffers
+	wglSwapLayerBuffers@8 @363 == wglSwapLayerBuffers
+	wglSwapMultipleBuffers@8 @364 == wglSwapMultipleBuffers
+	wglUseFontBitmapsA@16 @365 == wglUseFontBitmapsA
+	wglUseFontBitmapsW@16 @366 == wglUseFontBitmapsW
+	wglUseFontOutlinesA@32 @367 == wglUseFontOutlinesA
+	wglUseFontOutlinesW@32 @368 == wglUseFontOutlinesW
+
+	DrvCopyContext@12 == DrvCopyContext
+	DrvCreateContext@4 == DrvCreateContext
+	DrvCreateLayerContext@8 == DrvCreateLayerContext
+	DrvDeleteContext@4 == DrvDeleteContext
+	DrvDescribeLayerPlane@20 == DrvDescribeLayerPlane
+	DrvDescribePixelFormat@16 == DrvDescribePixelFormat
+	DrvGetLayerPaletteEntries@20 == DrvGetLayerPaletteEntries
+	DrvGetProcAddress@4 == DrvGetProcAddress
+	DrvPresentBuffers@8 == DrvPresentBuffers
+	DrvRealizeLayerPalette@12 == DrvRealizeLayerPalette
+	DrvReleaseContext@4 == DrvReleaseContext
+	DrvSetCallbackProcs@8 == DrvSetCallbackProcs
+	DrvSetContext@12 == DrvSetContext
+	DrvSetLayerPaletteEntries@20 == DrvSetLayerPaletteEntries
+	DrvSetPixelFormat@8 == DrvSetPixelFormat
+	DrvShareLists@8 == DrvShareLists
+	DrvSwapBuffers@4 == DrvSwapBuffers
+	DrvSwapLayerBuffers@8 == DrvSwapLayerBuffers
+	DrvValidateVersion@4 == DrvValidateVersion
diff --git a/src/gallium/targets/osmesa/osmesa.def b/src/gallium/targets/osmesa/osmesa.def
index f6d09b81ef8..128f371636b 100644
--- a/src/gallium/targets/osmesa/osmesa.def
+++ b/src/gallium/targets/osmesa/osmesa.def
@@ -1,7 +1,7 @@
-;DESCRIPTION 'Mesa OSMesa lib for Win32'
-VERSION 4.1
-
 EXPORTS
+	; Mesa OSMesa lib for Win32
+
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
 	OSMesaCreateContext
 	OSMesaCreateContextAttribs
 	OSMesaCreateContextExt
@@ -73,7 +73,7 @@ EXPORTS
 	glCopyTexSubImage1D
 	glCopyTexSubImage2D
 	glCullFace
-;	glDebugEntry
+	;glDebugEntry@8
 	glDeleteLists
 	glDeleteTextures
 	glDepthFunc
diff --git a/src/gallium/targets/osmesa/osmesa.def.in b/src/gallium/targets/osmesa/osmesa.def.in
new file mode 100644
index 00000000000..d6045779796
--- /dev/null
+++ b/src/gallium/targets/osmesa/osmesa.def.in
@@ -0,0 +1,353 @@
+; Mesa OSMesa lib for Win32
+
+; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+OSMesaCreateContext@8
+OSMesaCreateContextAttribs@8
+OSMesaCreateContextExt@20
+OSMesaDestroyContext@4
+OSMesaMakeCurrent@20
+OSMesaGetCurrentContext@0
+OSMesaPixelStore@8
+OSMesaGetIntegerv@8
+OSMesaGetDepthBuffer@20
+OSMesaGetColorBuffer@20
+OSMesaGetProcAddress@4
+OSMesaColorClamp@4
+OSMesaPostprocess@12
+glAccum@8
+glAlphaFunc@8
+glAreTexturesResident@12
+glArrayElement@4
+glBegin@4
+glBindTexture@8
+glBitmap@28
+glBlendFunc@8
+glCallList@4
+glCallLists@12
+glClear@4
+glClearAccum@16
+glClearColor@16
+glClearDepth@8
+glClearIndex@4
+glClearStencil@4
+glClipPlane@8
+glColor3b@12
+glColor3bv@4
+glColor3d@24
+glColor3dv@4
+glColor3f@12
+glColor3fv@4
+glColor3i@12
+glColor3iv@4
+glColor3s@12
+glColor3sv@4
+glColor3ub@12
+glColor3ubv@4
+glColor3ui@12
+glColor3uiv@4
+glColor3us@12
+glColor3usv@4
+glColor4b@16
+glColor4bv@4
+glColor4d@32
+glColor4dv@4
+glColor4f@16
+glColor4fv@4
+glColor4i@16
+glColor4iv@4
+glColor4s@16
+glColor4sv@4
+glColor4ub@16
+glColor4ubv@4
+glColor4ui@16
+glColor4uiv@4
+glColor4us@16
+glColor4usv@4
+glColorMask@16
+glColorMaterial@8
+glColorPointer@16
+glCopyPixels@20
+glCopyTexImage1D@28
+glCopyTexImage2D@32
+glCopyTexSubImage1D@24
+glCopyTexSubImage2D@32
+glCullFace@4
+;glDebugEntry@8
+glDeleteLists@8
+glDeleteTextures@8
+glDepthFunc@4
+glDepthMask@4
+glDepthRange@16
+glDisable@4
+glDisableClientState@4
+glDrawArrays@12
+glDrawBuffer@4
+glDrawElements@16
+glDrawPixels@20
+glEdgeFlag@4
+glEdgeFlagPointer@8
+glEdgeFlagv@4
+glEnable@4
+glEnableClientState@4
+glEnd@0
+glEndList@0
+glEvalCoord1d@8
+glEvalCoord1dv@4
+glEvalCoord1f@4
+glEvalCoord1fv@4
+glEvalCoord2d@16
+glEvalCoord2dv@4
+glEvalCoord2f@8
+glEvalCoord2fv@4
+glEvalMesh1@12
+glEvalMesh2@20
+glEvalPoint1@4
+glEvalPoint2@8
+glFeedbackBuffer@12
+glFinish@0
+glFlush@0
+glFogf@8
+glFogfv@8
+glFogi@8
+glFogiv@8
+glFrontFace@4
+glFrustum@48
+glGenLists@4
+glGenTextures@8
+glGetBooleanv@8
+glGetClipPlane@8
+glGetDoublev@8
+glGetError@0
+glGetFloatv@8
+glGetIntegerv@8
+glGetLightfv@12
+glGetLightiv@12
+glGetMapdv@12
+glGetMapfv@12
+glGetMapiv@12
+glGetMaterialfv@12
+glGetMaterialiv@12
+glGetPixelMapfv@8
+glGetPixelMapuiv@8
+glGetPixelMapusv@8
+glGetPointerv@8
+glGetPolygonStipple@4
+glGetString@4
+glGetTexEnvfv@12
+glGetTexEnviv@12
+glGetTexGendv@12
+glGetTexGenfv@12
+glGetTexGeniv@12
+glGetTexImage@20
+glGetTexLevelParameterfv@16
+glGetTexLevelParameteriv@16
+glGetTexParameterfv@12
+glGetTexParameteriv@12
+glHint@8
+glIndexMask@4
+glIndexPointer@12
+glIndexd@8
+glIndexdv@4
+glIndexf@4
+glIndexfv@4
+glIndexi@4
+glIndexiv@4
+glIndexs@4
+glIndexsv@4
+glIndexub@4
+glIndexubv@4
+glInitNames@0
+glInterleavedArrays@12
+glIsEnabled@4
+glIsList@4
+glIsTexture@4
+glLightModelf@8
+glLightModelfv@8
+glLightModeli@8
+glLightModeliv@8
+glLightf@12
+glLightfv@12
+glLighti@12
+glLightiv@12
+glLineStipple@8
+glLineWidth@4
+glListBase@4
+glLoadIdentity@0
+glLoadMatrixd@4
+glLoadMatrixf@4
+glLoadName@4
+glLogicOp@4
+glMap1d@32
+glMap1f@24
+glMap2d@56
+glMap2f@40
+glMapGrid1d@20
+glMapGrid1f@12
+glMapGrid2d@40
+glMapGrid2f@24
+glMaterialf@12
+glMaterialfv@12
+glMateriali@12
+glMaterialiv@12
+glMatrixMode@4
+glMultMatrixd@4
+glMultMatrixf@4
+glNewList@8
+glNormal3b@12
+glNormal3bv@4
+glNormal3d@24
+glNormal3dv@4
+glNormal3f@12
+glNormal3fv@4
+glNormal3i@12
+glNormal3iv@4
+glNormal3s@12
+glNormal3sv@4
+glNormalPointer@12
+glOrtho@48
+glPassThrough@4
+glPixelMapfv@12
+glPixelMapuiv@12
+glPixelMapusv@12
+glPixelStoref@8
+glPixelStorei@8
+glPixelTransferf@8
+glPixelTransferi@8
+glPixelZoom@8
+glPointSize@4
+glPolygonMode@8
+glPolygonOffset@8
+glPolygonStipple@4
+glPopAttrib@0
+glPopClientAttrib@0
+glPopMatrix@0
+glPopName@0
+glPrioritizeTextures@12
+glPushAttrib@4
+glPushClientAttrib@4
+glPushMatrix@0
+glPushName@4
+glRasterPos2d@16
+glRasterPos2dv@4
+glRasterPos2f@8
+glRasterPos2fv@4
+glRasterPos2i@8
+glRasterPos2iv@4
+glRasterPos2s@8
+glRasterPos2sv@4
+glRasterPos3d@24
+glRasterPos3dv@4
+glRasterPos3f@12
+glRasterPos3fv@4
+glRasterPos3i@12
+glRasterPos3iv@4
+glRasterPos3s@12
+glRasterPos3sv@4
+glRasterPos4d@32
+glRasterPos4dv@4
+glRasterPos4f@16
+glRasterPos4fv@4
+glRasterPos4i@16
+glRasterPos4iv@4
+glRasterPos4s@16
+glRasterPos4sv@4
+glReadBuffer@4
+glReadPixels@28
+glRectd@32
+glRectdv@8
+glRectf@16
+glRectfv@8
+glRecti@16
+glRectiv@8
+glRects@16
+glRectsv@8
+glRenderMode@4
+glRotated@32
+glRotatef@16
+glScaled@24
+glScalef@12
+glScissor@16
+glSelectBuffer@8
+glShadeModel@4
+glStencilFunc@12
+glStencilMask@4
+glStencilOp@12
+glTexCoord1d@8
+glTexCoord1dv@4
+glTexCoord1f@4
+glTexCoord1fv@4
+glTexCoord1i@4
+glTexCoord1iv@4
+glTexCoord1s@4
+glTexCoord1sv@4
+glTexCoord2d@16
+glTexCoord2dv@4
+glTexCoord2f@8
+glTexCoord2fv@4
+glTexCoord2i@8
+glTexCoord2iv@4
+glTexCoord2s@8
+glTexCoord2sv@4
+glTexCoord3d@24
+glTexCoord3dv@4
+glTexCoord3f@12
+glTexCoord3fv@4
+glTexCoord3i@12
+glTexCoord3iv@4
+glTexCoord3s@12
+glTexCoord3sv@4
+glTexCoord4d@32
+glTexCoord4dv@4
+glTexCoord4f@16
+glTexCoord4fv@4
+glTexCoord4i@16
+glTexCoord4iv@4
+glTexCoord4s@16
+glTexCoord4sv@4
+glTexCoordPointer@16
+glTexEnvf@12
+glTexEnvfv@12
+glTexEnvi@12
+glTexEnviv@12
+glTexGend@16
+glTexGendv@12
+glTexGenf@12
+glTexGenfv@12
+glTexGeni@12
+glTexGeniv@12
+glTexImage1D@32
+glTexImage2D@36
+glTexParameterf@12
+glTexParameterfv@12
+glTexParameteri@12
+glTexParameteriv@12
+glTexSubImage1D@28
+glTexSubImage2D@36
+glTranslated@24
+glTranslatef@12
+glVertex2d@16
+glVertex2dv@4
+glVertex2f@8
+glVertex2fv@4
+glVertex2i@8
+glVertex2iv@4
+glVertex2s@8
+glVertex2sv@4
+glVertex3d@24
+glVertex3dv@4
+glVertex3f@12
+glVertex3fv@4
+glVertex3i@12
+glVertex3iv@4
+glVertex3s@12
+glVertex3sv@4
+glVertex4d@32
+glVertex4dv@4
+glVertex4f@16
+glVertex4fv@4
+glVertex4i@16
+glVertex4iv@4
+glVertex4s@16
+glVertex4sv@4
+glVertexPointer@16
+glViewport@16
diff --git a/src/gallium/targets/osmesa/osmesa.mingw.def b/src/gallium/targets/osmesa/osmesa.mingw.def
index b77af60a93f..00b177570b5 100644
--- a/src/gallium/targets/osmesa/osmesa.mingw.def
+++ b/src/gallium/targets/osmesa/osmesa.mingw.def
@@ -1,351 +1,354 @@
 EXPORTS
-	OSMesaCreateContext = OSMesaCreateContext@8
-	OSMesaCreateContextAttribs = OSMesaCreateContextAttribs@8
-	OSMesaCreateContextExt = OSMesaCreateContextExt@20
-	OSMesaDestroyContext = OSMesaDestroyContext@4
-	OSMesaMakeCurrent = OSMesaMakeCurrent@20
-	OSMesaGetCurrentContext = OSMesaGetCurrentContext@0
-	OSMesaPixelStore = OSMesaPixelStore@8
-	OSMesaGetIntegerv = OSMesaGetIntegerv@8
-	OSMesaGetDepthBuffer = OSMesaGetDepthBuffer@20
-	OSMesaGetColorBuffer = OSMesaGetColorBuffer@20
-	OSMesaGetProcAddress = OSMesaGetProcAddress@4
-	OSMesaColorClamp = OSMesaColorClamp@4
-	OSMesaPostprocess = OSMesaPostprocess@12
-	glAccum = glAccum@8
-	glAlphaFunc = glAlphaFunc@8
-	glAreTexturesResident = glAreTexturesResident@12
-	glArrayElement = glArrayElement@4
-	glBegin = glBegin@4
-	glBindTexture = glBindTexture@8
-	glBitmap = glBitmap@28
-	glBlendFunc = glBlendFunc@8
-	glCallList = glCallList@4
-	glCallLists = glCallLists@12
-	glClear = glClear@4
-	glClearAccum = glClearAccum@16
-	glClearColor = glClearColor@16
-	glClearDepth = glClearDepth@8
-	glClearIndex = glClearIndex@4
-	glClearStencil = glClearStencil@4
-	glClipPlane = glClipPlane@8
-	glColor3b = glColor3b@12
-	glColor3bv = glColor3bv@4
-	glColor3d = glColor3d@24
-	glColor3dv = glColor3dv@4
-	glColor3f = glColor3f@12
-	glColor3fv = glColor3fv@4
-	glColor3i = glColor3i@12
-	glColor3iv = glColor3iv@4
-	glColor3s = glColor3s@12
-	glColor3sv = glColor3sv@4
-	glColor3ub = glColor3ub@12
-	glColor3ubv = glColor3ubv@4
-	glColor3ui = glColor3ui@12
-	glColor3uiv = glColor3uiv@4
-	glColor3us = glColor3us@12
-	glColor3usv = glColor3usv@4
-	glColor4b = glColor4b@16
-	glColor4bv = glColor4bv@4
-	glColor4d = glColor4d@32
-	glColor4dv = glColor4dv@4
-	glColor4f = glColor4f@16
-	glColor4fv = glColor4fv@4
-	glColor4i = glColor4i@16
-	glColor4iv = glColor4iv@4
-	glColor4s = glColor4s@16
-	glColor4sv = glColor4sv@4
-	glColor4ub = glColor4ub@16
-	glColor4ubv = glColor4ubv@4
-	glColor4ui = glColor4ui@16
-	glColor4uiv = glColor4uiv@4
-	glColor4us = glColor4us@16
-	glColor4usv = glColor4usv@4
-	glColorMask = glColorMask@16
-	glColorMaterial = glColorMaterial@8
-	glColorPointer = glColorPointer@16
-	glCopyPixels = glCopyPixels@20
-	glCopyTexImage1D = glCopyTexImage1D@28
-	glCopyTexImage2D = glCopyTexImage2D@32
-	glCopyTexSubImage1D = glCopyTexSubImage1D@24
-	glCopyTexSubImage2D = glCopyTexSubImage2D@32
-	glCullFace = glCullFace@4
-;	glDebugEntry = glDebugEntry@8
-	glDeleteLists = glDeleteLists@8
-	glDeleteTextures = glDeleteTextures@8
-	glDepthFunc = glDepthFunc@4
-	glDepthMask = glDepthMask@4
-	glDepthRange = glDepthRange@16
-	glDisable = glDisable@4
-	glDisableClientState = glDisableClientState@4
-	glDrawArrays = glDrawArrays@12
-	glDrawBuffer = glDrawBuffer@4
-	glDrawElements = glDrawElements@16
-	glDrawPixels = glDrawPixels@20
-	glEdgeFlag = glEdgeFlag@4
-	glEdgeFlagPointer = glEdgeFlagPointer@8
-	glEdgeFlagv = glEdgeFlagv@4
-	glEnable = glEnable@4
-	glEnableClientState = glEnableClientState@4
-	glEnd = glEnd@0
-	glEndList = glEndList@0
-	glEvalCoord1d = glEvalCoord1d@8
-	glEvalCoord1dv = glEvalCoord1dv@4
-	glEvalCoord1f = glEvalCoord1f@4
-	glEvalCoord1fv = glEvalCoord1fv@4
-	glEvalCoord2d = glEvalCoord2d@16
-	glEvalCoord2dv = glEvalCoord2dv@4
-	glEvalCoord2f = glEvalCoord2f@8
-	glEvalCoord2fv = glEvalCoord2fv@4
-	glEvalMesh1 = glEvalMesh1@12
-	glEvalMesh2 = glEvalMesh2@20
-	glEvalPoint1 = glEvalPoint1@4
-	glEvalPoint2 = glEvalPoint2@8
-	glFeedbackBuffer = glFeedbackBuffer@12
-	glFinish = glFinish@0
-	glFlush = glFlush@0
-	glFogf = glFogf@8
-	glFogfv = glFogfv@8
-	glFogi = glFogi@8
-	glFogiv = glFogiv@8
-	glFrontFace = glFrontFace@4
-	glFrustum = glFrustum@48
-	glGenLists = glGenLists@4
-	glGenTextures = glGenTextures@8
-	glGetBooleanv = glGetBooleanv@8
-	glGetClipPlane = glGetClipPlane@8
-	glGetDoublev = glGetDoublev@8
-	glGetError = glGetError@0
-	glGetFloatv = glGetFloatv@8
-	glGetIntegerv = glGetIntegerv@8
-	glGetLightfv = glGetLightfv@12
-	glGetLightiv = glGetLightiv@12
-	glGetMapdv = glGetMapdv@12
-	glGetMapfv = glGetMapfv@12
-	glGetMapiv = glGetMapiv@12
-	glGetMaterialfv = glGetMaterialfv@12
-	glGetMaterialiv = glGetMaterialiv@12
-	glGetPixelMapfv = glGetPixelMapfv@8
-	glGetPixelMapuiv = glGetPixelMapuiv@8
-	glGetPixelMapusv = glGetPixelMapusv@8
-	glGetPointerv = glGetPointerv@8
-	glGetPolygonStipple = glGetPolygonStipple@4
-	glGetString = glGetString@4
-	glGetTexEnvfv = glGetTexEnvfv@12
-	glGetTexEnviv = glGetTexEnviv@12
-	glGetTexGendv = glGetTexGendv@12
-	glGetTexGenfv = glGetTexGenfv@12
-	glGetTexGeniv = glGetTexGeniv@12
-	glGetTexImage = glGetTexImage@20
-	glGetTexLevelParameterfv = glGetTexLevelParameterfv@16
-	glGetTexLevelParameteriv = glGetTexLevelParameteriv@16
-	glGetTexParameterfv = glGetTexParameterfv@12
-	glGetTexParameteriv = glGetTexParameteriv@12
-	glHint = glHint@8
-	glIndexMask = glIndexMask@4
-	glIndexPointer = glIndexPointer@12
-	glIndexd = glIndexd@8
-	glIndexdv = glIndexdv@4
-	glIndexf = glIndexf@4
-	glIndexfv = glIndexfv@4
-	glIndexi = glIndexi@4
-	glIndexiv = glIndexiv@4
-	glIndexs = glIndexs@4
-	glIndexsv = glIndexsv@4
-	glIndexub = glIndexub@4
-	glIndexubv = glIndexubv@4
-	glInitNames = glInitNames@0
-	glInterleavedArrays = glInterleavedArrays@12
-	glIsEnabled = glIsEnabled@4
-	glIsList = glIsList@4
-	glIsTexture = glIsTexture@4
-	glLightModelf = glLightModelf@8
-	glLightModelfv = glLightModelfv@8
-	glLightModeli = glLightModeli@8
-	glLightModeliv = glLightModeliv@8
-	glLightf = glLightf@12
-	glLightfv = glLightfv@12
-	glLighti = glLighti@12
-	glLightiv = glLightiv@12
-	glLineStipple = glLineStipple@8
-	glLineWidth = glLineWidth@4
-	glListBase = glListBase@4
-	glLoadIdentity = glLoadIdentity@0
-	glLoadMatrixd = glLoadMatrixd@4
-	glLoadMatrixf = glLoadMatrixf@4
-	glLoadName = glLoadName@4
-	glLogicOp = glLogicOp@4
-	glMap1d = glMap1d@32
-	glMap1f = glMap1f@24
-	glMap2d = glMap2d@56
-	glMap2f = glMap2f@40
-	glMapGrid1d = glMapGrid1d@20
-	glMapGrid1f = glMapGrid1f@12
-	glMapGrid2d = glMapGrid2d@40
-	glMapGrid2f = glMapGrid2f@24
-	glMaterialf = glMaterialf@12
-	glMaterialfv = glMaterialfv@12
-	glMateriali = glMateriali@12
-	glMaterialiv = glMaterialiv@12
-	glMatrixMode = glMatrixMode@4
-	glMultMatrixd = glMultMatrixd@4
-	glMultMatrixf = glMultMatrixf@4
-	glNewList = glNewList@8
-	glNormal3b = glNormal3b@12
-	glNormal3bv = glNormal3bv@4
-	glNormal3d = glNormal3d@24
-	glNormal3dv = glNormal3dv@4
-	glNormal3f = glNormal3f@12
-	glNormal3fv = glNormal3fv@4
-	glNormal3i = glNormal3i@12
-	glNormal3iv = glNormal3iv@4
-	glNormal3s = glNormal3s@12
-	glNormal3sv = glNormal3sv@4
-	glNormalPointer = glNormalPointer@12
-	glOrtho = glOrtho@48
-	glPassThrough = glPassThrough@4
-	glPixelMapfv = glPixelMapfv@12
-	glPixelMapuiv = glPixelMapuiv@12
-	glPixelMapusv = glPixelMapusv@12
-	glPixelStoref = glPixelStoref@8
-	glPixelStorei = glPixelStorei@8
-	glPixelTransferf = glPixelTransferf@8
-	glPixelTransferi = glPixelTransferi@8
-	glPixelZoom = glPixelZoom@8
-	glPointSize = glPointSize@4
-	glPolygonMode = glPolygonMode@8
-	glPolygonOffset = glPolygonOffset@8
-	glPolygonStipple = glPolygonStipple@4
-	glPopAttrib = glPopAttrib@0
-	glPopClientAttrib = glPopClientAttrib@0
-	glPopMatrix = glPopMatrix@0
-	glPopName = glPopName@0
-	glPrioritizeTextures = glPrioritizeTextures@12
-	glPushAttrib = glPushAttrib@4
-	glPushClientAttrib = glPushClientAttrib@4
-	glPushMatrix = glPushMatrix@0
-	glPushName = glPushName@4
-	glRasterPos2d = glRasterPos2d@16
-	glRasterPos2dv = glRasterPos2dv@4
-	glRasterPos2f = glRasterPos2f@8
-	glRasterPos2fv = glRasterPos2fv@4
-	glRasterPos2i = glRasterPos2i@8
-	glRasterPos2iv = glRasterPos2iv@4
-	glRasterPos2s = glRasterPos2s@8
-	glRasterPos2sv = glRasterPos2sv@4
-	glRasterPos3d = glRasterPos3d@24
-	glRasterPos3dv = glRasterPos3dv@4
-	glRasterPos3f = glRasterPos3f@12
-	glRasterPos3fv = glRasterPos3fv@4
-	glRasterPos3i = glRasterPos3i@12
-	glRasterPos3iv = glRasterPos3iv@4
-	glRasterPos3s = glRasterPos3s@12
-	glRasterPos3sv = glRasterPos3sv@4
-	glRasterPos4d = glRasterPos4d@32
-	glRasterPos4dv = glRasterPos4dv@4
-	glRasterPos4f = glRasterPos4f@16
-	glRasterPos4fv = glRasterPos4fv@4
-	glRasterPos4i = glRasterPos4i@16
-	glRasterPos4iv = glRasterPos4iv@4
-	glRasterPos4s = glRasterPos4s@16
-	glRasterPos4sv = glRasterPos4sv@4
-	glReadBuffer = glReadBuffer@4
-	glReadPixels = glReadPixels@28
-	glRectd = glRectd@32
-	glRectdv = glRectdv@8
-	glRectf = glRectf@16
-	glRectfv = glRectfv@8
-	glRecti = glRecti@16
-	glRectiv = glRectiv@8
-	glRects = glRects@16
-	glRectsv = glRectsv@8
-	glRenderMode = glRenderMode@4
-	glRotated = glRotated@32
-	glRotatef = glRotatef@16
-	glScaled = glScaled@24
-	glScalef = glScalef@12
-	glScissor = glScissor@16
-	glSelectBuffer = glSelectBuffer@8
-	glShadeModel = glShadeModel@4
-	glStencilFunc = glStencilFunc@12
-	glStencilMask = glStencilMask@4
-	glStencilOp = glStencilOp@12
-	glTexCoord1d = glTexCoord1d@8
-	glTexCoord1dv = glTexCoord1dv@4
-	glTexCoord1f = glTexCoord1f@4
-	glTexCoord1fv = glTexCoord1fv@4
-	glTexCoord1i = glTexCoord1i@4
-	glTexCoord1iv = glTexCoord1iv@4
-	glTexCoord1s = glTexCoord1s@4
-	glTexCoord1sv = glTexCoord1sv@4
-	glTexCoord2d = glTexCoord2d@16
-	glTexCoord2dv = glTexCoord2dv@4
-	glTexCoord2f = glTexCoord2f@8
-	glTexCoord2fv = glTexCoord2fv@4
-	glTexCoord2i = glTexCoord2i@8
-	glTexCoord2iv = glTexCoord2iv@4
-	glTexCoord2s = glTexCoord2s@8
-	glTexCoord2sv = glTexCoord2sv@4
-	glTexCoord3d = glTexCoord3d@24
-	glTexCoord3dv = glTexCoord3dv@4
-	glTexCoord3f = glTexCoord3f@12
-	glTexCoord3fv = glTexCoord3fv@4
-	glTexCoord3i = glTexCoord3i@12
-	glTexCoord3iv = glTexCoord3iv@4
-	glTexCoord3s = glTexCoord3s@12
-	glTexCoord3sv = glTexCoord3sv@4
-	glTexCoord4d = glTexCoord4d@32
-	glTexCoord4dv = glTexCoord4dv@4
-	glTexCoord4f = glTexCoord4f@16
-	glTexCoord4fv = glTexCoord4fv@4
-	glTexCoord4i = glTexCoord4i@16
-	glTexCoord4iv = glTexCoord4iv@4
-	glTexCoord4s = glTexCoord4s@16
-	glTexCoord4sv = glTexCoord4sv@4
-	glTexCoordPointer = glTexCoordPointer@16
-	glTexEnvf = glTexEnvf@12
-	glTexEnvfv = glTexEnvfv@12
-	glTexEnvi = glTexEnvi@12
-	glTexEnviv = glTexEnviv@12
-	glTexGend = glTexGend@16
-	glTexGendv = glTexGendv@12
-	glTexGenf = glTexGenf@12
-	glTexGenfv = glTexGenfv@12
-	glTexGeni = glTexGeni@12
-	glTexGeniv = glTexGeniv@12
-	glTexImage1D = glTexImage1D@32
-	glTexImage2D = glTexImage2D@36
-	glTexParameterf = glTexParameterf@12
-	glTexParameterfv = glTexParameterfv@12
-	glTexParameteri = glTexParameteri@12
-	glTexParameteriv = glTexParameteriv@12
-	glTexSubImage1D = glTexSubImage1D@28
-	glTexSubImage2D = glTexSubImage2D@36
-	glTranslated = glTranslated@24
-	glTranslatef = glTranslatef@12
-	glVertex2d = glVertex2d@16
-	glVertex2dv = glVertex2dv@4
-	glVertex2f = glVertex2f@8
-	glVertex2fv = glVertex2fv@4
-	glVertex2i = glVertex2i@8
-	glVertex2iv = glVertex2iv@4
-	glVertex2s = glVertex2s@8
-	glVertex2sv = glVertex2sv@4
-	glVertex3d = glVertex3d@24
-	glVertex3dv = glVertex3dv@4
-	glVertex3f = glVertex3f@12
-	glVertex3fv = glVertex3fv@4
-	glVertex3i = glVertex3i@12
-	glVertex3iv = glVertex3iv@4
-	glVertex3s = glVertex3s@12
-	glVertex3sv = glVertex3sv@4
-	glVertex4d = glVertex4d@32
-	glVertex4dv = glVertex4dv@4
-	glVertex4f = glVertex4f@16
-	glVertex4fv = glVertex4fv@4
-	glVertex4i = glVertex4i@16
-	glVertex4iv = glVertex4iv@4
-	glVertex4s = glVertex4s@16
-	glVertex4sv = glVertex4sv@4
-	glVertexPointer = glVertexPointer@16
-	glViewport = glViewport@16
+	; Mesa OSMesa lib for Win32
+
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	OSMesaCreateContext@8 == OSMesaCreateContext
+	OSMesaCreateContextAttribs@8 == OSMesaCreateContextAttribs
+	OSMesaCreateContextExt@20 == OSMesaCreateContextExt
+	OSMesaDestroyContext@4 == OSMesaDestroyContext
+	OSMesaMakeCurrent@20 == OSMesaMakeCurrent
+	OSMesaGetCurrentContext@0 == OSMesaGetCurrentContext
+	OSMesaPixelStore@8 == OSMesaPixelStore
+	OSMesaGetIntegerv@8 == OSMesaGetIntegerv
+	OSMesaGetDepthBuffer@20 == OSMesaGetDepthBuffer
+	OSMesaGetColorBuffer@20 == OSMesaGetColorBuffer
+	OSMesaGetProcAddress@4 == OSMesaGetProcAddress
+	OSMesaColorClamp@4 == OSMesaColorClamp
+	OSMesaPostprocess@12 == OSMesaPostprocess
+	glAccum@8 == glAccum
+	glAlphaFunc@8 == glAlphaFunc
+	glAreTexturesResident@12 == glAreTexturesResident
+	glArrayElement@4 == glArrayElement
+	glBegin@4 == glBegin
+	glBindTexture@8 == glBindTexture
+	glBitmap@28 == glBitmap
+	glBlendFunc@8 == glBlendFunc
+	glCallList@4 == glCallList
+	glCallLists@12 == glCallLists
+	glClear@4 == glClear
+	glClearAccum@16 == glClearAccum
+	glClearColor@16 == glClearColor
+	glClearDepth@8 == glClearDepth
+	glClearIndex@4 == glClearIndex
+	glClearStencil@4 == glClearStencil
+	glClipPlane@8 == glClipPlane
+	glColor3b@12 == glColor3b
+	glColor3bv@4 == glColor3bv
+	glColor3d@24 == glColor3d
+	glColor3dv@4 == glColor3dv
+	glColor3f@12 == glColor3f
+	glColor3fv@4 == glColor3fv
+	glColor3i@12 == glColor3i
+	glColor3iv@4 == glColor3iv
+	glColor3s@12 == glColor3s
+	glColor3sv@4 == glColor3sv
+	glColor3ub@12 == glColor3ub
+	glColor3ubv@4 == glColor3ubv
+	glColor3ui@12 == glColor3ui
+	glColor3uiv@4 == glColor3uiv
+	glColor3us@12 == glColor3us
+	glColor3usv@4 == glColor3usv
+	glColor4b@16 == glColor4b
+	glColor4bv@4 == glColor4bv
+	glColor4d@32 == glColor4d
+	glColor4dv@4 == glColor4dv
+	glColor4f@16 == glColor4f
+	glColor4fv@4 == glColor4fv
+	glColor4i@16 == glColor4i
+	glColor4iv@4 == glColor4iv
+	glColor4s@16 == glColor4s
+	glColor4sv@4 == glColor4sv
+	glColor4ub@16 == glColor4ub
+	glColor4ubv@4 == glColor4ubv
+	glColor4ui@16 == glColor4ui
+	glColor4uiv@4 == glColor4uiv
+	glColor4us@16 == glColor4us
+	glColor4usv@4 == glColor4usv
+	glColorMask@16 == glColorMask
+	glColorMaterial@8 == glColorMaterial
+	glColorPointer@16 == glColorPointer
+	glCopyPixels@20 == glCopyPixels
+	glCopyTexImage1D@28 == glCopyTexImage1D
+	glCopyTexImage2D@32 == glCopyTexImage2D
+	glCopyTexSubImage1D@24 == glCopyTexSubImage1D
+	glCopyTexSubImage2D@32 == glCopyTexSubImage2D
+	glCullFace@4 == glCullFace
+	;glDebugEntry@8
+	glDeleteLists@8 == glDeleteLists
+	glDeleteTextures@8 == glDeleteTextures
+	glDepthFunc@4 == glDepthFunc
+	glDepthMask@4 == glDepthMask
+	glDepthRange@16 == glDepthRange
+	glDisable@4 == glDisable
+	glDisableClientState@4 == glDisableClientState
+	glDrawArrays@12 == glDrawArrays
+	glDrawBuffer@4 == glDrawBuffer
+	glDrawElements@16 == glDrawElements
+	glDrawPixels@20 == glDrawPixels
+	glEdgeFlag@4 == glEdgeFlag
+	glEdgeFlagPointer@8 == glEdgeFlagPointer
+	glEdgeFlagv@4 == glEdgeFlagv
+	glEnable@4 == glEnable
+	glEnableClientState@4 == glEnableClientState
+	glEnd@0 == glEnd
+	glEndList@0 == glEndList
+	glEvalCoord1d@8 == glEvalCoord1d
+	glEvalCoord1dv@4 == glEvalCoord1dv
+	glEvalCoord1f@4 == glEvalCoord1f
+	glEvalCoord1fv@4 == glEvalCoord1fv
+	glEvalCoord2d@16 == glEvalCoord2d
+	glEvalCoord2dv@4 == glEvalCoord2dv
+	glEvalCoord2f@8 == glEvalCoord2f
+	glEvalCoord2fv@4 == glEvalCoord2fv
+	glEvalMesh1@12 == glEvalMesh1
+	glEvalMesh2@20 == glEvalMesh2
+	glEvalPoint1@4 == glEvalPoint1
+	glEvalPoint2@8 == glEvalPoint2
+	glFeedbackBuffer@12 == glFeedbackBuffer
+	glFinish@0 == glFinish
+	glFlush@0 == glFlush
+	glFogf@8 == glFogf
+	glFogfv@8 == glFogfv
+	glFogi@8 == glFogi
+	glFogiv@8 == glFogiv
+	glFrontFace@4 == glFrontFace
+	glFrustum@48 == glFrustum
+	glGenLists@4 == glGenLists
+	glGenTextures@8 == glGenTextures
+	glGetBooleanv@8 == glGetBooleanv
+	glGetClipPlane@8 == glGetClipPlane
+	glGetDoublev@8 == glGetDoublev
+	glGetError@0 == glGetError
+	glGetFloatv@8 == glGetFloatv
+	glGetIntegerv@8 == glGetIntegerv
+	glGetLightfv@12 == glGetLightfv
+	glGetLightiv@12 == glGetLightiv
+	glGetMapdv@12 == glGetMapdv
+	glGetMapfv@12 == glGetMapfv
+	glGetMapiv@12 == glGetMapiv
+	glGetMaterialfv@12 == glGetMaterialfv
+	glGetMaterialiv@12 == glGetMaterialiv
+	glGetPixelMapfv@8 == glGetPixelMapfv
+	glGetPixelMapuiv@8 == glGetPixelMapuiv
+	glGetPixelMapusv@8 == glGetPixelMapusv
+	glGetPointerv@8 == glGetPointerv
+	glGetPolygonStipple@4 == glGetPolygonStipple
+	glGetString@4 == glGetString
+	glGetTexEnvfv@12 == glGetTexEnvfv
+	glGetTexEnviv@12 == glGetTexEnviv
+	glGetTexGendv@12 == glGetTexGendv
+	glGetTexGenfv@12 == glGetTexGenfv
+	glGetTexGeniv@12 == glGetTexGeniv
+	glGetTexImage@20 == glGetTexImage
+	glGetTexLevelParameterfv@16 == glGetTexLevelParameterfv
+	glGetTexLevelParameteriv@16 == glGetTexLevelParameteriv
+	glGetTexParameterfv@12 == glGetTexParameterfv
+	glGetTexParameteriv@12 == glGetTexParameteriv
+	glHint@8 == glHint
+	glIndexMask@4 == glIndexMask
+	glIndexPointer@12 == glIndexPointer
+	glIndexd@8 == glIndexd
+	glIndexdv@4 == glIndexdv
+	glIndexf@4 == glIndexf
+	glIndexfv@4 == glIndexfv
+	glIndexi@4 == glIndexi
+	glIndexiv@4 == glIndexiv
+	glIndexs@4 == glIndexs
+	glIndexsv@4 == glIndexsv
+	glIndexub@4 == glIndexub
+	glIndexubv@4 == glIndexubv
+	glInitNames@0 == glInitNames
+	glInterleavedArrays@12 == glInterleavedArrays
+	glIsEnabled@4 == glIsEnabled
+	glIsList@4 == glIsList
+	glIsTexture@4 == glIsTexture
+	glLightModelf@8 == glLightModelf
+	glLightModelfv@8 == glLightModelfv
+	glLightModeli@8 == glLightModeli
+	glLightModeliv@8 == glLightModeliv
+	glLightf@12 == glLightf
+	glLightfv@12 == glLightfv
+	glLighti@12 == glLighti
+	glLightiv@12 == glLightiv
+	glLineStipple@8 == glLineStipple
+	glLineWidth@4 == glLineWidth
+	glListBase@4 == glListBase
+	glLoadIdentity@0 == glLoadIdentity
+	glLoadMatrixd@4 == glLoadMatrixd
+	glLoadMatrixf@4 == glLoadMatrixf
+	glLoadName@4 == glLoadName
+	glLogicOp@4 == glLogicOp
+	glMap1d@32 == glMap1d
+	glMap1f@24 == glMap1f
+	glMap2d@56 == glMap2d
+	glMap2f@40 == glMap2f
+	glMapGrid1d@20 == glMapGrid1d
+	glMapGrid1f@12 == glMapGrid1f
+	glMapGrid2d@40 == glMapGrid2d
+	glMapGrid2f@24 == glMapGrid2f
+	glMaterialf@12 == glMaterialf
+	glMaterialfv@12 == glMaterialfv
+	glMateriali@12 == glMateriali
+	glMaterialiv@12 == glMaterialiv
+	glMatrixMode@4 == glMatrixMode
+	glMultMatrixd@4 == glMultMatrixd
+	glMultMatrixf@4 == glMultMatrixf
+	glNewList@8 == glNewList
+	glNormal3b@12 == glNormal3b
+	glNormal3bv@4 == glNormal3bv
+	glNormal3d@24 == glNormal3d
+	glNormal3dv@4 == glNormal3dv
+	glNormal3f@12 == glNormal3f
+	glNormal3fv@4 == glNormal3fv
+	glNormal3i@12 == glNormal3i
+	glNormal3iv@4 == glNormal3iv
+	glNormal3s@12 == glNormal3s
+	glNormal3sv@4 == glNormal3sv
+	glNormalPointer@12 == glNormalPointer
+	glOrtho@48 == glOrtho
+	glPassThrough@4 == glPassThrough
+	glPixelMapfv@12 == glPixelMapfv
+	glPixelMapuiv@12 == glPixelMapuiv
+	glPixelMapusv@12 == glPixelMapusv
+	glPixelStoref@8 == glPixelStoref
+	glPixelStorei@8 == glPixelStorei
+	glPixelTransferf@8 == glPixelTransferf
+	glPixelTransferi@8 == glPixelTransferi
+	glPixelZoom@8 == glPixelZoom
+	glPointSize@4 == glPointSize
+	glPolygonMode@8 == glPolygonMode
+	glPolygonOffset@8 == glPolygonOffset
+	glPolygonStipple@4 == glPolygonStipple
+	glPopAttrib@0 == glPopAttrib
+	glPopClientAttrib@0 == glPopClientAttrib
+	glPopMatrix@0 == glPopMatrix
+	glPopName@0 == glPopName
+	glPrioritizeTextures@12 == glPrioritizeTextures
+	glPushAttrib@4 == glPushAttrib
+	glPushClientAttrib@4 == glPushClientAttrib
+	glPushMatrix@0 == glPushMatrix
+	glPushName@4 == glPushName
+	glRasterPos2d@16 == glRasterPos2d
+	glRasterPos2dv@4 == glRasterPos2dv
+	glRasterPos2f@8 == glRasterPos2f
+	glRasterPos2fv@4 == glRasterPos2fv
+	glRasterPos2i@8 == glRasterPos2i
+	glRasterPos2iv@4 == glRasterPos2iv
+	glRasterPos2s@8 == glRasterPos2s
+	glRasterPos2sv@4 == glRasterPos2sv
+	glRasterPos3d@24 == glRasterPos3d
+	glRasterPos3dv@4 == glRasterPos3dv
+	glRasterPos3f@12 == glRasterPos3f
+	glRasterPos3fv@4 == glRasterPos3fv
+	glRasterPos3i@12 == glRasterPos3i
+	glRasterPos3iv@4 == glRasterPos3iv
+	glRasterPos3s@12 == glRasterPos3s
+	glRasterPos3sv@4 == glRasterPos3sv
+	glRasterPos4d@32 == glRasterPos4d
+	glRasterPos4dv@4 == glRasterPos4dv
+	glRasterPos4f@16 == glRasterPos4f
+	glRasterPos4fv@4 == glRasterPos4fv
+	glRasterPos4i@16 == glRasterPos4i
+	glRasterPos4iv@4 == glRasterPos4iv
+	glRasterPos4s@16 == glRasterPos4s
+	glRasterPos4sv@4 == glRasterPos4sv
+	glReadBuffer@4 == glReadBuffer
+	glReadPixels@28 == glReadPixels
+	glRectd@32 == glRectd
+	glRectdv@8 == glRectdv
+	glRectf@16 == glRectf
+	glRectfv@8 == glRectfv
+	glRecti@16 == glRecti
+	glRectiv@8 == glRectiv
+	glRects@16 == glRects
+	glRectsv@8 == glRectsv
+	glRenderMode@4 == glRenderMode
+	glRotated@32 == glRotated
+	glRotatef@16 == glRotatef
+	glScaled@24 == glScaled
+	glScalef@12 == glScalef
+	glScissor@16 == glScissor
+	glSelectBuffer@8 == glSelectBuffer
+	glShadeModel@4 == glShadeModel
+	glStencilFunc@12 == glStencilFunc
+	glStencilMask@4 == glStencilMask
+	glStencilOp@12 == glStencilOp
+	glTexCoord1d@8 == glTexCoord1d
+	glTexCoord1dv@4 == glTexCoord1dv
+	glTexCoord1f@4 == glTexCoord1f
+	glTexCoord1fv@4 == glTexCoord1fv
+	glTexCoord1i@4 == glTexCoord1i
+	glTexCoord1iv@4 == glTexCoord1iv
+	glTexCoord1s@4 == glTexCoord1s
+	glTexCoord1sv@4 == glTexCoord1sv
+	glTexCoord2d@16 == glTexCoord2d
+	glTexCoord2dv@4 == glTexCoord2dv
+	glTexCoord2f@8 == glTexCoord2f
+	glTexCoord2fv@4 == glTexCoord2fv
+	glTexCoord2i@8 == glTexCoord2i
+	glTexCoord2iv@4 == glTexCoord2iv
+	glTexCoord2s@8 == glTexCoord2s
+	glTexCoord2sv@4 == glTexCoord2sv
+	glTexCoord3d@24 == glTexCoord3d
+	glTexCoord3dv@4 == glTexCoord3dv
+	glTexCoord3f@12 == glTexCoord3f
+	glTexCoord3fv@4 == glTexCoord3fv
+	glTexCoord3i@12 == glTexCoord3i
+	glTexCoord3iv@4 == glTexCoord3iv
+	glTexCoord3s@12 == glTexCoord3s
+	glTexCoord3sv@4 == glTexCoord3sv
+	glTexCoord4d@32 == glTexCoord4d
+	glTexCoord4dv@4 == glTexCoord4dv
+	glTexCoord4f@16 == glTexCoord4f
+	glTexCoord4fv@4 == glTexCoord4fv
+	glTexCoord4i@16 == glTexCoord4i
+	glTexCoord4iv@4 == glTexCoord4iv
+	glTexCoord4s@16 == glTexCoord4s
+	glTexCoord4sv@4 == glTexCoord4sv
+	glTexCoordPointer@16 == glTexCoordPointer
+	glTexEnvf@12 == glTexEnvf
+	glTexEnvfv@12 == glTexEnvfv
+	glTexEnvi@12 == glTexEnvi
+	glTexEnviv@12 == glTexEnviv
+	glTexGend@16 == glTexGend
+	glTexGendv@12 == glTexGendv
+	glTexGenf@12 == glTexGenf
+	glTexGenfv@12 == glTexGenfv
+	glTexGeni@12 == glTexGeni
+	glTexGeniv@12 == glTexGeniv
+	glTexImage1D@32 == glTexImage1D
+	glTexImage2D@36 == glTexImage2D
+	glTexParameterf@12 == glTexParameterf
+	glTexParameterfv@12 == glTexParameterfv
+	glTexParameteri@12 == glTexParameteri
+	glTexParameteriv@12 == glTexParameteriv
+	glTexSubImage1D@28 == glTexSubImage1D
+	glTexSubImage2D@36 == glTexSubImage2D
+	glTranslated@24 == glTranslated
+	glTranslatef@12 == glTranslatef
+	glVertex2d@16 == glVertex2d
+	glVertex2dv@4 == glVertex2dv
+	glVertex2f@8 == glVertex2f
+	glVertex2fv@4 == glVertex2fv
+	glVertex2i@8 == glVertex2i
+	glVertex2iv@4 == glVertex2iv
+	glVertex2s@8 == glVertex2s
+	glVertex2sv@4 == glVertex2sv
+	glVertex3d@24 == glVertex3d
+	glVertex3dv@4 == glVertex3dv
+	glVertex3f@12 == glVertex3f
+	glVertex3fv@4 == glVertex3fv
+	glVertex3i@12 == glVertex3i
+	glVertex3iv@4 == glVertex3iv
+	glVertex3s@12 == glVertex3s
+	glVertex3sv@4 == glVertex3sv
+	glVertex4d@32 == glVertex4d
+	glVertex4dv@4 == glVertex4dv
+	glVertex4f@16 == glVertex4f
+	glVertex4fv@4 == glVertex4fv
+	glVertex4i@16 == glVertex4i
+	glVertex4iv@4 == glVertex4iv
+	glVertex4s@16 == glVertex4s
+	glVertex4sv@4 == glVertex4sv
+	glVertexPointer@16 == glVertexPointer
+	glViewport@16 == glViewport
diff --git a/src/gallium/targets/wgl/gallium_wgl.def b/src/gallium/targets/wgl/gallium_wgl.def
index 6d39d2eadc9..f748536f73b 100644
--- a/src/gallium/targets/wgl/gallium_wgl.def
+++ b/src/gallium/targets/wgl/gallium_wgl.def
@@ -1,4 +1,5 @@
 EXPORTS
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
 	DrvCopyContext
 	DrvCreateContext
 	DrvCreateLayerContext
@@ -19,6 +20,7 @@ EXPORTS
 	DrvSwapLayerBuffers
 	DrvValidateVersion
 
+	; __cdecl calling convention have no @number suffix
 	stw_get_device
 	stw_init_screen
 	stw_get_current_context
diff --git a/src/gallium/targets/wgl/gallium_wgl.def.in b/src/gallium/targets/wgl/gallium_wgl.def.in
new file mode 100644
index 00000000000..860389d48cc
--- /dev/null
+++ b/src/gallium/targets/wgl/gallium_wgl.def.in
@@ -0,0 +1,39 @@
+; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+DrvCopyContext@12
+DrvCreateContext@4
+DrvCreateLayerContext@8
+DrvDeleteContext@4
+DrvDescribeLayerPlane@20
+DrvDescribePixelFormat@16
+DrvGetLayerPaletteEntries@20
+DrvGetProcAddress@4
+DrvPresentBuffers@8
+DrvRealizeLayerPalette@12
+DrvReleaseContext@4
+DrvSetCallbackProcs@8
+DrvSetContext@12
+DrvSetLayerPaletteEntries@20
+DrvSetPixelFormat@8
+DrvShareLists@8
+DrvSwapBuffers@4
+DrvSwapLayerBuffers@8
+DrvValidateVersion@4
+
+; __cdecl calling convention have no @number suffix
+stw_get_device
+stw_init_screen
+stw_get_current_context
+stw_get_current_dc
+stw_pixelformat_choose
+stw_pixelformat_get
+stw_pixelformat_get_info
+stw_override_opengl32_entry_points
+stw_create_context_attribs
+stw_destroy_context
+stw_unbind_context
+stw_current_context
+stw_make_current
+stw_framebuffer_create
+stw_framebuffer_release_locked
+stw_framebuffer_unlock
+stw_framebuffer_swap_locked
diff --git a/src/gallium/targets/wgl/gallium_wgl.mingw.def b/src/gallium/targets/wgl/gallium_wgl.mingw.def
index ee23392d95e..0c25b225418 100644
--- a/src/gallium/targets/wgl/gallium_wgl.mingw.def
+++ b/src/gallium/targets/wgl/gallium_wgl.mingw.def
@@ -1,26 +1,40 @@
 EXPORTS
-	DrvCopyContext = DrvCopyContext@12
-	DrvCreateContext = DrvCreateContext@4
-	DrvCreateLayerContext = DrvCreateLayerContext@8
-	DrvDeleteContext = DrvDeleteContext@4
-	DrvDescribeLayerPlane = DrvDescribeLayerPlane@20
-	DrvDescribePixelFormat = DrvDescribePixelFormat@16
-	DrvGetLayerPaletteEntries = DrvGetLayerPaletteEntries@20
-	DrvGetProcAddress = DrvGetProcAddress@4
-	DrvPresentBuffers = DrvPresentBuffers@8
-	DrvRealizeLayerPalette = DrvRealizeLayerPalette@12
-	DrvReleaseContext = DrvReleaseContext@4
-	DrvSetCallbackProcs = DrvSetCallbackProcs@8
-	DrvSetContext = DrvSetContext@12
-	DrvSetLayerPaletteEntries = DrvSetLayerPaletteEntries@20
-	DrvSetPixelFormat = DrvSetPixelFormat@8
-	DrvShareLists = DrvShareLists@8
-	DrvSwapBuffers = DrvSwapBuffers@4
-	DrvSwapLayerBuffers = DrvSwapLayerBuffers@8
-	DrvValidateVersion = DrvValidateVersion@4
+	; stdcall calling convention have @number suffix on 32 bits architecture for gcc
+	DrvCopyContext@12 == DrvCopyContext
+	DrvCreateContext@4 == DrvCreateContext
+	DrvCreateLayerContext@8 == DrvCreateLayerContext
+	DrvDeleteContext@4 == DrvDeleteContext
+	DrvDescribeLayerPlane@20 == DrvDescribeLayerPlane
+	DrvDescribePixelFormat@16 == DrvDescribePixelFormat
+	DrvGetLayerPaletteEntries@20 == DrvGetLayerPaletteEntries
+	DrvGetProcAddress@4 == DrvGetProcAddress
+	DrvPresentBuffers@8 == DrvPresentBuffers
+	DrvRealizeLayerPalette@12 == DrvRealizeLayerPalette
+	DrvReleaseContext@4 == DrvReleaseContext
+	DrvSetCallbackProcs@8 == DrvSetCallbackProcs
+	DrvSetContext@12 == DrvSetContext
+	DrvSetLayerPaletteEntries@20 == DrvSetLayerPaletteEntries
+	DrvSetPixelFormat@8 == DrvSetPixelFormat
+	DrvShareLists@8 == DrvShareLists
+	DrvSwapBuffers@4 == DrvSwapBuffers
+	DrvSwapLayerBuffers@8 == DrvSwapLayerBuffers
+	DrvValidateVersion@4 == DrvValidateVersion
 
-	stw_get_current_context = stw_get_current_context@0
-	stw_get_current_dc = stw_get_current_dc@0
-	stw_pixelformat_choose = stw_pixelformat_choose@8
-	stw_pixelformat_get = stw_pixelformat_get@4
-	stw_override_opengl32_entry_points = stw_override_opengl32_entry_points@8
+	; __cdecl calling convention have no @number suffix
+	stw_get_device
+	stw_init_screen
+	stw_get_current_context
+	stw_get_current_dc
+	stw_pixelformat_choose
+	stw_pixelformat_get
+	stw_pixelformat_get_info
+	stw_override_opengl32_entry_points
+	stw_create_context_attribs
+	stw_destroy_context
+	stw_unbind_context
+	stw_current_context
+	stw_make_current
+	stw_framebuffer_create
+	stw_framebuffer_release_locked
+	stw_framebuffer_unlock
+	stw_framebuffer_swap_locked
diff --git a/src/gallium/targets/wgl/meson.build b/src/gallium/targets/wgl/meson.build
index 27afb1f0be7..66beb2b0463 100644
--- a/src/gallium/targets/wgl/meson.build
+++ b/src/gallium/targets/wgl/meson.build
@@ -20,9 +20,6 @@
 
 
 gallium_wgl_link_args = []
-if cc.get_id() == 'gcc' and host_machine.cpu_family() != 'x86_64'
-  gallium_wgl_link_args += ['-Wl,--enable-stdcall-fixup']
-endif
 
 if cc.get_id() == 'gcc' and host_machine.cpu_family() != 'x86_64'
   wgl_def = 'gallium_wgl.mingw.def'
-- 
2.31.1.windows.1

