--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -130,13 +130,13 @@
     if(NOT MSVC) # also NOT clang-cl
       list(APPEND MLT_COMPILE_OPTIONS "-mmmx;-msse;-msse2")
     endif()
+    if(CMAKE_SIZEOF_VOID_P EQUAL 4)
+      set(CPU_X86_32 ON)
+    endif()
+    if(CMAKE_SIZEOF_VOID_P EQUAL 8)
+      set(CPU_X86_64 ON)
+    endif()
   endif()
-  if(CMAKE_SYSTEM_PROCESSOR MATCHES "i686" OR (WIN32 AND CMAKE_SYSTEM_PROCESSOR MATCHES "x86"))
-    set(CPU_X86_32 ON)
-  endif()
-  if(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64|AMD64")
-    set(CPU_X86_64 ON)
-  endif()
 endif()
 
 if(MSVC)
