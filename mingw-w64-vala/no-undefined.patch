diff -Naur vala-0.40.8.orig/codegen/Makefile.am vala-0.40.8/codegen/Makefile.am
--- vala-0.40.8.orig/codegen/Makefile.am	2018-08-12 15:47:47.345608800 -0400
+++ vala-0.40.8/codegen/Makefile.am	2018-08-12 15:48:15.861612400 -0400
@@ -19,6 +19,7 @@
 libvalaccodegen_ladir = $(pkglibdir)
 
 libvalaccodegen_la_LDFLAGS = \
+	-no-undefined \
 	-avoid-version \
 	$(NULL)
 
