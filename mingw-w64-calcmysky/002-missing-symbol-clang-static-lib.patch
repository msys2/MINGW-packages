diff -bur CalcMySky-0.3.1-orig/CMakeLists.txt CalcMySky-0.3.1/CMakeLists.txt
--- CalcMySky-0.3.1-orig/CMakeLists.txt	2023-10-03 11:12:11.352394800 -0600
+++ CalcMySky-0.3.1/CMakeLists.txt	2023-10-03 11:13:15.279851400 -0600
@@ -111,16 +111,16 @@
 # The first command is a dummy, it doesn't actually create its output: it's
 # only needed to force re-running of gen_version.cmake for the case when we've changed
 # the version but didn't touch other dependencies.
-add_custom_command(OUTPUT "${PROJECT_BINARY_DIR}/check version update" COMMAND $<IF:$<BOOL:${WIN32}>,echo.,true>)
-add_custom_command(OUTPUT "${PROJECT_BINARY_DIR}/version.cpp"
-	DEPENDS "${PROJECT_BINARY_DIR}/check version update"
-	WORKING_DIRECTORY "${PROJECT_SOURCE_DIR}"
-	COMMAND "${CMAKE_COMMAND}"
-		-D "staticVersion=${staticProjectVersion}"
-		-D "inputFile=${PROJECT_SOURCE_DIR}/version.cpp.in"
-		-D "outputFile=${PROJECT_BINARY_DIR}/version.cpp"
-		-P "${PROJECT_SOURCE_DIR}/cmake/gen_version.cmake")
-add_library(version STATIC "${PROJECT_BINARY_DIR}/version.cpp")
+# add_custom_command(OUTPUT "${PROJECT_BINARY_DIR}/check version update" COMMAND $<IF:$<BOOL:${WIN32}>,echo.,true>)
+# add_custom_command(OUTPUT "${PROJECT_BINARY_DIR}/version.cpp"
+# 	DEPENDS "${PROJECT_BINARY_DIR}/check version update"
+# 	WORKING_DIRECTORY "${PROJECT_SOURCE_DIR}"
+# 	COMMAND "${CMAKE_COMMAND}"
+# 		-D "staticVersion=${staticProjectVersion}"
+# 		-D "inputFile=${PROJECT_SOURCE_DIR}/version.cpp.in"
+# 		-D "outputFile=${PROJECT_BINARY_DIR}/version.cpp"
+# 		-P "${PROJECT_SOURCE_DIR}/cmake/gen_version.cmake")
+# add_library(version STATIC "${PROJECT_BINARY_DIR}/version.cpp")
 add_library(common STATIC
              common/EclipsedDoubleScatteringPrecomputer.cpp
              common/TextureAverageComputer.cpp
diff -bur CalcMySky-0.3.1-orig/config.h.in CalcMySky-0.3.1/config.h.in
--- CalcMySky-0.3.1-orig/config.h.in	2023-10-03 11:12:11.352394800 -0600
+++ CalcMySky-0.3.1/config.h.in	2023-10-03 11:13:46.489890600 -0600
@@ -1,6 +1,6 @@
 #pragma once
 
-extern const char*const PROJECT_VERSION;
+static const char*const PROJECT_VERSION = "@PROJECT_VERSION@";
 #define DATA_ROOT_DIR "${CMAKE_INSTALL_FULL_DATAROOTDIR}/${CMAKE_PROJECT_NAME}/"
 #define INSTALL_BINDIR "${CMAKE_INSTALL_FULL_BINDIR}/"
 #define BUILD_BINDIR "${CMAKE_BINARY_DIR}/"
