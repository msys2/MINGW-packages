--- a/.cargo/config.toml
+++ b/.cargo/config.toml
@@ -5,7 +5,7 @@ linker = "rust-lld"
 [target.'cfg(all(target_env = "msvc", target_os = "windows"))']
 rustflags = ["-C", "target-feature=+crt-static"]
 
-[target.'cfg(all(windows, debug_assertions))']
+[target.'cfg(all(target_env = "msvc", target_os = "windows", debug_assertions))']
 rustflags = [
   # increase the stack size to prevent overflowing the stack in debug
   "-C",
