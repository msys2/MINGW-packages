 libpkgconf/client.c         |  8 +++++---
 libpkgconf/libpkgconf-api.h |  4 ++--
 libpkgconf/pkg.c            | 20 +++++++++++++++-----
 3 files changed, 22 insertions(+), 10 deletions(-)

diff --git a/libpkgconf/client.c b/libpkgconf/client.c
index 1203ffe..f3ec4d2 100644
--- a/libpkgconf/client.c
+++ b/libpkgconf/client.c
@@ -318,9 +318,11 @@ pkgconf_trace(const pkgconf_client_t *client, const char *filename, size_t linen
 	char errbuf[PKGCONF_BUFSIZE];
 	size_t len;
 	va_list va;
-
-	len = snprintf(errbuf, sizeof errbuf, "%s:%zu [%s]: ", filename, lineno, funcname);
-
+#if defined(__MINGW64__)
+	len = snprintf(errbuf, sizeof errbuf, "%s:%llu [%s]: ", filename, lineno, funcname);
+#elif defined(__MINGW32__) && !defined(__MINGW64__)
+    len = snprintf(errbuf, sizeof errbuf, "%s:%u [%s]: ", filename, lineno, funcname);
+#endif
 	va_start(va, format);
 	vsnprintf(errbuf + len, sizeof(errbuf) - len, format, va);
 	va_end(va);
diff --git a/libpkgconf/libpkgconf-api.h b/libpkgconf/libpkgconf-api.h
index 1c4fb73..162ac66 100644
--- a/libpkgconf/libpkgconf-api.h
+++ b/libpkgconf/libpkgconf-api.h
@@ -9,9 +9,9 @@
 # define PKGCONF_API
 #elif defined(_WIN32) || defined(_WIN64)
 # ifdef LIBPKGCONF_EXPORT
-#  define PKGCONF_API __declspec(dllexport)
+#  define PKGCONF_API
 # else
-#  define PKGCONF_API __declspec(dllimport)
+#  define PKGCONF_API
 # endif
 #else
 # define PKGCONF_API __attribute__((visibility("default")))
diff --git a/libpkgconf/pkg.c b/libpkgconf/pkg.c
index 27bc3c7..ff12f36 100644
--- a/libpkgconf/pkg.c
+++ b/libpkgconf/pkg.c
@@ -298,9 +298,11 @@ pkgconf_pkg_new_from_file(pkgconf_client_t *client, const char *filename, FILE *
 		bool warned_key_whitespace = false, warned_value_whitespace = false;
 
 		lineno++;
-
-		PKGCONF_TRACE(client, "%s:%zu > [%s]", filename, lineno, readbuf);
-
+#if defined(__MINGW64__)
+		PKGCONF_TRACE(client, "%s:%I64u > [%s]", filename, lineno, readbuf);
+#elif defined(__MINGW32__) && !defined(__MINGW64__)
+		PKGCONF_TRACE(client, "%s:%u > [%s]", filename, lineno, readbuf);
+#endif
 		p = readbuf;
 		while (*p && (isalpha((unsigned int)*p) || isdigit((unsigned int)*p) || *p == '_' || *p == '.'))
 			p++;
@@ -313,7 +315,11 @@ pkgconf_pkg_new_from_file(pkgconf_client_t *client, const char *filename, FILE *
 		{
 			if (!warned_key_whitespace)
 			{
-				pkgconf_warn(client, "%s:%zu: warning: whitespace encountered while parsing key section\n",
+#if defined(__MINGW64__)
+				pkgconf_warn(client, "%s:%I64u: warning: whitespace encountered while parsing key section\n",
+#elif defined(__MINGW32__) && !defined(__MINGW64__)
+				pkgconf_warn(client, "%s:%u: warning: whitespace encountered while parsing key section\n",
+#endif
 					pkg->filename, lineno);
 				warned_key_whitespace = true;
 			}
@@ -336,7 +342,11 @@ pkgconf_pkg_new_from_file(pkgconf_client_t *client, const char *filename, FILE *
 		{
 			if (!warned_value_whitespace && op == '=')
 			{
-				pkgconf_warn(client, "%s:%zu: warning: trailing whitespace encountered while parsing value section\n",
+#if defined(__MINGW64__)
+				pkgconf_warn(client, "%s:%I64u: warning: trailing whitespace encountered while parsing value section\n",
+#elif defined(__MINGW32__) && !defined(__MINGW64__)
+				pkgconf_warn(client, "%s:%u: warning: trailing whitespace encountered while parsing value section\n",
+#endif
 					pkg->filename, lineno);
 				warned_value_whitespace = true;
 			}
