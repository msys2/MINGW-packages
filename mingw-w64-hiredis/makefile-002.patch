From 1c44b4d2b2b95045afcf038f16009972098956cd Mon Sep 17 00:00:00 2001
From: taozuhong <taozuhong@gmail.com>
Date: Sat, 9 Jan 2021 14:37:54 +0800
Subject: [PATCH] add windows library support

---
 Makefile | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/Makefile b/Makefile
index 5463b56c8..a3163fed8 100644
--- a/Makefile
+++ b/Makefile
@@ -50,8 +50,8 @@ DEBUG_FLAGS?= -g -ggdb
 REAL_CFLAGS=$(OPTIMIZATION) -fPIC $(CPPFLAGS) $(CFLAGS) $(WARNINGS) $(DEBUG_FLAGS)
 REAL_LDFLAGS=$(LDFLAGS)
 
-DYLIBSUFFIX=so
-STLIBSUFFIX=a
+DYLIBSUFFIX=$(if $(WINDIR),dll,so)
+STLIBSUFFIX=$(if $(WINDIR),lib,a)
 DYLIB_MINOR_NAME=$(LIBNAME).$(DYLIBSUFFIX).$(HIREDIS_SONAME)
 DYLIB_MAJOR_NAME=$(LIBNAME).$(DYLIBSUFFIX).$(HIREDIS_MAJOR)
 DYLIBNAME=$(LIBNAME).$(DYLIBSUFFIX)
