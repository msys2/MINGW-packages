--- gtk-4.20.0/gdk/win32/gdkdisplay-win32.c.orig	2025-08-29 15:43:27.000000000 +0200
+++ gtk-4.20.0/gdk/win32/gdkdisplay-win32.c	2025-09-01 08:26:25.235276100 +0200
@@ -517,7 +517,7 @@
   const GUID my_IID_IDCompositionDevice = { 0xC37EA93A,0xE7AA,0x450D,0xB1,0x6F,0x97,0x46,0xCB,0x04,0x07,0xF3 };
   IDXGIDevice *dxgi_device;
 
-  if (!gdk_has_feature (GDK_FEATURE_DCOMP))
+  if (!gdk_has_feature (GDK_FEATURE_DCOMP) || g_getenv ("GDK_WIN32_FORCE_DCOMP") == NULL)
     return;
   
   hr_warn (ID3D11Device_QueryInterface (self->d3d11_device, &IID_IDXGIDevice, (void **) &dxgi_device));
