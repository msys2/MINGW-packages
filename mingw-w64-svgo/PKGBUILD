# Maintainer: Konstantin Podsvirov <konstantin@podsvirov.su>

_realname=svgo
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=4.0.0
pkgrel=1
pkgdesc='Tool for optimizing SVG files (mingw-w64)'
arch=('any')
mingw_arch=('ucrt64' 'clang64' 'clangarm64')
url='https://svgo.dev/'
msys2_repository_url='https://github.com/svg/svgo'
msys2_references=(
  'purl: pkg:npm/svgo'
)
license=('spdx:MIT')
depends=("${MINGW_PACKAGE_PREFIX}-nodejs")
provides=("${MINGW_PACKAGE_PREFIX}-nodejs-svgo")
replaces=("${MINGW_PACKAGE_PREFIX}-nodejs-svgo")
conflicts=("${MINGW_PACKAGE_PREFIX}-nodejs-svgo")
source=("https://registry.npmjs.org/${_realname}/-/${_realname}-${pkgver}.tgz")
sha256sums=('e74d3bfa43bfb4e74382fb43ac2c6360c3cf96207f2cdb9190db468b41622773')

package() {
  "${MINGW_PREFIX}"/bin/npm install -g \
    --cache "${srcdir}/npm-cache" \
    --prefix "${pkgdir}${MINGW_PREFIX}" \
    "${srcdir}/${_realname}-${pkgver}.tgz"

  install -Dm644 "${srcdir}/package/LICENSE" \
    "${pkgdir}${MINGW_PREFIX}/share/licenses/${_realname}/LICENSE"
}
