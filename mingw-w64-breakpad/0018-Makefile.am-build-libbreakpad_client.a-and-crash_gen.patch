From e8e7b5043d58d1d25990fd419f56f21ff169e97c Mon Sep 17 00:00:00 2001
From: oltolm <oleg.tolmatcev@gmail.com>
Date: Wed, 18 Feb 2026 19:53:33 +0100
Subject: [PATCH] Makefile.am: build libbreakpad_client.a and
 crash_generation_app

---
 Makefile.am | 34 +++++++++++++++++++++++++++++++++-
 1 file changed, 33 insertions(+), 1 deletion(-)

diff --git a/Makefile.am b/Makefile.am
index 8abf5483..88fa93ba 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -284,8 +284,11 @@ endif LINUX_HOST
 if !DISABLE_TOOLS
 
 if WINDOWS_HOST
+lib_LIBRARIES += src/client/windows/libbreakpad_client.a
+
 bin_PROGRAMS += \
-	src/tools/windows/dump_syms_dwarf/dump_syms
+	src/tools/windows/dump_syms_dwarf/dump_syms \
+	src/client/windows/tests/crash_generation_app/crash_generation_app
 endif
 
 bin_PROGRAMS += \
@@ -917,6 +920,35 @@ src_tools_windows_dump_syms_dwarf_dump_syms_SOURCES = \
 	src/tools/windows/dump_syms_dwarf/dump_syms.cc
 src_tools_windows_dump_syms_dwarf_dump_syms_LDADD = \
 	$(SOCKET_LIBS)
+
+src_client_windows_libbreakpad_client_a_SOURCES = \
+	src/client/windows/crash_generation/client_info.cc \
+	src/client/windows/crash_generation/crash_generation_client.cc \
+	src/client/windows/crash_generation/crash_generation_server.cc \
+	src/client/windows/crash_generation/minidump_generator.cc \
+	src/client/windows/handler/exception_handler.cc \
+	src/client/windows/sender/crash_report_sender.cc \
+	src/common/windows/guid_string.cc \
+	src/common/windows/http_upload.cc \
+	src/common/windows/pe_source_line_writer.cc \
+	src/common/windows/string_utils.cc \
+	src/common/windows/symbol_collector_client.cc \
+	src/common/windows/sym_upload_v2_protocol.cc
+
+%.rc.$(OBJEXT): %.rc
+	$(RC) -I $(top_srcdir) -o $@ $<
+
+src_client_windows_tests_crash_generation_app_crash_generation_app_SOURCES = \
+	src/client/windows/tests/crash_generation_app/abstract_class.cc \
+	src/client/windows/tests/crash_generation_app/crash_generation_app.cc \
+	src/client/windows/tests/crash_generation_app/crash_generation_app.rc
+src_client_windows_tests_crash_generation_app_crash_generation_app_LDADD = \
+	src/client/windows/libbreakpad_client.a \
+	$(SOCKET_LIBS)
+src_client_windows_tests_crash_generation_app_crash_generation_app_CPPFLAGS = \
+	-DUNICODE -D_UNICODE
+src_client_windows_tests_crash_generation_app_crash_generation_app_LDFLAGS = \
+	-mwindows -municode
 endif
 endif
 
-- 
2.53.0.windows.1

