From 3070ceb41ad2ff013f8c6817e56bae4d45accbba Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Fri, 5 Sep 2025 18:51:55 +0300
Subject: [PATCH 092/N] configure: enable 64-bit time support for 32-bit
 build

---
 configure.ac | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/configure.ac b/configure.ac
index 59af102..5e19e43 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1037,6 +1037,13 @@ if test -z "$CFLAGS"; then
         CFLAGS=
 fi
 
+dnl Build 32-bit mingw-w64 platform with 64-bit time support.
+case $host in
+  i686-*-mingw*)
+    CFLAGS="$CFLAGS -D__MINGW_USE_VC2005_COMPAT"
+    ;;
+esac
+
 dnl Emscripten SDK and WASI SDK default to wasm32.
 dnl On Emscripten use MEMORY64 setting to build target wasm64-emscripten.
 dnl for wasm64.
