--- pkcs11-provider-0.5/meson.build.orig	2024-06-05 09:04:12.000000000 -0500
+++ pkcs11-provider-0.5/meson.build	2024-11-21 13:02:07.061978600 -0600
@@ -86,5 +86,4 @@
 
 subdir('src')
 subdir('docs')
-subdir('tests')
 
--- pkcs11-provider-0.5/src/platform/endian.h.orig	2024-06-05 09:04:12.000000000 -0500
+++ pkcs11-provider-0.5/src/platform/endian.h	2024-11-21 12:27:32.809167300 -0600
@@ -59,8 +59,8 @@
 #define bswap_32(x) BSWAP_32(x)
 #define bswap_64(x) BSWAP_64(x)
 
-#elif defined(__ANDROID__) || defined(__CYGWIN__) || defined(__GNUC__) || \
-	defined(__GNU__)
+#elif defined(__ANDROID__) || defined(__CYGWIN__) || (defined(__GNUC__) || \
+	defined(__GNU__)) && !defined(__MINGW32__)
 
 #include <byteswap.h>
 #include <endian.h>
--- pkcs11-provider/src/provider.h.orig	2024-11-21 19:58:48.087544800 -0600
+++ pkcs11-provider/src/provider.h	2024-11-21 19:52:00.823425400 -0600
@@ -9,9 +9,18 @@
 #include "config.h"
 
 #include <stdbool.h>
+#if defined(_WIN32) && !defined(_MSC_VER)
+#include <pthread.h>
+#endif
 #include <sys/types.h>
 
+#ifdef _WIN32
+#pragma pack(push, 1)
+#endif
 #include "pkcs11.h"
+#ifdef _WIN32
+#pragma pack(pop)
+#endif
 #include <openssl/core_dispatch.h>
 #include <openssl/core_object.h>
 #include <openssl/types.h>
