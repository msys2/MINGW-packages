--- a/CMakeLists.txt.orig	2025-12-12 11:04:28 +0800
+++ b/CMakeLists.txt	2026-01-12 00:54:41 +0800
@@ -326,7 +326,7 @@
 endif()
 
 # Check if -latomic is required or not
-if (NOT MSVC AND NOT APPLE)
+if (NOT WIN32 AND NOT APPLE)
   CHECK_CXX_SOURCE_COMPILES("
 #include <atomic>
 std::atomic<uint64_t> x(0);
@@ -1118,7 +1118,11 @@
 
 
 if(WIN32)
-  set(SYSTEM_LIBS ${SYSTEM_LIBS} shlwapi.lib rpcrt4.lib)
+  if(MSVC)
+    set(SYSTEM_LIBS ${SYSTEM_LIBS} shlwapi.lib rpcrt4.lib)
+  else()
+    set(SYSTEM_LIBS ${SYSTEM_LIBS} shlwapi rpcrt4)
+  endif()
 else()
   set(SYSTEM_LIBS ${CMAKE_THREAD_LIBS_INIT})
 endif()
@@ -1204,13 +1208,14 @@
       set_target_properties(${ROCKSDB_SHARED_LIB} PROPERTIES
         COMPILE_FLAGS "/Fd${CMAKE_CFG_INTDIR}/${ROCKSDB_SHARED_LIB}.pdb")
     endif()
-  else()
-    set_target_properties(${ROCKSDB_SHARED_LIB} PROPERTIES
+  endif()
+  set_target_properties(${ROCKSDB_SHARED_LIB} PROPERTIES
                           LINKER_LANGUAGE CXX
                           VERSION ${rocksdb_VERSION}
                           SOVERSION ${rocksdb_VERSION_MAJOR}
-                          OUTPUT_NAME "rocksdb${ARTIFACT_SUFFIX}")
-  endif()
+                          OUTPUT_NAME "rocksdb${ARTIFACT_SUFFIX}"
+                          RUNTIME_OUTPUT_NAME "rocksdb"
+                          ARCHIVE_OUTPUT_NAME "rocksdb")
 endif()
 
 if(ROCKSDB_BUILD_SHARED AND NOT WIN32)
