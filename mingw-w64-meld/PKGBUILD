# Maintainer: Alexey Pavlov <alexpux@gmail.com>

_realname=meld
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=1.8.6
pkgrel=1
pkgdesc="Visual diff and merge tool (mingw-w64)"
arch=('i686' 'x86_64')
url="http://meldmerge.org/"
license=("GPL" "LGPL")
options=('strip' 'staticlibs')
depends=(
        "${MINGW_PACKAGE_PREFIX}-gtk2"
        "${MINGW_PACKAGE_PREFIX}-libxml2"
        "${MINGW_PACKAGE_PREFIX}-python2-gobject"
        "${MINGW_PACKAGE_PREFIX}-python2-pygtk"
        "${MINGW_PACKAGE_PREFIX}-gtksourceview2"
        "${MINGW_PACKAGE_PREFIX}-hicolor-icon-theme"
        "${MINGW_PACKAGE_PREFIX}-gsettings-desktop-schemas"
        )
makedepends=("${MINGW_PACKAGE_PREFIX}-gcc"
            "${MINGW_PACKAGE_PREFIX}-pkg-config"
            'intltool'
            'itstool')
conflicts=("${MINGW_PACKAGE_PREFIX}-meld3")
source=(http://ftp.gnome.org/pub/GNOME/sources/${_realname}/${pkgver%.*}/${_realname}-$pkgver.tar.xz)
sha256sums=('af96682b8f4bf3ad4221c853b1516218d62a17ff43c38f4a83e7e8ac6736e8a5')

build() {
  cd "${srcdir}/${_realname}-${pkgver}"
  make prefix=${MINGW_PREFIX}
}

package() {
  cd "${srcdir}/${_realname}-${pkgver}"
  make prefix=${MINGW_PREFIX} DESTDIR="$pkgdir" install
}
