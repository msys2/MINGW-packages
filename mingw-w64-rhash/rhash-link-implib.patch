--- a/configure
+++ b/configure
@@ -877,6 +877,7 @@
 
 LIBRHASH_STATIC = librhash/$LIBRHASH_STATIC
 LIBRHASH_SHARED = librhash/$LIBRHASH_SHARED
+LIBRHASH_IMPLIB = librhash/$LIBRHASH_IMPLIB
 BUILD_TYPE      = $RHASH_BUILD_TYPE
 VERSION         = $RHASH_VERSION
 EXEC_EXT        = $EXEC_EXT
--- a/librhash/Makefile
+++ b/librhash/Makefile
@@ -185,7 +185,7 @@
 
 # test targets
 $(TEST_SHARED): $(LIBRHASH_SHARED) test_lib.o
-	$(CC) $(CFLAGS) test_lib.o $(LIBRHASH_SHARED) $(LDFLAGS) -o $@
+	$(CC) $(CFLAGS) test_lib.o $(LIBRHASH_IMPLIB) $(LDFLAGS) -o $@
 
 $(TEST_STATIC): $(LIBRHASH_STATIC) test_lib.o
 	$(CC) $(CFLAGS) test_lib.o $(LIBRHASH_STATIC) $(BIN_STATIC_LDFLAGS) -o $@
--- a/Makefile
+++ b/Makefile
@@ -159,7 +159,7 @@
 	$(CC) $(OBJECTS) $(LIBRHASH_STATIC) $(BIN_STATIC_LDFLAGS) -o $@
 
 $(RHASH_SHARED): $(OBJECTS) $(LIBRHASH_SHARED)
-	$(CC) $(OBJECTS) $(LIBRHASH_SHARED) $(LDFLAGS) -o $@
+	$(CC) $(OBJECTS) $(LIBRHASH_IMPLIB) $(LDFLAGS) -o $@
 
 # NOTE: dependences were generated by 'gcc -Ilibrhash -MM *.c'
 # we are using plain old makefile style to support BSD make
