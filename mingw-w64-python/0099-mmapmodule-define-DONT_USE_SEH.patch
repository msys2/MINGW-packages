From 0e9b3bd3a73e2fffd41138eb4d83d6fd73996330 Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Sat, 3 Jan 2026 16:39:43 +0100
Subject: [PATCH 099/N] mmapmodule: define DONT_USE_SEH

copy the logic from callproc.c
---
 Modules/mmapmodule.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/Modules/mmapmodule.c b/Modules/mmapmodule.c
index 43f4763..4a49b5f 100644
--- a/Modules/mmapmodule.c
+++ b/Modules/mmapmodule.c
@@ -62,6 +62,13 @@ my_getallocationgranularity (void)
 
 #endif
 
+#if defined(_DEBUG) || defined(__MINGW32__)
+/* Don't use structured exception handling on Windows if this is defined.
+   MingW, AFAIK, doesn't support it.
+*/
+#define DONT_USE_SEH
+#endif
+
 #ifdef UNIX
 #include <sys/mman.h>
 #include <sys/stat.h>
