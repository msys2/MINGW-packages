From c4f101b2fe3f2de6a3dbfd6b50eb62d164cc5e4f Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Thu, 1 Jan 2026 18:40:13 +0100
Subject: [PATCH 071/N] dynload_win: don't run _Py_CheckPython3 for MINGW
 builds

---
 Python/dynload_win.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/Python/dynload_win.c b/Python/dynload_win.c
index d575592..d3aa513 100644
--- a/Python/dynload_win.c
+++ b/Python/dynload_win.c
@@ -218,9 +218,9 @@ dl_funcptr _PyImport_FindSharedFuncptrWindows(const char *prefix,
     dl_funcptr p;
     char funcname[258], *import_python;
 
-#ifdef Py_ENABLE_SHARED
+#if defined(Py_ENABLE_SHARED) && defined(_MSC_VER)
     _Py_CheckPython3();
-#endif /* Py_ENABLE_SHARED */
+#endif /* defined(Py_ENABLE_SHARED) && defined(_MSC_VER) */
 
     int use_legacy = 0;
     DWORD load_library_flags = 0;
