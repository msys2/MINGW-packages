From 3b5b43e0ba863cb7f3838f379ff9396b6723b676 Mon Sep 17 00:00:00 2001
From: Naveen M K <naveen521kk@gmail.com>
Date: Thu, 11 Jul 2024 13:58:20 +0530
Subject: [PATCH 078/N] configure: make `incompatible-pointer-types` a
 warning

gcc 14 changed `incompatible-pointer-types` from warning to error
for now, make it as warning to avoid build failure
---
 configure.ac | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/configure.ac b/configure.ac
index 096bc68..07f51d6 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2577,6 +2577,14 @@ fi
 AS_VAR_IF([ac_cv_gcc_compat], [yes], [
     CFLAGS_NODIST="$CFLAGS_NODIST -std=c11"
 
+    # GCC 14 and later error out with incompatible-pointer-types
+    # this only occues on mingw
+    case $host in
+    *-*-mingw*)
+        CFLAGS_NODIST="$CFLAGS_NODIST -Wno-error=incompatible-pointer-types"
+      ;;
+    esac
+
     PY_CHECK_CC_WARNING([enable], [extra], [if we can add -Wextra])
     AS_VAR_IF([ac_cv_enable_extra_warning], [yes],
               [CFLAGS_NODIST="$CFLAGS_NODIST -Wextra"])
