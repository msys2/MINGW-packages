From 3fa6a728c402f63464b314ed77deac1fd5d0d511 Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Tue, 6 Jan 2026 13:00:33 +0100
Subject: [PATCH 013/N] build: Use .pyd extension suffix + fix import lib
 install location

---
 Makefile.pre.in | 4 ++--
 configure.ac    | 3 +++
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/Makefile.pre.in b/Makefile.pre.in
index 2c2de6a..7733561 100644
--- a/Makefile.pre.in
+++ b/Makefile.pre.in
@@ -2939,8 +2939,8 @@ libainstall: all scripts
 	@if test "$(STATIC_LIBPYTHON)" = 1; then \
 		if test -d $(LIBRARY); then :; else \
 			if test "$(PYTHONFRAMEWORKDIR)" = no-framework; then \
-				if test "$(SHLIB_SUFFIX)" = .dll; then \
-					$(INSTALL_DATA) $(LDLIBRARY) $(DESTDIR)$(LIBPL) ; \
+				if test "$(SHLIB_SUFFIX)" = .dll -o "$(SHLIB_SUFFIX)" = .pyd; then \
+					$(INSTALL_DATA) $(LDLIBRARY) $(DESTDIR)$(LIBDIR) ; \
 				else \
 					$(INSTALL_DATA) $(LIBRARY) $(DESTDIR)$(LIBPL)/$(LIBRARY) ; \
 				fi; \
diff --git a/configure.ac b/configure.ac
index 7aadf26..43bed3f 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3513,6 +3513,9 @@ if test -z "$SHLIB_SUFFIX"; then
 	CYGWIN*)   SHLIB_SUFFIX=.dll;;
 	*)	   SHLIB_SUFFIX=.so;;
 	esac
+	case $host_os in
+	mingw*)    SHLIB_SUFFIX=.pyd;;
+	esac
 fi
 AC_MSG_RESULT([$SHLIB_SUFFIX])
 
