From 18ae7c050faa73cb5dfc7daa12c0e01518630609 Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Fri, 9 Jan 2026 12:25:11 +0100
Subject: [PATCH 101/N] sysconfig: patch nt schemes again

setuptools doesn't play along
---
 Lib/sysconfig/__init__.py | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/Lib/sysconfig/__init__.py b/Lib/sysconfig/__init__.py
index f2089e2..51a4e6d 100644
--- a/Lib/sysconfig/__init__.py
+++ b/Lib/sysconfig/__init__.py
@@ -169,6 +169,13 @@ if _HAS_USER_BASE:
             },
     }
 
+# XXX: setuptools uses os.name to select the scheme and doesn't use
+# sysconfig, we have to monkey patch the 'nt' scheme for mingw builds
+# until that is fixed
+if os.name == 'nt' and  sys._is_mingw:
+    _INSTALL_SCHEMES['nt'] = _INSTALL_SCHEMES['posix_prefix']
+    _INSTALL_SCHEMES['nt_user'] = _INSTALL_SCHEMES['posix_user']
+
 _SCHEME_KEYS = ('stdlib', 'platstdlib', 'purelib', 'platlib', 'include',
                 'scripts', 'data')
 
