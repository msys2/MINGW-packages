From a8b2b4ea621bef2ab8ff647046f4c92349c6ecf6 Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Mon, 1 Sep 2025 13:23:23 +0300
Subject: [PATCH 082/N] Fix pragma warnings

---
 Modules/_winapi.c  | 4 ++++
 Python/sysmodule.c | 4 ++++
 2 files changed, 8 insertions(+)

diff --git a/Modules/_winapi.c b/Modules/_winapi.c
index 65c9cfb..bb8203f 100644
--- a/Modules/_winapi.c
+++ b/Modules/_winapi.c
@@ -1716,14 +1716,18 @@ _winapi_GetVersion_impl(PyObject *module)
 /* Disable deprecation warnings about GetVersionEx as the result is
    being passed straight through to the caller, who is responsible for
    using it correctly. */
+#ifdef _MSC_VER
 #pragma warning(push)
 #pragma warning(disable:4996)
+#endif
 
 {
     return GetVersion();
 }
 
+#ifdef _MSC_VER
 #pragma warning(pop)
+#endif
 
 /*[clinic input]
 _winapi.MapViewOfFile -> LPVOID
diff --git a/Python/sysmodule.c b/Python/sysmodule.c
index 4275c5d..0c69d81 100644
--- a/Python/sysmodule.c
+++ b/Python/sysmodule.c
@@ -1722,8 +1722,10 @@ _sys_getwindowsversion_from_kernel32(void)
 /* Disable deprecation warnings about GetVersionEx as the result is
    being passed straight through to the caller, who is responsible for
    using it correctly. */
+#ifdef _MSC_VER
 #pragma warning(push)
 #pragma warning(disable:4996)
+#endif
 
 /*[clinic input]
 sys.getwindowsversion
@@ -1817,7 +1819,9 @@ error:
     return NULL;
 }
 
+#ifdef _MSC_VER
 #pragma warning(pop)
+#endif
 
 /*[clinic input]
 sys._enablelegacywindowsfsencoding
