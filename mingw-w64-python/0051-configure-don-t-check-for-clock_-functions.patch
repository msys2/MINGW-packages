From 7492fd9b21d336b3f1d3cf4fc04d9ebf06c0fec8 Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Sun, 1 Aug 2021 18:35:17 +0200
Subject: [PATCH 051/N] configure: don't check for clock_ functions

They shouldn't be exposed on Windows and lead to winpthread being linked in
---
 configure.ac | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/configure.ac b/configure.ac
index 6752a59..4c172f9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -5811,6 +5811,9 @@ AC_CHECK_FUNCS([setpgrp],
 # check for namespace functions
 AC_CHECK_FUNCS([setns unshare])
 
+case $host in
+  *-*-mingw*) ;;
+  *)
 AC_CHECK_FUNCS([clock_gettime], [], [
     AC_CHECK_LIB([rt], [clock_gettime], [
         LIBS="$LIBS -lrt"
@@ -5837,6 +5840,8 @@ then
       ])
   ])
 fi
+  ;;
+esac
 
 # On Android before API level 23, clock_nanosleep returns the wrong value when
 # interrupted by a signal (https://issuetracker.google.com/issues/216495770).
