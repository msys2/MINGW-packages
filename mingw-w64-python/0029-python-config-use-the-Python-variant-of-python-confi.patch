From 40b7746efde7998b08044bb99c9a7e1d12306faa Mon Sep 17 00:00:00 2001
From: Christoph Reiter <reiter.christoph@gmail.com>
Date: Mon, 5 Jan 2026 19:34:32 +0100
Subject: [PATCH 029/N] python-config: use the Python variant of
 python-config

so there is no bash required to run it on Windows
---
 Makefile.pre.in | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/Makefile.pre.in b/Makefile.pre.in
index 0fc36fe..d57144f 100644
--- a/Makefile.pre.in
+++ b/Makefile.pre.in
@@ -2849,6 +2849,10 @@ python-config: $(srcdir)/Misc/python-config.in Misc/python-config.sh
 	@if test `uname -s` = Darwin; then \
 		cp python-config.py python-config; \
 	fi
+	@ # On Windows, use the python version of the script so no bash is required
+	@if test "$(MACHDEP)" = "win32"; then \
+		cp python-config.py python-config; \
+	fi
 
 # macOS' make seems to ignore a dependency on a
 # "$(BUILD_SCRIPTS_DIR): $(MKDIR_P) $@" rule.
