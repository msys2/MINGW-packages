# Maintainer: Pellegrino Prevete <pellegrinoprevete@gmail.com>

_realname=libhandy-git
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=0.0.5
pkgrel=1
pkgdesc="A library full of GTK+ widgets for mobile phones (mingw-w64)"
url="https://source.puri.sm/Librem5/libhandy"
license=("LGPL2.1")
arch=('any')
depends=("${MINGW_PACKAGE_PREFIX}-gtk3")
makedepends=("${MINGW_PACKAGE_PREFIX}-meson"
             "${MINGW_PACKAGE_PREFIX}-pkg-config"
             "${MINGW_PACKAGE_PREFIX}-vala"
             "${MINGW_PACKAGE_PREFIX}-gobject-introspection"
             "${MINGW_PACKAGE_PREFIX}-glade")
options=('strip' 'staticlibs' '!debug')
provides=('mingw-w64-libhandy' "${MINGW_PACKAGE_PREFIX}-libhandy")
conflicts=('mingw-w64-libhandy' "${MINGW_PACKAGE_PREFIX}-libhandy")
source=('libhandy::git+https://source.puri.sm/librem5/libhandy.git')
sha256sums=('SKIP')

build() {
  rm -rf build
  ${MINGW_PREFIX}/bin/meson "libhandy" build -Dexamples=false -Dgtk_doc=false
  ${MINGW_PREFIX}/bin/ninja -C build
}

package() {
  DESTDIR="${pkgdir}${MINGW_PREFIX}" ${MINGW_PREFIX}/bin/ninja -C build install
}
