# Contributor: Raed Rizqie <raed.rizqie@gmail.com>

_realname=napi-rs
pkgbase=mingw-w64-nodejs-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-nodejs-${_realname}"
pkgver=0.3.10
pkgrel=1
pkgdesc='A framework for building compiled Node.js add-ons in Rust via Node-API (mingw-w64)'
arch=('any')
mingw_arch=('mingw64' 'ucrt64' 'clang64')
url='https://napi.rs/'
msys2_repository_url='https://github.com/Brooooooklyn/napi-rs'
license=('spdx:MIT')
depends=("${MINGW_PACKAGE_PREFIX}-nodejs")
source=("https://registry.npmjs.org/${_realname}/-/${_realname}-${pkgver}.tgz")
sha256sums=('b409a7e355ebe97fa3cbf5ad4575bf67ce6a36b8b5f9bef13e9de7c69ecb406b')
nooextract=(${_realname}-${pkgver}.tgz)

package() {
  cd ${srcdir}

  npm install -g \
    --prefix "${pkgdir}${MINGW_PREFIX}" \
    "${srcdir}/${_realname}-${pkgver}.tgz"

  install -Dm644 ${pkgdir}${MINGW_PREFIX}/lib/node_modules/napi-rs/LICENSE ${pkgdir}${MINGW_PREFIX}/share/licenses/nodejs-${_realname}/LICENSE
}
