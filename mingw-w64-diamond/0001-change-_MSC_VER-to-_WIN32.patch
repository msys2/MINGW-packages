From 0d096820be2f28452d504067a0b24a4e37cd019a Mon Sep 17 00:00:00 2001
From: Yuanmiao Gui <gui_yuan_miao@163.com>
Date: Thu, 3 Jan 2019 20:56:53 +0800
Subject: [PATCH 1/3] change _MSC_VER to _WIN32

---
 src/util/system.h          | 4 ++--
 src/util/system/system.cpp | 6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/util/system.h b/src/util/system.h
index 7201cca..e2dcd74 100644
--- a/src/util/system.h
+++ b/src/util/system.h
@@ -21,7 +21,7 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 #include <stdexcept>
 
-#ifdef _MSC_VER
+#ifdef _WIN32
 
 #define PACKED_ATTRIBUTE
 
@@ -31,7 +31,7 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 #endif
 
-#ifndef _MSC_VER
+#ifndef _WIN32
 
 #include <sys/resource.h>
 
diff --git a/src/util/system/system.cpp b/src/util/system/system.cpp
index b002cd1..95cc90a 100644
--- a/src/util/system/system.cpp
+++ b/src/util/system/system.cpp
@@ -5,7 +5,7 @@
 
 using namespace std;
 
-#ifdef _MSC_VER
+#ifdef _WIN32
 #include <windows.h>
 #else
 #include <unistd.h>
@@ -14,7 +14,7 @@ using namespace std;
 
 string executable_path() {
 	char buf[4096];
-#ifdef _MSC_VER
+#ifdef _WIN32
 	if (GetModuleFileNameA(NULL, buf, sizeof(buf)) == 0)
 		throw runtime_error("Error executing GetModuleFileNameA.");
 	return string(buf);
@@ -26,7 +26,7 @@ string executable_path() {
 }
 
 bool exists(const std::string &file_name) {
-#ifdef _MSC_VER
+#ifdef _WIN32
 	return GetFileAttributes(file_name.c_str()) != INVALID_FILE_ATTRIBUTES;
 #else
 	struct stat buffer;
-- 
2.18.0.windows.1

